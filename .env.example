# API Keys (Required to enable respective provider)
ANTHROPIC_API_KEY="your_anthropic_api_key_here"       # Required: Format: sk-ant-api03-...
PERPLEXITY_API_KEY="your_perplexity_api_key_here"     # Optional: Format: pplx-...
OPENAI_API_KEY="your_openai_api_key_here"             # Optional, for OpenAI models. Format: sk-proj-...
GOOGLE_API_KEY="your_google_api_key_here"             # Optional, for Google Gemini models.
MISTRAL_API_KEY="your_mistral_key_here"               # Optional, for Mistral AI models.
XAI_API_KEY="YOUR_XAI_KEY_HERE"                       # Optional, for xAI AI models.
GROQ_API_KEY="YOUR_GROQ_KEY_HERE"                     # Optional, for Groq models.
OPENROUTER_API_KEY="YOUR_OPENROUTER_KEY_HERE"         # Optional, for OpenRouter models.
AZURE_OPENAI_API_KEY="your_azure_key_here"            # Optional, for Azure OpenAI models (requires endpoint in .taskmaster/config.json).

# =============================================================================
# Data Parse Desk 2.0 - Additional Environment Variables
# =============================================================================

# Supabase Configuration (REQUIRED for Data Parse Desk)
# Project ID: uzcmaxfhfcsxzfqvaloz
VITE_SUPABASE_URL="https://uzcmaxfhfcsxzfqvaloz.supabase.co"
VITE_SUPABASE_ANON_KEY="your-anon-key-here"
# Service Role Key (for Edge Functions only, NEVER expose to client)
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"

# =============================================================================
# Security Configuration (REQUIRED for Production)
# Added by Security Audit 2025-10-27
# Documentation: See SECURITY_README.md for complete guide
# =============================================================================

# ‚ö†Ô∏è CRITICAL: API Key Encryption Password
# Required for: Migration 20251027000004 (API key encryption)
# Generate secure password:
#   openssl rand -base64 32
# Security: Store in secure vault (1Password, AWS Secrets Manager, etc.)
# Rotation: Recommended every 90 days
# Length: Minimum 32 characters (Base64-encoded 32 bytes = 44 chars)
API_KEY_ENCRYPTION_PASSWORD=""

# Example (DO NOT USE IN PRODUCTION):
# API_KEY_ENCRYPTION_PASSWORD="kX9mP2vR8qL5nH4gF7jK0wE3yT6uI1sA2dC4bV9zN8x="

# GDPR Compliance (Article 5(1)(e) - Storage Limitation)
# Enable automated cleanup of old data based on retention policies
ENABLE_DATA_RETENTION_CLEANUP="true"

# Default retention period for tables without specific policy
# Range: 7-3650 days (7 days to 10 years)
# Recommendation: 90 days for most data, 365 for compliance data
DATA_RETENTION_DAYS_DEFAULT="90"

# GDPR Deletion Grace Period
# Time before scheduled user deletions are executed
# Allows users to cancel deletion requests
DELETION_GRACE_PERIOD_DAYS="30"

# Rate Limiting (In-Memory)
# ‚ö†Ô∏è Note: For distributed/multi-instance deployments, use Redis
# Recommendation: Migrate to Upstash Redis for production
RATE_LIMIT_REQUESTS_PER_HOUR="1000"      # Max requests per API key per hour
RATE_LIMIT_WINDOW_MS="3600000"           # Rate limit window (1 hour = 3600000ms)
RATE_LIMIT_MAX_REQUESTS="100"            # Max requests per window
RATE_LIMIT_BURST_SIZE="20"               # Allow short bursts

# Security Headers (Content Security Policy)
# Enable strict CSP to prevent XSS attacks
# ‚ö†Ô∏è Warning: May break inline scripts/styles - test thoroughly
ENABLE_STRICT_CSP="false"                # Set to "true" for production after testing
ALLOWED_FRAME_ANCESTORS="none"           # Frame-ancestors: none | self | https://trusted-domain.com

# Additional Security Headers (Applied by Edge Functions)
# These are automatically set when ENABLE_STRICT_CSP="true"
# - X-Frame-Options: DENY
# - X-Content-Type-Options: nosniff
# - Referrer-Policy: strict-origin-when-cross-origin
# - Permissions-Policy: geolocation=(), microphone=(), camera=()

# Audit Logging
# Log query performance and security events
ENABLE_QUERY_PERFORMANCE_LOGGING="true"
ENABLE_SECURITY_EVENT_LOGGING="true"

# Query Performance Thresholds (milliseconds)
SLOW_QUERY_THRESHOLD_MS="1000"           # Log queries slower than 1 second
VERY_SLOW_QUERY_THRESHOLD_MS="5000"      # Alert on queries slower than 5 seconds

# Cloud Storage Integration (OPTIONAL)
VITE_DROPBOX_CLIENT_ID="your-dropbox-client-id"      # For Dropbox sync
VITE_ONEDRIVE_CLIENT_ID="your-onedrive-client-id"    # For OneDrive sync

# Telegram Bot (OPTIONAL)
VITE_TELEGRAM_BOT_TOKEN="your-telegram-bot-token"
OLLAMA_API_KEY="your_ollama_api_key_here"             # Optional: For remote Ollama servers that require authentication.
GITHUB_API_KEY="your_github_api_key_here"             # Optional: For GitHub import/export features. Format: ghp_... or github_pat_...

# =============================================================================
# Performance Optimization (Redis Caching)
# Added by Performance Audit 2025-10-27
# Documentation: See PERFORMANCE_100_PERCENT_COMPLETE.md
# =============================================================================

# Redis Configuration (Upstash - Recommended for Supabase Edge Functions)
# Get credentials from: https://console.upstash.com/
REDIS_URL=""                           # Format: redis://default:password@host:port
REDIS_TOKEN=""                         # Upstash REST token (for Edge Functions)
REDIS_REST_URL=""                      # Upstash REST URL

# Cache Configuration
CACHE_TTL_DEFAULT="300"                # Default cache TTL in seconds (5 minutes)
CACHE_TTL_STATIC="3600"                # Static data TTL (1 hour)
CACHE_TTL_DYNAMIC="60"                 # Dynamic data TTL (1 minute)
ENABLE_REDIS_CACHE="true"              # Enable Redis caching layer

# Connection Pool Configuration
DB_POOL_MIN="2"                        # Minimum pool size
DB_POOL_MAX="15"                       # Maximum pool size (reduced from 40)
DB_CONNECTION_TIMEOUT="5000"           # Connection timeout (5s)
DB_IDLE_TIMEOUT="10000"                # Idle timeout (10s)

# =============================================================================
# Environment-Specific Configuration
# =============================================================================
# NOTE: For different environments, create separate files:
# - .env.development (local development)
# - .env.production (production build)
# - .env.staging (staging deployment)

# Environment Settings
VITE_ENVIRONMENT="development"     # development | staging | production
VITE_DEBUG_MODE="true"             # Enable debug logging
VITE_LOG_LEVEL="debug"             # debug | info | warn | error

# API Configuration
VITE_API_TIMEOUT="30000"           # API timeout in milliseconds
VITE_ENABLE_OFFLINE_MODE="true"    # Enable offline mode and sync queue

# CORS Origins (comma-separated list)
VITE_CORS_ORIGINS="http://localhost:5173,http://localhost:3000"

# Feature Flags
VITE_ENABLE_AI_FEATURES="true"     # Enable AI-powered features
VITE_ENABLE_EXPORT="true"          # Enable data export
VITE_ENABLE_CLOUD_SYNC="true"      # Enable cloud synchronization
VITE_ENABLE_TELEGRAM="false"       # Enable Telegram integration

# Monitoring & Analytics
# VITE_SENTRY_DSN=""               # Sentry error tracking DSN (get from sentry.io)
VITE_SENTRY_ENVIRONMENT="development"  # development | staging | production
VITE_SENTRY_SAMPLE_RATE="0.1"      # 10% of transactions for performance monitoring
VITE_SENTRY_REPLAY_SESSION_RATE="0.1"  # 10% session replay
VITE_SENTRY_REPLAY_ERROR_RATE="1.0"    # 100% replay on errors

VITE_ENABLE_ANALYTICS="false"      # Google Analytics or similar
VITE_BUNDLE_ANALYZER="false"       # Enable bundle size analysis

# =============================================================================
# Production Configuration Example
# =============================================================================
# For production, create .env.production with these settings:
#
# # Supabase
# VITE_SUPABASE_URL="https://uzcmaxfhfcsxzfqvaloz.supabase.co"
# VITE_SUPABASE_ANON_KEY="<your-production-anon-key>"
# SUPABASE_SERVICE_ROLE_KEY="<your-production-service-role-key>"
#
# # Security (CRITICAL)
# API_KEY_ENCRYPTION_PASSWORD="<generated-with-openssl-rand-base64-32>"
# ENABLE_DATA_RETENTION_CLEANUP="true"
# DATA_RETENTION_DAYS_DEFAULT="90"
# DELETION_GRACE_PERIOD_DAYS="30"
#
# # Rate Limiting (Production values)
# RATE_LIMIT_REQUESTS_PER_HOUR="10000"
# RATE_LIMIT_WINDOW_MS="3600000"
# RATE_LIMIT_MAX_REQUESTS="1000"
# RATE_LIMIT_BURST_SIZE="50"
#
# # Security Headers (Enable in production)
# ENABLE_STRICT_CSP="true"
# ALLOWED_FRAME_ANCESTORS="none"
# ENABLE_QUERY_PERFORMANCE_LOGGING="true"
# ENABLE_SECURITY_EVENT_LOGGING="true"
#
# # Environment
# VITE_ENVIRONMENT="production"
# VITE_DEBUG_MODE="false"
# VITE_LOG_LEVEL="error"
# VITE_API_TIMEOUT="30000"
# VITE_ENABLE_OFFLINE_MODE="true"
#
# # CORS (Production domains only)
# VITE_CORS_ORIGINS="https://yourdomain.com,https://www.yourdomain.com"
#
# # Features
# VITE_ENABLE_AI_FEATURES="true"
# VITE_ENABLE_EXPORT="true"
# VITE_ENABLE_CLOUD_SYNC="true"
# VITE_ENABLE_TELEGRAM="true"
#
# # AI Provider Keys
# ANTHROPIC_API_KEY="sk-ant-api03-..."
# # ... other provider keys as needed
#
# # Monitoring (Production)
# VITE_SENTRY_DSN="https://...@sentry.io/..."
# VITE_SENTRY_ENVIRONMENT="production"
# VITE_SENTRY_SAMPLE_RATE="0.1"
# VITE_ENABLE_ANALYTICS="true"
#
# # Optional Integrations
# VITE_DROPBOX_CLIENT_ID="<your-dropbox-client-id>"
# VITE_ONEDRIVE_CLIENT_ID="<your-onedrive-client-id>"
# VITE_TELEGRAM_BOT_TOKEN="<your-telegram-bot-token>"

# =============================================================================
# Quick Start Checklist
# =============================================================================
# ‚úÖ 1. Copy this file to .env (for development) or .env.production
# ‚úÖ 2. Get Supabase credentials from: https://app.supabase.com/project/uzcmaxfhfcsxzfqvaloz/settings/api
# ‚úÖ 3. Generate encryption password: openssl rand -base64 32
# ‚úÖ 4. Get AI provider API keys (Anthropic required, others optional)
# ‚úÖ 5. Configure CORS origins for your domains
# ‚úÖ 6. For production: Set VITE_ENVIRONMENT="production" and VITE_DEBUG_MODE="false"
# ‚úÖ 7. Apply security migrations: ./apply-security-migrations.sh
# ‚úÖ 8. Test security: ./test-security.sh
#
# üìö Documentation:
#    - SECURITY_README.md - Complete security guide
#    - SECURITY_FIX_GUIDE.md - Migration deployment guide
#    - DEPLOYMENT_CHECKLIST.md - Production deployment checklist
#    - MONITORING_SETUP.md - Monitoring and alerting setup