var hd=Object.defineProperty;var pd=(e,r,t)=>r in e?hd(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Ie=(e,r,t)=>pd(e,typeof r!="symbol"?r+"":r,t);import{c as J,u as Xa,a as xr,b as rr,D as pt,d as vd,e as on,f as vt,r as g,j as u,A as cn,P as wr,g as tr,h as Za,i as q,k as Ja,F as eu,l as ru,C as tu,m as Ye,n as nu,o as au,p as uu,R as su,q as gd,s as du,t as iu,v as ou,w as cu,x as zt,y as Ce,z as ln,B as fr,E as mr,G as hr,H as pr,I as vr,J as lu,K as F,L as Mr,M as Ze,N as fe,O as fn,Q as Er,S as tt,T as Fe,X as nt,U as te,V as Qn,W as ye,Y as bd,Z as yd,_ as xd,$ as Ge,a0 as Be,a1 as jr,a2 as wd,a3 as _d,a4 as Cd,a5 as Nd,a6 as jd,a7 as Sd,a8 as kd,a9 as Pd,aa as Md}from"./index-DE73ohTM.js";import{G as Ed,T as Ad,D as Rd,a as Dd,b as Od,c as Xn,d as Rt,e as Td,f as Dt}from"./table-DJfw_P7e.js";import{c as fu,R as Ld,I as Fd,u as Id,T as mu,a as hu,b as ir,d as Kt}from"./tabs-2Xit3JSY.js";import{S as Re,a as De,b as Oe,c as Te,d as we,e as pu,f as Zn}from"./scroll-area-VRJbhIK5.js";import{T as at,F as $d,P as qr}from"./progress-CnR9FxLa.js";import{C as Wd}from"./calendar-GYfL9xMG.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=J("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=J("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=J("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=J("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=J("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=J("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=J("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=J("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=J("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=J("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=J("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=J("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=J("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=J("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function Jd(e,r,t,n){return Xa({queryKey:["table-data",e,r,t,n],queryFn:()=>pt.getTableData(e,r,t,n),enabled:!!e,staleTime:3e4})}function ei(e){const r=xr();return rr({mutationFn:t=>pt.insertTableRow(e,t),onSuccess:()=>{r.invalidateQueries({queryKey:["table-data",e]}),r.invalidateQueries({queryKey:["database-stats",e]})}})}function ri(e){const r=xr();return rr({mutationFn:({rowId:t,updates:n})=>pt.updateTableRow(e,t,n),onSuccess:()=>{r.invalidateQueries({queryKey:["table-data",e]})}})}function ti(e){const r=xr();return rr({mutationFn:t=>pt.deleteTableRow(e,t),onSuccess:()=>{r.invalidateQueries({queryKey:["table-data",e]}),r.invalidateQueries({queryKey:["database-stats",e]})}})}var Xt=["Enter"," "],ni=["ArrowDown","PageUp","Home"],yu=["ArrowUp","PageDown","End"],ai=[...ni,...yu],ui={ltr:[...Xt,"ArrowRight"],rtl:[...Xt,"ArrowLeft"]},si={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fr="Menu",[Ar,di,ii]=vd(Fr),[nr,xu]=on(Fr,[ii,vt,fu]),gt=vt(),wu=fu(),[oi,ar]=nr(Fr),[ci,Ir]=nr(Fr),_u=e=>{const{__scopeMenu:r,open:t=!1,children:n,dir:a,onOpenChange:s,modal:d=!0}=e,i=gt(r),[o,c]=g.useState(null),l=g.useRef(!1),f=nu(s),v=Id(a);return g.useEffect(()=>{const m=()=>{l.current=!0,document.addEventListener("pointerdown",h,{capture:!0,once:!0}),document.addEventListener("pointermove",h,{capture:!0,once:!0})},h=()=>l.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",h,{capture:!0}),document.removeEventListener("pointermove",h,{capture:!0})}},[]),u.jsx(du,{...i,children:u.jsx(oi,{scope:r,open:t,onOpenChange:f,content:o,onContentChange:c,children:u.jsx(ci,{scope:r,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:l,dir:v,modal:d,children:n})})})};_u.displayName=Fr;var li="MenuAnchor",mn=g.forwardRef((e,r)=>{const{__scopeMenu:t,...n}=e,a=gt(t);return u.jsx(cn,{...a,...n,ref:r})});mn.displayName=li;var hn="MenuPortal",[fi,Cu]=nr(hn,{forceMount:void 0}),Nu=e=>{const{__scopeMenu:r,forceMount:t,children:n,container:a}=e,s=ar(hn,r);return u.jsx(fi,{scope:r,forceMount:t,children:u.jsx(wr,{present:t||s.open,children:u.jsx(iu,{asChild:!0,container:a,children:n})})})};Nu.displayName=hn;var Ne="MenuContent",[mi,pn]=nr(Ne),ju=g.forwardRef((e,r)=>{const t=Cu(Ne,e.__scopeMenu),{forceMount:n=t.forceMount,...a}=e,s=ar(Ne,e.__scopeMenu),d=Ir(Ne,e.__scopeMenu);return u.jsx(Ar.Provider,{scope:e.__scopeMenu,children:u.jsx(wr,{present:n||s.open,children:u.jsx(Ar.Slot,{scope:e.__scopeMenu,children:d.modal?u.jsx(hi,{...a,ref:r}):u.jsx(pi,{...a,ref:r})})})})}),hi=g.forwardRef((e,r)=>{const t=ar(Ne,e.__scopeMenu),n=g.useRef(null),a=tr(r,n);return g.useEffect(()=>{const s=n.current;if(s)return Za(s)},[]),u.jsx(vn,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:q(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),pi=g.forwardRef((e,r)=>{const t=ar(Ne,e.__scopeMenu);return u.jsx(vn,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),vi=ou("MenuContent.ScrollLock"),vn=g.forwardRef((e,r)=>{const{__scopeMenu:t,loop:n=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:d,disableOutsidePointerEvents:i,onEntryFocus:o,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:v,onDismiss:m,disableOutsideScroll:h,...b}=e,p=ar(Ne,t),_=Ir(Ne,t),x=gt(t),y=wu(t),O=di(t),[$,G]=g.useState(null),U=g.useRef(null),I=tr(r,U,p.onContentChange),Q=g.useRef(0),Y=g.useRef(""),ne=g.useRef(0),se=g.useRef(null),ue=g.useRef("right"),ae=g.useRef(0),de=h?su:g.Fragment,he=h?{as:vi,allowPinchZoom:!0}:void 0,E=A=>{var W,ee;const V=Y.current+A,T=O().filter(L=>!L.disabled),S=document.activeElement,k=(W=T.find(L=>L.ref.current===S))==null?void 0:W.textValue,j=T.map(L=>L.textValue),R=Pi(j,V,k),M=(ee=T.find(L=>L.textValue===R))==null?void 0:ee.ref.current;(function L(z){Y.current=z,window.clearTimeout(Q.current),z!==""&&(Q.current=window.setTimeout(()=>L(""),1e3))})(V),M&&setTimeout(()=>M.focus())};g.useEffect(()=>()=>window.clearTimeout(Q.current),[]),Ja();const N=g.useCallback(A=>{var T,S;return ue.current===((T=se.current)==null?void 0:T.side)&&Ei(A,(S=se.current)==null?void 0:S.area)},[]);return u.jsx(mi,{scope:t,searchRef:Y,onItemEnter:g.useCallback(A=>{N(A)&&A.preventDefault()},[N]),onItemLeave:g.useCallback(A=>{var V;N(A)||((V=U.current)==null||V.focus(),G(null))},[N]),onTriggerLeave:g.useCallback(A=>{N(A)&&A.preventDefault()},[N]),pointerGraceTimerRef:ne,onPointerGraceIntentChange:g.useCallback(A=>{se.current=A},[]),children:u.jsx(de,{...he,children:u.jsx(eu,{asChild:!0,trapped:a,onMountAutoFocus:q(s,A=>{var V;A.preventDefault(),(V=U.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:u.jsx(ru,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:v,onDismiss:m,children:u.jsx(Ld,{asChild:!0,...y,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:$,onCurrentTabStopIdChange:G,onEntryFocus:q(o,A=>{_.isUsingKeyboardRef.current||A.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(tu,{role:"menu","aria-orientation":"vertical","data-state":Gu(p.open),"data-radix-menu-content":"",dir:_.dir,...x,...b,ref:I,style:{outline:"none",...b.style},onKeyDown:q(b.onKeyDown,A=>{const T=A.target.closest("[data-radix-menu-content]")===A.currentTarget,S=A.ctrlKey||A.altKey||A.metaKey,k=A.key.length===1;T&&(A.key==="Tab"&&A.preventDefault(),!S&&k&&E(A.key));const j=U.current;if(A.target!==j||!ai.includes(A.key))return;A.preventDefault();const M=O().filter(W=>!W.disabled).map(W=>W.ref.current);yu.includes(A.key)&&M.reverse(),Si(M)}),onBlur:q(e.onBlur,A=>{A.currentTarget.contains(A.target)||(window.clearTimeout(Q.current),Y.current="")}),onPointerMove:q(e.onPointerMove,Rr(A=>{const V=A.target,T=ae.current!==A.clientX;if(A.currentTarget.contains(V)&&T){const S=A.clientX>ae.current?"right":"left";ue.current=S,ae.current=A.clientX}}))})})})})})})});ju.displayName=Ne;var gi="MenuGroup",gn=g.forwardRef((e,r)=>{const{__scopeMenu:t,...n}=e;return u.jsx(Ye.div,{role:"group",...n,ref:r})});gn.displayName=gi;var bi="MenuLabel",Su=g.forwardRef((e,r)=>{const{__scopeMenu:t,...n}=e;return u.jsx(Ye.div,{...n,ref:r})});Su.displayName=bi;var ut="MenuItem",na="menu.itemSelect",bt=g.forwardRef((e,r)=>{const{disabled:t=!1,onSelect:n,...a}=e,s=g.useRef(null),d=Ir(ut,e.__scopeMenu),i=pn(ut,e.__scopeMenu),o=tr(r,s),c=g.useRef(!1),l=()=>{const f=s.current;if(!t&&f){const v=new CustomEvent(na,{bubbles:!0,cancelable:!0});f.addEventListener(na,m=>n==null?void 0:n(m),{once:!0}),gd(f,v),v.defaultPrevented?c.current=!1:d.onClose()}};return u.jsx(ku,{...a,ref:o,disabled:t,onClick:q(e.onClick,l),onPointerDown:f=>{var v;(v=e.onPointerDown)==null||v.call(e,f),c.current=!0},onPointerUp:q(e.onPointerUp,f=>{var v;c.current||(v=f.currentTarget)==null||v.click()}),onKeyDown:q(e.onKeyDown,f=>{const v=i.searchRef.current!=="";t||v&&f.key===" "||Xt.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});bt.displayName=ut;var ku=g.forwardRef((e,r)=>{const{__scopeMenu:t,disabled:n=!1,textValue:a,...s}=e,d=pn(ut,t),i=wu(t),o=g.useRef(null),c=tr(r,o),[l,f]=g.useState(!1),[v,m]=g.useState("");return g.useEffect(()=>{const h=o.current;h&&m((h.textContent??"").trim())},[s.children]),u.jsx(Ar.ItemSlot,{scope:t,disabled:n,textValue:a??v,children:u.jsx(Fd,{asChild:!0,...i,focusable:!n,children:u.jsx(Ye.div,{role:"menuitem","data-highlighted":l?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:c,onPointerMove:q(e.onPointerMove,Rr(h=>{n?d.onItemLeave(h):(d.onItemEnter(h),h.defaultPrevented||h.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:q(e.onPointerLeave,Rr(h=>d.onItemLeave(h))),onFocus:q(e.onFocus,()=>f(!0)),onBlur:q(e.onBlur,()=>f(!1))})})})}),yi="MenuCheckboxItem",Pu=g.forwardRef((e,r)=>{const{checked:t=!1,onCheckedChange:n,...a}=e;return u.jsx(Du,{scope:e.__scopeMenu,checked:t,children:u.jsx(bt,{role:"menuitemcheckbox","aria-checked":st(t)?"mixed":t,...a,ref:r,"data-state":yn(t),onSelect:q(a.onSelect,()=>n==null?void 0:n(st(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Pu.displayName=yi;var Mu="MenuRadioGroup",[xi,wi]=nr(Mu,{value:void 0,onValueChange:()=>{}}),Eu=g.forwardRef((e,r)=>{const{value:t,onValueChange:n,...a}=e,s=nu(n);return u.jsx(xi,{scope:e.__scopeMenu,value:t,onValueChange:s,children:u.jsx(gn,{...a,ref:r})})});Eu.displayName=Mu;var Au="MenuRadioItem",Ru=g.forwardRef((e,r)=>{const{value:t,...n}=e,a=wi(Au,e.__scopeMenu),s=t===a.value;return u.jsx(Du,{scope:e.__scopeMenu,checked:s,children:u.jsx(bt,{role:"menuitemradio","aria-checked":s,...n,ref:r,"data-state":yn(s),onSelect:q(n.onSelect,()=>{var d;return(d=a.onValueChange)==null?void 0:d.call(a,t)},{checkForDefaultPrevented:!1})})})});Ru.displayName=Au;var bn="MenuItemIndicator",[Du,_i]=nr(bn,{checked:!1}),Ou=g.forwardRef((e,r)=>{const{__scopeMenu:t,forceMount:n,...a}=e,s=_i(bn,t);return u.jsx(wr,{present:n||st(s.checked)||s.checked===!0,children:u.jsx(Ye.span,{...a,ref:r,"data-state":yn(s.checked)})})});Ou.displayName=bn;var Ci="MenuSeparator",Tu=g.forwardRef((e,r)=>{const{__scopeMenu:t,...n}=e;return u.jsx(Ye.div,{role:"separator","aria-orientation":"horizontal",...n,ref:r})});Tu.displayName=Ci;var Ni="MenuArrow",Lu=g.forwardRef((e,r)=>{const{__scopeMenu:t,...n}=e,a=gt(t);return u.jsx(au,{...a,...n,ref:r})});Lu.displayName=Ni;var ji="MenuSub",[Fh,Fu]=nr(ji),Sr="MenuSubTrigger",Iu=g.forwardRef((e,r)=>{const t=ar(Sr,e.__scopeMenu),n=Ir(Sr,e.__scopeMenu),a=Fu(Sr,e.__scopeMenu),s=pn(Sr,e.__scopeMenu),d=g.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:o}=s,c={__scopeMenu:e.__scopeMenu},l=g.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return g.useEffect(()=>l,[l]),g.useEffect(()=>{const f=i.current;return()=>{window.clearTimeout(f),o(null)}},[i,o]),u.jsx(mn,{asChild:!0,...c,children:u.jsx(ku,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":a.contentId,"data-state":Gu(t.open),...e,ref:uu(r,a.onTriggerChange),onClick:f=>{var v;(v=e.onClick)==null||v.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:q(e.onPointerMove,Rr(f=>{s.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!t.open&&!d.current&&(s.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{t.onOpenChange(!0),l()},100))})),onPointerLeave:q(e.onPointerLeave,Rr(f=>{var m,h;l();const v=(m=t.content)==null?void 0:m.getBoundingClientRect();if(v){const b=(h=t.content)==null?void 0:h.dataset.side,p=b==="right",_=p?-5:5,x=v[p?"left":"right"],y=v[p?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x,y:v.top},{x:y,y:v.top},{x:y,y:v.bottom},{x,y:v.bottom}],side:b}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:q(e.onKeyDown,f=>{var m;const v=s.searchRef.current!=="";e.disabled||v&&f.key===" "||ui[n.dir].includes(f.key)&&(t.onOpenChange(!0),(m=t.content)==null||m.focus(),f.preventDefault())})})})});Iu.displayName=Sr;var $u="MenuSubContent",Wu=g.forwardRef((e,r)=>{const t=Cu(Ne,e.__scopeMenu),{forceMount:n=t.forceMount,...a}=e,s=ar(Ne,e.__scopeMenu),d=Ir(Ne,e.__scopeMenu),i=Fu($u,e.__scopeMenu),o=g.useRef(null),c=tr(r,o);return u.jsx(Ar.Provider,{scope:e.__scopeMenu,children:u.jsx(wr,{present:n||s.open,children:u.jsx(Ar.Slot,{scope:e.__scopeMenu,children:u.jsx(vn,{id:i.contentId,"aria-labelledby":i.triggerId,...a,ref:c,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:l=>{var f;d.isUsingKeyboardRef.current&&((f=o.current)==null||f.focus()),l.preventDefault()},onCloseAutoFocus:l=>l.preventDefault(),onFocusOutside:q(e.onFocusOutside,l=>{l.target!==i.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:q(e.onEscapeKeyDown,l=>{d.onClose(),l.preventDefault()}),onKeyDown:q(e.onKeyDown,l=>{var m;const f=l.currentTarget.contains(l.target),v=si[d.dir].includes(l.key);f&&v&&(s.onOpenChange(!1),(m=i.trigger)==null||m.focus(),l.preventDefault())})})})})})});Wu.displayName=$u;function Gu(e){return e?"open":"closed"}function st(e){return e==="indeterminate"}function yn(e){return st(e)?"indeterminate":e?"checked":"unchecked"}function Si(e){const r=document.activeElement;for(const t of e)if(t===r||(t.focus(),document.activeElement!==r))return}function ki(e,r){return e.map((t,n)=>e[(r+n)%e.length])}function Pi(e,r,t){const a=r.length>1&&Array.from(r).every(c=>c===r[0])?r[0]:r,s=t?e.indexOf(t):-1;let d=ki(e,Math.max(s,0));a.length===1&&(d=d.filter(c=>c!==t));const o=d.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return o!==t?o:void 0}function Mi(e,r){const{x:t,y:n}=e;let a=!1;for(let s=0,d=r.length-1;s<r.length;d=s++){const i=r[s],o=r[d],c=i.x,l=i.y,f=o.x,v=o.y;l>n!=v>n&&t<(f-c)*(n-l)/(v-l)+c&&(a=!a)}return a}function Ei(e,r){if(!r)return!1;const t={x:e.clientX,y:e.clientY};return Mi(t,r)}function Rr(e){return r=>r.pointerType==="mouse"?e(r):void 0}var Ai=_u,Ri=mn,Di=Nu,Oi=ju,Ti=gn,Li=Su,Fi=bt,Ii=Pu,$i=Eu,Wi=Ru,Gi=Ou,Bi=Tu,Ui=Lu,Vi=Iu,qi=Wu,yt="DropdownMenu",[Hi,Ih]=on(yt,[xu]),me=xu(),[Yi,Bu]=Hi(yt),Uu=e=>{const{__scopeDropdownMenu:r,children:t,dir:n,open:a,defaultOpen:s,onOpenChange:d,modal:i=!0}=e,o=me(r),c=g.useRef(null),[l,f]=cu({prop:a,defaultProp:s??!1,onChange:d,caller:yt});return u.jsx(Yi,{scope:r,triggerId:zt(),triggerRef:c,contentId:zt(),open:l,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(v=>!v),[f]),modal:i,children:u.jsx(Ai,{...o,open:l,onOpenChange:f,dir:n,modal:i,children:t})})};Uu.displayName=yt;var Vu="DropdownMenuTrigger",qu=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,disabled:n=!1,...a}=e,s=Bu(Vu,t),d=me(t);return u.jsx(Ri,{asChild:!0,...d,children:u.jsx(Ye.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:uu(r,s.triggerRef),onPointerDown:q(e.onPointerDown,i=>{!n&&i.button===0&&i.ctrlKey===!1&&(s.onOpenToggle(),s.open||i.preventDefault())}),onKeyDown:q(e.onKeyDown,i=>{n||(["Enter"," "].includes(i.key)&&s.onOpenToggle(),i.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});qu.displayName=Vu;var zi="DropdownMenuPortal",Hu=e=>{const{__scopeDropdownMenu:r,...t}=e,n=me(r);return u.jsx(Di,{...n,...t})};Hu.displayName=zi;var Yu="DropdownMenuContent",zu=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=Bu(Yu,t),s=me(t),d=g.useRef(!1);return u.jsx(Oi,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...n,ref:r,onCloseAutoFocus:q(e.onCloseAutoFocus,i=>{var o;d.current||(o=a.triggerRef.current)==null||o.focus(),d.current=!1,i.preventDefault()}),onInteractOutside:q(e.onInteractOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,l=o.button===2||c;(!a.modal||l)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zu.displayName=Yu;var Ki="DropdownMenuGroup",Qi=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Ti,{...a,...n,ref:r})});Qi.displayName=Ki;var Xi="DropdownMenuLabel",Ku=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Li,{...a,...n,ref:r})});Ku.displayName=Xi;var Zi="DropdownMenuItem",Qu=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Fi,{...a,...n,ref:r})});Qu.displayName=Zi;var Ji="DropdownMenuCheckboxItem",Xu=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Ii,{...a,...n,ref:r})});Xu.displayName=Ji;var eo="DropdownMenuRadioGroup",ro=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx($i,{...a,...n,ref:r})});ro.displayName=eo;var to="DropdownMenuRadioItem",Zu=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Wi,{...a,...n,ref:r})});Zu.displayName=to;var no="DropdownMenuItemIndicator",Ju=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Gi,{...a,...n,ref:r})});Ju.displayName=no;var ao="DropdownMenuSeparator",es=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Bi,{...a,...n,ref:r})});es.displayName=ao;var uo="DropdownMenuArrow",so=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Ui,{...a,...n,ref:r})});so.displayName=uo;var io="DropdownMenuSubTrigger",rs=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(Vi,{...a,...n,ref:r})});rs.displayName=io;var oo="DropdownMenuSubContent",ts=g.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...n}=e,a=me(t);return u.jsx(qi,{...a,...n,ref:r,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ts.displayName=oo;var co=Uu,lo=qu,fo=Hu,ns=zu,as=Ku,us=Qu,ss=Xu,ds=Zu,is=Ju,os=es,cs=rs,ls=ts;const aa=co,ua=lo,mo=g.forwardRef(({className:e,inset:r,children:t,...n},a)=>u.jsxs(cs,{ref:a,className:Ce("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",r&&"pl-8",e),...n,children:[t,u.jsx(vu,{className:"ml-auto h-4 w-4"})]}));mo.displayName=cs.displayName;const ho=g.forwardRef(({className:e,...r},t)=>u.jsx(ls,{ref:t,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));ho.displayName=ls.displayName;const Zt=g.forwardRef(({className:e,sideOffset:r=4,...t},n)=>u.jsx(fo,{children:u.jsx(ns,{ref:n,sideOffset:r,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));Zt.displayName=ns.displayName;const kr=g.forwardRef(({className:e,inset:r,...t},n)=>u.jsx(us,{ref:n,className:Ce("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r&&"pl-8",e),...t}));kr.displayName=us.displayName;const po=g.forwardRef(({className:e,children:r,checked:t,...n},a)=>u.jsxs(ss,{ref:a,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:t,...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(is,{children:u.jsx(ln,{className:"h-4 w-4"})})}),r]}));po.displayName=ss.displayName;const vo=g.forwardRef(({className:e,children:r,...t},n)=>u.jsxs(ds,{ref:n,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...t,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(is,{children:u.jsx(Vd,{className:"h-2 w-2 fill-current"})})}),r]}));vo.displayName=ds.displayName;const go=g.forwardRef(({className:e,inset:r,...t},n)=>u.jsx(as,{ref:n,className:Ce("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",e),...t}));go.displayName=as.displayName;const Jt=g.forwardRef(({className:e,...r},t)=>u.jsx(os,{ref:t,className:Ce("-mx-1 my-1 h-px bg-muted",e),...r}));Jt.displayName=os.displayName;const Ot=[{value:"text",label:"Текст",icon:"📝"},{value:"number",label:"Число",icon:"🔢"},{value:"date",label:"Дата",icon:"📅"},{value:"boolean",label:"Да/Нет",icon:"✓"},{value:"select",label:"Выбор",icon:"📋"},{value:"multi_select",label:"Множ. выбор",icon:"☑"},{value:"email",label:"Email",icon:"📧"},{value:"url",label:"URL",icon:"🔗"},{value:"phone",label:"Телефон",icon:"📞"},{value:"file",label:"Файл",icon:"📎"},{value:"relation",label:"Связь",icon:"🔀"},{value:"rollup",label:"Rollup",icon:"∑"},{value:"formula",label:"Формула",icon:"ƒ"},{value:"lookup",label:"Lookup",icon:"👁"}];function bo({open:e,onOpenChange:r,databaseId:t,columns:n}){const[a,s]=g.useState(!1),[d,i]=g.useState(null),[o,c]=g.useState({column_name:"",column_type:"text",is_required:!1,default_value:""}),l=async()=>{if(!o.column_name.trim()){te.error("Введите название колонки");return}try{te.success("Колонка добавлена"),s(!1),c({column_name:"",column_type:"text",is_required:!1,default_value:""})}catch(h){te.error("Ошибка при добавлении колонки"),console.error(h)}},f=async h=>{try{te.success("Колонка удалена")}catch(b){te.error("Ошибка при удалении колонки"),console.error(b)}},v=async h=>{try{te.success("Колонка обновлена"),i(null)}catch(b){te.error("Ошибка при обновлении колонки"),console.error(b)}},m=h=>Ot.find(b=>b.value===h)||Ot[0];return u.jsx(fr,{open:e,onOpenChange:r,children:u.jsxs(mr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(hr,{children:[u.jsx(pr,{children:"Управление колонками"}),u.jsx(vr,{children:"Добавляйте, редактируйте и удаляйте колонки базы данных"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Колонки"}),u.jsxs(fr,{open:a,onOpenChange:s,children:[u.jsx(lu,{asChild:!0,children:u.jsxs(F,{size:"sm",className:"gap-2",children:[u.jsx(Mr,{className:"h-4 w-4"}),"Добавить колонку"]})}),u.jsxs(mr,{className:"sm:max-w-[500px]",children:[u.jsxs(hr,{children:[u.jsx(pr,{children:"Новая колонка"}),u.jsx(vr,{children:"Добавьте новую колонку в базу данных"})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Ze,{htmlFor:"column_name",children:"Название колонки *"}),u.jsx(fe,{id:"column_name",placeholder:"Название",value:o.column_name,onChange:h=>c({...o,column_name:h.target.value})})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Ze,{htmlFor:"column_type",children:"Тип данных"}),u.jsxs(Re,{value:o.column_type,onValueChange:h=>c({...o,column_type:h}),children:[u.jsx(De,{children:u.jsx(Oe,{})}),u.jsx(Te,{children:Ot.map(h=>u.jsx(we,{value:h.value,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:h.icon}),u.jsx("span",{children:h.label})]})},h.value))})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"space-y-0.5",children:[u.jsx(Ze,{htmlFor:"is_required",children:"Обязательное поле"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Поле должно быть заполнено"})]}),u.jsx(pu,{id:"is_required",checked:o.is_required,onCheckedChange:h=>c({...o,is_required:h})})]}),!o.is_required&&u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Ze,{htmlFor:"default_value",children:"Значение по умолчанию"}),u.jsx(fe,{id:"default_value",placeholder:"Пусто",value:o.default_value,onChange:h=>c({...o,default_value:h.target.value})})]})]}),u.jsxs(fn,{children:[u.jsx(F,{variant:"outline",onClick:()=>s(!1),children:"Отмена"}),u.jsx(F,{onClick:l,children:"Добавить"})]})]})]})]}),u.jsx(Er,{children:u.jsx(tt,{className:"p-0",children:n.length===0?u.jsx("div",{className:"p-8 text-center text-muted-foreground",children:u.jsx("p",{children:"Нет колонок. Добавьте первую колонку для начала работы."})}):u.jsx("div",{className:"divide-y",children:n.map((h,b)=>{const p=m(h.column_type),_=(d==null?void 0:d.id)===h.id;return u.jsxs("div",{className:"flex items-center gap-3 p-4 hover:bg-muted/50 transition-colors",children:[u.jsx(Ed,{className:"h-4 w-4 text-muted-foreground cursor-move"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-lg",children:p.icon}),_?u.jsx(fe,{value:h.column_name,onChange:x=>i({...h,column_name:x.target.value}),className:"h-8 max-w-xs"}):u.jsx("span",{className:"font-medium",children:h.column_name}),h.is_required&&u.jsx(Fe,{variant:"destructive",className:"text-xs",children:"Обязательное"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[u.jsx("span",{children:p.label}),h.default_value&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"•"}),u.jsxs("span",{children:["По умолчанию: ",h.default_value]})]})]})]}),u.jsx("div",{className:"flex items-center gap-1",children:_?u.jsxs(u.Fragment,{children:[u.jsx(F,{size:"sm",variant:"ghost",onClick:()=>v(),children:u.jsx(ln,{className:"h-4 w-4"})}),u.jsx(F,{size:"sm",variant:"ghost",onClick:()=>i(null),children:u.jsx(nt,{className:"h-4 w-4"})})]}):u.jsxs(u.Fragment,{children:[u.jsx(F,{size:"sm",variant:"ghost",onClick:()=>i(h),children:u.jsx(gu,{className:"h-4 w-4"})}),u.jsx(F,{size:"sm",variant:"ghost",onClick:()=>f(h.id),className:"text-destructive hover:text-destructive",children:u.jsx(at,{className:"h-4 w-4"})})]})})]},h.id)})})})})]})]})})}function B(e){const r=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&r==="[object Date]"?new e.constructor(+e):typeof e=="number"||r==="[object Number]"||typeof e=="string"||r==="[object String]"?new Date(e):new Date(NaN)}function _e(e,r){return e instanceof Date?new e.constructor(r):new Date(r)}function le(e,r){const t=B(e);return isNaN(r)?_e(e,NaN):(r&&t.setDate(t.getDate()+r),t)}function Se(e,r){const t=B(e);if(isNaN(r))return _e(e,NaN);if(!r)return t;const n=t.getDate(),a=_e(e,t.getTime());a.setMonth(t.getMonth()+r+1,0);const s=a.getDate();return n>=s?a:(t.setFullYear(a.getFullYear(),a.getMonth(),n),t)}const xn=6048e5,yo=864e5;let xo={};function $r(){return xo}function je(e,r){var i,o,c,l;const t=$r(),n=(r==null?void 0:r.weekStartsOn)??((o=(i=r==null?void 0:r.locale)==null?void 0:i.options)==null?void 0:o.weekStartsOn)??t.weekStartsOn??((l=(c=t.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??0,a=B(e),s=a.getDay(),d=(s<n?7:0)+s-n;return a.setDate(a.getDate()-d),a.setHours(0,0,0,0),a}function er(e){return je(e,{weekStartsOn:1})}function fs(e){const r=B(e),t=r.getFullYear(),n=_e(e,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const a=er(n),s=_e(e,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const d=er(s);return r.getTime()>=a.getTime()?t+1:r.getTime()>=d.getTime()?t:t-1}function gr(e){const r=B(e);return r.setHours(0,0,0,0),r}function dt(e){const r=B(e),t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),+e-+t}function Le(e,r){const t=gr(e),n=gr(r),a=+t-dt(t),s=+n-dt(n);return Math.round((a-s)/yo)}function wo(e){const r=fs(e),t=_e(e,0);return t.setFullYear(r,0,4),t.setHours(0,0,0,0),er(t)}function en(e,r){const t=r*7;return le(e,t)}function _o(e,r){return Se(e,r*12)}function Co(e){let r;return e.forEach(function(t){const n=B(t);(r===void 0||r<n||isNaN(Number(n)))&&(r=n)}),r||new Date(NaN)}function No(e){let r;return e.forEach(t=>{const n=B(t);(!r||r>n||isNaN(+n))&&(r=n)}),r||new Date(NaN)}function pe(e,r){const t=gr(e),n=gr(r);return+t==+n}function wn(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function jo(e){if(!wn(e)&&typeof e!="number")return!1;const r=B(e);return!isNaN(Number(r))}function Dr(e,r){const t=B(e),n=B(r),a=t.getFullYear()-n.getFullYear(),s=t.getMonth()-n.getMonth();return a*12+s}function So(e,r,t){const n=je(e,t),a=je(r,t),s=+n-dt(n),d=+a-dt(a);return Math.round((s-d)/xn)}function _n(e){const r=B(e),t=r.getMonth();return r.setFullYear(r.getFullYear(),t+1,0),r.setHours(23,59,59,999),r}function ge(e){const r=B(e);return r.setDate(1),r.setHours(0,0,0,0),r}function ms(e){const r=B(e),t=_e(e,0);return t.setFullYear(r.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Cn(e,r){var i,o,c,l;const t=$r(),n=(r==null?void 0:r.weekStartsOn)??((o=(i=r==null?void 0:r.locale)==null?void 0:i.options)==null?void 0:o.weekStartsOn)??t.weekStartsOn??((l=(c=t.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??0,a=B(e),s=a.getDay(),d=(s<n?-7:0)+6-(s-n);return a.setDate(a.getDate()+d),a.setHours(23,59,59,999),a}function hs(e){return Cn(e,{weekStartsOn:1})}const ko={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Po=(e,r,t)=>{let n;const a=ko[e];return typeof a=="string"?n=a:r===1?n=a.one:n=a.other.replace("{{count}}",r.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function or(e){return(r={})=>{const t=r.width?String(r.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const Mo={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Eo={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ao={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ro={date:or({formats:Mo,defaultWidth:"full"}),time:or({formats:Eo,defaultWidth:"full"}),dateTime:or({formats:Ao,defaultWidth:"full"})},Do={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Oo=(e,r,t,n)=>Do[e];function Ee(e){return(r,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,i=t!=null&&t.width?String(t.width):d;a=e.formattingValues[i]||e.formattingValues[d]}else{const d=e.defaultWidth,i=t!=null&&t.width?String(t.width):e.defaultWidth;a=e.values[i]||e.values[d]}const s=e.argumentCallback?e.argumentCallback(r):r;return a[s]}}const To={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Lo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Fo={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Io={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$o={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Go=(e,r)=>{const t=Number(e),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Bo={ordinalNumber:Go,era:Ee({values:To,defaultWidth:"wide"}),quarter:Ee({values:Lo,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ee({values:Fo,defaultWidth:"wide"}),day:Ee({values:Io,defaultWidth:"wide"}),dayPeriod:Ee({values:$o,defaultWidth:"wide",formattingValues:Wo,defaultFormattingWidth:"wide"})};function Ae(e){return(r,t={})=>{const n=t.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=r.match(a);if(!s)return null;const d=s[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(i)?Vo(i,f=>f.test(d)):Uo(i,f=>f.test(d));let c;c=e.valueCallback?e.valueCallback(o):o,c=t.valueCallback?t.valueCallback(c):c;const l=r.slice(d.length);return{value:c,rest:l}}}function Uo(e,r){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&r(e[t]))return t}function Vo(e,r){for(let t=0;t<e.length;t++)if(r(e[t]))return t}function ps(e){return(r,t={})=>{const n=r.match(e.matchPattern);if(!n)return null;const a=n[0],s=r.match(e.parsePattern);if(!s)return null;let d=e.valueCallback?e.valueCallback(s[0]):s[0];d=t.valueCallback?t.valueCallback(d):d;const i=r.slice(a.length);return{value:d,rest:i}}}const qo=/^(\d+)(th|st|nd|rd)?/i,Ho=/\d+/i,Yo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zo={any:[/^b/i,/^(a|c)/i]},Ko={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qo={any:[/1/i,/2/i,/3/i,/4/i]},Xo={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jo={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ec={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rc={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tc={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nc={ordinalNumber:ps({matchPattern:qo,parsePattern:Ho,valueCallback:e=>parseInt(e,10)}),era:Ae({matchPatterns:Yo,defaultMatchWidth:"wide",parsePatterns:zo,defaultParseWidth:"any"}),quarter:Ae({matchPatterns:Ko,defaultMatchWidth:"wide",parsePatterns:Qo,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ae({matchPatterns:Xo,defaultMatchWidth:"wide",parsePatterns:Zo,defaultParseWidth:"any"}),day:Ae({matchPatterns:Jo,defaultMatchWidth:"wide",parsePatterns:ec,defaultParseWidth:"any"}),dayPeriod:Ae({matchPatterns:rc,defaultMatchWidth:"any",parsePatterns:tc,defaultParseWidth:"any"})},vs={code:"en-US",formatDistance:Po,formatLong:Ro,formatRelative:Oo,localize:Bo,match:nc,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ac(e){const r=B(e);return Le(r,ms(r))+1}function gs(e){const r=B(e),t=+er(r)-+wo(r);return Math.round(t/xn)+1}function bs(e,r){var l,f,v,m;const t=B(e),n=t.getFullYear(),a=$r(),s=(r==null?void 0:r.firstWeekContainsDate)??((f=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(v=a.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,d=_e(e,0);d.setFullYear(n+1,0,s),d.setHours(0,0,0,0);const i=je(d,r),o=_e(e,0);o.setFullYear(n,0,s),o.setHours(0,0,0,0);const c=je(o,r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function uc(e,r){var i,o,c,l;const t=$r(),n=(r==null?void 0:r.firstWeekContainsDate)??((o=(i=r==null?void 0:r.locale)==null?void 0:i.options)==null?void 0:o.firstWeekContainsDate)??t.firstWeekContainsDate??((l=(c=t.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??1,a=bs(e,r),s=_e(e,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),je(s,r)}function ys(e,r){const t=B(e),n=+je(t,r)-+uc(t,r);return Math.round(n/xn)+1}function H(e,r){const t=e<0?"-":"",n=Math.abs(e).toString().padStart(r,"0");return t+n}const qe={y(e,r){const t=e.getFullYear(),n=t>0?t:1-t;return H(r==="yy"?n%100:n,r.length)},M(e,r){const t=e.getMonth();return r==="M"?String(t+1):H(t+1,2)},d(e,r){return H(e.getDate(),r.length)},a(e,r){const t=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,r){return H(e.getHours()%12||12,r.length)},H(e,r){return H(e.getHours(),r.length)},m(e,r){return H(e.getMinutes(),r.length)},s(e,r){return H(e.getSeconds(),r.length)},S(e,r){const t=r.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,t-3));return H(a,r.length)}},ur={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sa={G:function(e,r,t){const n=e.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(e,r,t){if(r==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return t.ordinalNumber(a,{unit:"year"})}return qe.y(e,r)},Y:function(e,r,t,n){const a=bs(e,n),s=a>0?a:1-a;if(r==="YY"){const d=s%100;return H(d,2)}return r==="Yo"?t.ordinalNumber(s,{unit:"year"}):H(s,r.length)},R:function(e,r){const t=fs(e);return H(t,r.length)},u:function(e,r){const t=e.getFullYear();return H(t,r.length)},Q:function(e,r,t){const n=Math.ceil((e.getMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return H(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,r,t){const n=Math.ceil((e.getMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return H(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,r,t){const n=e.getMonth();switch(r){case"M":case"MM":return qe.M(e,r);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(e,r,t){const n=e.getMonth();switch(r){case"L":return String(n+1);case"LL":return H(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(e,r,t,n){const a=ys(e,n);return r==="wo"?t.ordinalNumber(a,{unit:"week"}):H(a,r.length)},I:function(e,r,t){const n=gs(e);return r==="Io"?t.ordinalNumber(n,{unit:"week"}):H(n,r.length)},d:function(e,r,t){return r==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):qe.d(e,r)},D:function(e,r,t){const n=ac(e);return r==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):H(n,r.length)},E:function(e,r,t){const n=e.getDay();switch(r){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(e,r,t,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return H(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(e,r,t,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return H(s,r.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(e,r,t){const n=e.getDay(),a=n===0?7:n;switch(r){case"i":return String(a);case"ii":return H(a,r.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(e,r,t){const a=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,r,t){const n=e.getHours();let a;switch(n===12?a=ur.noon:n===0?a=ur.midnight:a=n/12>=1?"pm":"am",r){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,r,t){const n=e.getHours();let a;switch(n>=17?a=ur.evening:n>=12?a=ur.afternoon:n>=4?a=ur.morning:a=ur.night,r){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,r,t){if(r==="ho"){let n=e.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return qe.h(e,r)},H:function(e,r,t){return r==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):qe.H(e,r)},K:function(e,r,t){const n=e.getHours()%12;return r==="Ko"?t.ordinalNumber(n,{unit:"hour"}):H(n,r.length)},k:function(e,r,t){let n=e.getHours();return n===0&&(n=24),r==="ko"?t.ordinalNumber(n,{unit:"hour"}):H(n,r.length)},m:function(e,r,t){return r==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):qe.m(e,r)},s:function(e,r,t){return r==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):qe.s(e,r)},S:function(e,r){return qe.S(e,r)},X:function(e,r,t){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(r){case"X":return ia(n);case"XXXX":case"XX":return Xe(n);case"XXXXX":case"XXX":default:return Xe(n,":")}},x:function(e,r,t){const n=e.getTimezoneOffset();switch(r){case"x":return ia(n);case"xxxx":case"xx":return Xe(n);case"xxxxx":case"xxx":default:return Xe(n,":")}},O:function(e,r,t){const n=e.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+da(n,":");case"OOOO":default:return"GMT"+Xe(n,":")}},z:function(e,r,t){const n=e.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+da(n,":");case"zzzz":default:return"GMT"+Xe(n,":")}},t:function(e,r,t){const n=Math.trunc(e.getTime()/1e3);return H(n,r.length)},T:function(e,r,t){const n=e.getTime();return H(n,r.length)}};function da(e,r=""){const t=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return s===0?t+String(a):t+String(a)+r+H(s,2)}function ia(e,r){return e%60===0?(e>0?"-":"+")+H(Math.abs(e)/60,2):Xe(e,r)}function Xe(e,r=""){const t=e>0?"-":"+",n=Math.abs(e),a=H(Math.trunc(n/60),2),s=H(n%60,2);return t+a+r+s}const oa=(e,r)=>{switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},xs=(e,r)=>{switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},sc=(e,r)=>{const t=e.match(/(P+)(p+)?/)||[],n=t[1],a=t[2];if(!a)return oa(e,r);let s;switch(n){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;case"PPPP":default:s=r.dateTime({width:"full"});break}return s.replace("{{date}}",oa(n,r)).replace("{{time}}",xs(a,r))},dc={p:xs,P:sc},ic=/^D+$/,oc=/^Y+$/,cc=["D","DD","YY","YYYY"];function lc(e){return ic.test(e)}function fc(e){return oc.test(e)}function mc(e,r,t){const n=hc(e,r,t);if(console.warn(n),cc.includes(e))throw new RangeError(n)}function hc(e,r,t){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${r}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const pc=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vc=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gc=/^'([^]*?)'?$/,bc=/''/g,yc=/[a-zA-Z]/;function ze(e,r,t){var l,f,v,m,h,b,p,_;const n=$r(),a=(t==null?void 0:t.locale)??n.locale??vs,s=(t==null?void 0:t.firstWeekContainsDate)??((f=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(v=n.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,d=(t==null?void 0:t.weekStartsOn)??((b=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:b.weekStartsOn)??n.weekStartsOn??((_=(p=n.locale)==null?void 0:p.options)==null?void 0:_.weekStartsOn)??0,i=B(e);if(!jo(i))throw new RangeError("Invalid time value");let o=r.match(vc).map(x=>{const y=x[0];if(y==="p"||y==="P"){const O=dc[y];return O(x,a.formatLong)}return x}).join("").match(pc).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const y=x[0];if(y==="'")return{isToken:!1,value:xc(x)};if(sa[y])return{isToken:!0,value:x};if(y.match(yc))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(o=a.localize.preprocessor(i,o));const c={firstWeekContainsDate:s,weekStartsOn:d,locale:a};return o.map(x=>{if(!x.isToken)return x.value;const y=x.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&fc(y)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&lc(y))&&mc(y,r,String(e));const O=sa[y[0]];return O(i,y,a.localize,c)}).join("")}function xc(e){const r=e.match(gc);return r?r[1].replace(bc,"'"):e}function wc(e){const r=B(e),t=r.getFullYear(),n=r.getMonth(),a=_e(e,0);return a.setFullYear(t,n+1,0),a.setHours(0,0,0,0),a.getDate()}function _c(e){return Math.trunc(+B(e)/1e3)}function Cc(e){const r=B(e),t=r.getMonth();return r.setFullYear(r.getFullYear(),t+1,0),r.setHours(0,0,0,0),r}function Nc(e,r){return So(Cc(e),ge(e),r)+1}function rn(e,r){const t=B(e),n=B(r);return t.getTime()>n.getTime()}function ws(e,r){const t=B(e),n=B(r);return+t<+n}function ca(e,r,t){const n=je(e,t),a=je(r,t);return+n==+a}function Nn(e,r){const t=B(e),n=B(r);return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()}function jc(e,r){const t=B(e),n=B(r);return t.getFullYear()===n.getFullYear()}function Tt(e,r){return le(e,-r)}function Lt(e,r){const t=B(e),n=t.getFullYear(),a=t.getDate(),s=_e(e,0);s.setFullYear(n,r,15),s.setHours(0,0,0,0);const d=wc(s);return t.setMonth(r,Math.min(a,d)),t}function la(e,r){const t=B(e);return isNaN(+t)?_e(e,NaN):(t.setFullYear(r),t)}function Nr(e,r){if(e.one!==void 0&&r===1)return e.one;const t=r%10,n=r%100;return t===1&&n!==11?e.singularNominative.replace("{{count}}",String(r)):t>=2&&t<=4&&(n<10||n>20)?e.singularGenitive.replace("{{count}}",String(r)):e.pluralGenitive.replace("{{count}}",String(r))}function ie(e){return(r,t)=>t!=null&&t.addSuffix?t.comparison&&t.comparison>0?e.future?Nr(e.future,r):"через "+Nr(e.regular,r):e.past?Nr(e.past,r):Nr(e.regular,r)+" назад":Nr(e.regular,r)}const Sc={lessThanXSeconds:ie({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:ie({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,r)=>r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:ie({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:ie({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:ie({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:ie({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:ie({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:ie({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:ie({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:ie({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:ie({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:ie({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:ie({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:ie({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:ie({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},kc=(e,r,t)=>Sc[e](r,t),Pc={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},Mc={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},Ec={any:"{{date}}, {{time}}"},Ac={date:or({formats:Pc,defaultWidth:"full"}),time:or({formats:Mc,defaultWidth:"full"}),dateTime:or({formats:Ec,defaultWidth:"any"})},jn=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function Rc(e){const r=jn[e];switch(e){case 0:return"'в прошлое "+r+" в' p";case 1:case 2:case 4:return"'в прошлый "+r+" в' p";case 3:case 5:case 6:return"'в прошлую "+r+" в' p"}}function fa(e){const r=jn[e];return e===2?"'во "+r+" в' p":"'в "+r+" в' p"}function Dc(e){const r=jn[e];switch(e){case 0:return"'в следующее "+r+" в' p";case 1:case 2:case 4:return"'в следующий "+r+" в' p";case 3:case 5:case 6:return"'в следующую "+r+" в' p"}}const Oc={lastWeek:(e,r,t)=>{const n=e.getDay();return ca(e,r,t)?fa(n):Rc(n)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,r,t)=>{const n=e.getDay();return ca(e,r,t)?fa(n):Dc(n)},other:"P"},Tc=(e,r,t,n)=>{const a=Oc[e];return typeof a=="function"?a(r,t,n):a},Lc={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},Fc={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},Ic={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},$c={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},Wc={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},Gc={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},Bc={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},Uc=(e,r)=>{const t=Number(e),n=r==null?void 0:r.unit;let a;return n==="date"?a="-е":n==="week"||n==="minute"||n==="second"?a="-я":a="-й",t+a},Vc={ordinalNumber:Uc,era:Ee({values:Lc,defaultWidth:"wide"}),quarter:Ee({values:Fc,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ee({values:Ic,defaultWidth:"wide",formattingValues:$c,defaultFormattingWidth:"wide"}),day:Ee({values:Wc,defaultWidth:"wide"}),dayPeriod:Ee({values:Gc,defaultWidth:"any",formattingValues:Bc,defaultFormattingWidth:"wide"})},qc=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,Hc=/\d+/i,Yc={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},zc={any:[/^д/i,/^н/i]},Kc={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},Qc={any:[/1/i,/2/i,/3/i,/4/i]},Xc={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},Zc={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},Jc={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},el={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},rl={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},tl={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},nl={ordinalNumber:ps({matchPattern:qc,parsePattern:Hc,valueCallback:e=>parseInt(e,10)}),era:Ae({matchPatterns:Yc,defaultMatchWidth:"wide",parsePatterns:zc,defaultParseWidth:"any"}),quarter:Ae({matchPatterns:Kc,defaultMatchWidth:"wide",parsePatterns:Qc,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ae({matchPatterns:Xc,defaultMatchWidth:"wide",parsePatterns:Zc,defaultParseWidth:"any"}),day:Ae({matchPatterns:Jc,defaultMatchWidth:"wide",parsePatterns:el,defaultParseWidth:"any"}),dayPeriod:Ae({matchPatterns:rl,defaultMatchWidth:"wide",parsePatterns:tl,defaultParseWidth:"any"})},al={code:"ru",formatDistance:kc,formatLong:Ac,formatRelative:Tc,localize:Vc,match:nl,options:{weekStartsOn:1,firstWeekContainsDate:1}};var D=function(){return D=Object.assign||function(r){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},D.apply(this,arguments)};function ul(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t}function _s(e,r,t){for(var n=0,a=r.length,s;n<a;n++)(s||!(n in r))&&(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return e.concat(s||Array.prototype.slice.call(r))}function Wr(e){return e.mode==="multiple"}function Gr(e){return e.mode==="range"}function xt(e){return e.mode==="single"}var sl={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function dl(e,r){return ze(e,"LLLL y",r)}function il(e,r){return ze(e,"d",r)}function ol(e,r){return ze(e,"LLLL",r)}function cl(e){return"".concat(e)}function ll(e,r){return ze(e,"cccccc",r)}function fl(e,r){return ze(e,"yyyy",r)}var ml=Object.freeze({__proto__:null,formatCaption:dl,formatDay:il,formatMonthCaption:ol,formatWeekNumber:cl,formatWeekdayName:ll,formatYearCaption:fl}),hl=function(e,r,t){return ze(e,"do MMMM (EEEE)",t)},pl=function(){return"Month: "},vl=function(){return"Go to next month"},gl=function(){return"Go to previous month"},bl=function(e,r){return ze(e,"cccc",r)},yl=function(e){return"Week n. ".concat(e)},xl=function(){return"Year: "},wl=Object.freeze({__proto__:null,labelDay:hl,labelMonthDropdown:pl,labelNext:vl,labelPrevious:gl,labelWeekNumber:yl,labelWeekday:bl,labelYearDropdown:xl});function _l(){var e="buttons",r=sl,t=vs,n={},a={},s=1,d={},i=new Date;return{captionLayout:e,classNames:r,formatters:ml,labels:wl,locale:t,modifiersClassNames:n,modifiers:a,numberOfMonths:s,styles:d,today:i,mode:"default"}}function Cl(e){var r=e.fromYear,t=e.toYear,n=e.fromMonth,a=e.toMonth,s=e.fromDate,d=e.toDate;return n?s=ge(n):r&&(s=new Date(r,0,1)),a?d=_n(a):t&&(d=new Date(t,11,31)),{fromDate:s?gr(s):void 0,toDate:d?gr(d):void 0}}var Cs=g.createContext(void 0);function Nl(e){var r,t=e.initialProps,n=_l(),a=Cl(t),s=a.fromDate,d=a.toDate,i=(r=t.captionLayout)!==null&&r!==void 0?r:n.captionLayout;i!=="buttons"&&(!s||!d)&&(i="buttons");var o;(xt(t)||Wr(t)||Gr(t))&&(o=t.onSelect);var c=D(D(D({},n),t),{captionLayout:i,classNames:D(D({},n.classNames),t.classNames),components:D({},t.components),formatters:D(D({},n.formatters),t.formatters),fromDate:s,labels:D(D({},n.labels),t.labels),mode:t.mode||n.mode,modifiers:D(D({},n.modifiers),t.modifiers),modifiersClassNames:D(D({},n.modifiersClassNames),t.modifiersClassNames),onSelect:o,styles:D(D({},n.styles),t.styles),toDate:d});return u.jsx(Cs.Provider,{value:c,children:e.children})}function K(){var e=g.useContext(Cs);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Ns(e){var r=K(),t=r.locale,n=r.classNames,a=r.styles,s=r.formatters.formatCaption;return u.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:t})})}function jl(e){return u.jsx("svg",D({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:u.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function js(e){var r,t,n=e.onChange,a=e.value,s=e.children,d=e.caption,i=e.className,o=e.style,c=K(),l=(t=(r=c.components)===null||r===void 0?void 0:r.IconDropdown)!==null&&t!==void 0?t:jl;return u.jsxs("div",{className:i,style:o,children:[u.jsx("span",{className:c.classNames.vhidden,children:e["aria-label"]}),u.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:a,onChange:n,children:s}),u.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[d,u.jsx(l,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function Sl(e){var r,t=K(),n=t.fromDate,a=t.toDate,s=t.styles,d=t.locale,i=t.formatters.formatMonthCaption,o=t.classNames,c=t.components,l=t.labels.labelMonthDropdown;if(!n)return u.jsx(u.Fragment,{});if(!a)return u.jsx(u.Fragment,{});var f=[];if(jc(n,a))for(var v=ge(n),m=n.getMonth();m<=a.getMonth();m++)f.push(Lt(v,m));else for(var v=ge(new Date),m=0;m<=11;m++)f.push(Lt(v,m));var h=function(p){var _=Number(p.target.value),x=Lt(ge(e.displayMonth),_);e.onChange(x)},b=(r=c==null?void 0:c.Dropdown)!==null&&r!==void 0?r:js;return u.jsx(b,{name:"months","aria-label":l(),className:o.dropdown_month,style:s.dropdown_month,onChange:h,value:e.displayMonth.getMonth(),caption:i(e.displayMonth,{locale:d}),children:f.map(function(p){return u.jsx("option",{value:p.getMonth(),children:i(p,{locale:d})},p.getMonth())})})}function kl(e){var r,t=e.displayMonth,n=K(),a=n.fromDate,s=n.toDate,d=n.locale,i=n.styles,o=n.classNames,c=n.components,l=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,v=[];if(!a)return u.jsx(u.Fragment,{});if(!s)return u.jsx(u.Fragment,{});for(var m=a.getFullYear(),h=s.getFullYear(),b=m;b<=h;b++)v.push(la(ms(new Date),b));var p=function(x){var y=la(ge(t),Number(x.target.value));e.onChange(y)},_=(r=c==null?void 0:c.Dropdown)!==null&&r!==void 0?r:js;return u.jsx(_,{name:"years","aria-label":f(),className:o.dropdown_year,style:i.dropdown_year,onChange:p,value:t.getFullYear(),caption:l(t,{locale:d}),children:v.map(function(x){return u.jsx("option",{value:x.getFullYear(),children:l(x,{locale:d})},x.getFullYear())})})}function Pl(e,r){var t=g.useState(e),n=t[0],a=t[1],s=r===void 0?n:r;return[s,a]}function Ml(e){var r=e.month,t=e.defaultMonth,n=e.today,a=r||t||n||new Date,s=e.toDate,d=e.fromDate,i=e.numberOfMonths,o=i===void 0?1:i;if(s&&Dr(s,a)<0){var c=-1*(o-1);a=Se(s,c)}return d&&Dr(a,d)<0&&(a=d),ge(a)}function El(){var e=K(),r=Ml(e),t=Pl(r,e.month),n=t[0],a=t[1],s=function(d){var i;if(!e.disableNavigation){var o=ge(d);a(o),(i=e.onMonthChange)===null||i===void 0||i.call(e,o)}};return[n,s]}function Al(e,r){for(var t=r.reverseMonths,n=r.numberOfMonths,a=ge(e),s=ge(Se(a,n)),d=Dr(s,a),i=[],o=0;o<d;o++){var c=Se(a,o);i.push(c)}return t&&(i=i.reverse()),i}function Rl(e,r){if(!r.disableNavigation){var t=r.toDate,n=r.pagedNavigation,a=r.numberOfMonths,s=a===void 0?1:a,d=n?s:1,i=ge(e);if(!t)return Se(i,d);var o=Dr(t,e);if(!(o<s))return Se(i,d)}}function Dl(e,r){if(!r.disableNavigation){var t=r.fromDate,n=r.pagedNavigation,a=r.numberOfMonths,s=a===void 0?1:a,d=n?s:1,i=ge(e);if(!t)return Se(i,-d);var o=Dr(i,t);if(!(o<=0))return Se(i,-d)}}var Ss=g.createContext(void 0);function Ol(e){var r=K(),t=El(),n=t[0],a=t[1],s=Al(n,r),d=Rl(n,r),i=Dl(n,r),o=function(f){return s.some(function(v){return Nn(f,v)})},c=function(f,v){o(f)||(v&&ws(f,v)?a(Se(f,1+r.numberOfMonths*-1)):a(f))},l={currentMonth:n,displayMonths:s,goToMonth:a,goToDate:c,previousMonth:i,nextMonth:d,isDateDisplayed:o};return u.jsx(Ss.Provider,{value:l,children:e.children})}function Br(){var e=g.useContext(Ss);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function ma(e){var r,t=K(),n=t.classNames,a=t.styles,s=t.components,d=Br().goToMonth,i=function(l){d(Se(l,e.displayIndex?-e.displayIndex:0))},o=(r=s==null?void 0:s.CaptionLabel)!==null&&r!==void 0?r:Ns,c=u.jsx(o,{id:e.id,displayMonth:e.displayMonth});return u.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[u.jsx("div",{className:n.vhidden,children:c}),u.jsx(Sl,{onChange:i,displayMonth:e.displayMonth}),u.jsx(kl,{onChange:i,displayMonth:e.displayMonth})]})}function Tl(e){return u.jsx("svg",D({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:u.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Ll(e){return u.jsx("svg",D({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:u.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var it=g.forwardRef(function(e,r){var t=K(),n=t.classNames,a=t.styles,s=[n.button_reset,n.button];e.className&&s.push(e.className);var d=s.join(" "),i=D(D({},a.button_reset),a.button);return e.style&&Object.assign(i,e.style),u.jsx("button",D({},e,{ref:r,type:"button",className:d,style:i}))});function Fl(e){var r,t,n=K(),a=n.dir,s=n.locale,d=n.classNames,i=n.styles,o=n.labels,c=o.labelPrevious,l=o.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return u.jsx(u.Fragment,{});var v=c(e.previousMonth,{locale:s}),m=[d.nav_button,d.nav_button_previous].join(" "),h=l(e.nextMonth,{locale:s}),b=[d.nav_button,d.nav_button_next].join(" "),p=(r=f==null?void 0:f.IconRight)!==null&&r!==void 0?r:Ll,_=(t=f==null?void 0:f.IconLeft)!==null&&t!==void 0?t:Tl;return u.jsxs("div",{className:d.nav,style:i.nav,children:[!e.hidePrevious&&u.jsx(it,{name:"previous-month","aria-label":v,className:m,style:i.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?u.jsx(p,{className:d.nav_icon,style:i.nav_icon}):u.jsx(_,{className:d.nav_icon,style:i.nav_icon})}),!e.hideNext&&u.jsx(it,{name:"next-month","aria-label":h,className:b,style:i.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?u.jsx(_,{className:d.nav_icon,style:i.nav_icon}):u.jsx(p,{className:d.nav_icon,style:i.nav_icon})})]})}function ha(e){var r=K().numberOfMonths,t=Br(),n=t.previousMonth,a=t.nextMonth,s=t.goToMonth,d=t.displayMonths,i=d.findIndex(function(h){return Nn(e.displayMonth,h)}),o=i===0,c=i===d.length-1,l=r>1&&(o||!c),f=r>1&&(c||!o),v=function(){n&&s(n)},m=function(){a&&s(a)};return u.jsx(Fl,{displayMonth:e.displayMonth,hideNext:l,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:v,onNextClick:m})}function Il(e){var r,t=K(),n=t.classNames,a=t.disableNavigation,s=t.styles,d=t.captionLayout,i=t.components,o=(r=i==null?void 0:i.CaptionLabel)!==null&&r!==void 0?r:Ns,c;return a?c=u.jsx(o,{id:e.id,displayMonth:e.displayMonth}):d==="dropdown"?c=u.jsx(ma,{displayMonth:e.displayMonth,id:e.id}):d==="dropdown-buttons"?c=u.jsxs(u.Fragment,{children:[u.jsx(ma,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),u.jsx(ha,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):c=u.jsxs(u.Fragment,{children:[u.jsx(o,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),u.jsx(ha,{displayMonth:e.displayMonth,id:e.id})]}),u.jsx("div",{className:n.caption,style:s.caption,children:c})}function $l(e){var r=K(),t=r.footer,n=r.styles,a=r.classNames.tfoot;return t?u.jsx("tfoot",{className:a,style:n.tfoot,children:u.jsx("tr",{children:u.jsx("td",{colSpan:8,children:t})})}):u.jsx(u.Fragment,{})}function Wl(e,r,t){for(var n=t?er(new Date):je(new Date,{locale:e,weekStartsOn:r}),a=[],s=0;s<7;s++){var d=le(n,s);a.push(d)}return a}function Gl(){var e=K(),r=e.classNames,t=e.styles,n=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,d=e.ISOWeek,i=e.formatters.formatWeekdayName,o=e.labels.labelWeekday,c=Wl(a,s,d);return u.jsxs("tr",{style:t.head_row,className:r.head_row,children:[n&&u.jsx("td",{style:t.head_cell,className:r.head_cell}),c.map(function(l,f){return u.jsx("th",{scope:"col",className:r.head_cell,style:t.head_cell,"aria-label":o(l,{locale:a}),children:i(l,{locale:a})},f)})]})}function Bl(){var e,r=K(),t=r.classNames,n=r.styles,a=r.components,s=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:Gl;return u.jsx("thead",{style:n.head,className:t.head,children:u.jsx(s,{})})}function Ul(e){var r=K(),t=r.locale,n=r.formatters.formatDay;return u.jsx(u.Fragment,{children:n(e.date,{locale:t})})}var Sn=g.createContext(void 0);function Vl(e){if(!Wr(e.initialProps)){var r={selected:void 0,modifiers:{disabled:[]}};return u.jsx(Sn.Provider,{value:r,children:e.children})}return u.jsx(ql,{initialProps:e.initialProps,children:e.children})}function ql(e){var r=e.initialProps,t=e.children,n=r.selected,a=r.min,s=r.max,d=function(c,l,f){var v,m;(v=r.onDayClick)===null||v===void 0||v.call(r,c,l,f);var h=!!(l.selected&&a&&(n==null?void 0:n.length)===a);if(!h){var b=!!(!l.selected&&s&&(n==null?void 0:n.length)===s);if(!b){var p=n?_s([],n):[];if(l.selected){var _=p.findIndex(function(x){return pe(c,x)});p.splice(_,1)}else p.push(c);(m=r.onSelect)===null||m===void 0||m.call(r,p,c,l,f)}}},i={disabled:[]};n&&i.disabled.push(function(c){var l=s&&n.length>s-1,f=n.some(function(v){return pe(v,c)});return!!(l&&!f)});var o={selected:n,onDayClick:d,modifiers:i};return u.jsx(Sn.Provider,{value:o,children:t})}function kn(){var e=g.useContext(Sn);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Hl(e,r){var t=r||{},n=t.from,a=t.to;return n&&a?pe(a,e)&&pe(n,e)?void 0:pe(a,e)?{from:a,to:void 0}:pe(n,e)?void 0:rn(n,e)?{from:e,to:a}:{from:n,to:e}:a?rn(e,a)?{from:a,to:e}:{from:e,to:a}:n?ws(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var Pn=g.createContext(void 0);function Yl(e){if(!Gr(e.initialProps)){var r={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return u.jsx(Pn.Provider,{value:r,children:e.children})}return u.jsx(zl,{initialProps:e.initialProps,children:e.children})}function zl(e){var r=e.initialProps,t=e.children,n=r.selected,a=n||{},s=a.from,d=a.to,i=r.min,o=r.max,c=function(m,h,b){var p,_;(p=r.onDayClick)===null||p===void 0||p.call(r,m,h,b);var x=Hl(m,n);(_=r.onSelect)===null||_===void 0||_.call(r,x,m,h,b)},l={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(l.range_start=[s],d?(l.range_end=[d],pe(s,d)||(l.range_middle=[{after:s,before:d}])):l.range_end=[s]):d&&(l.range_start=[d],l.range_end=[d]),i&&(s&&!d&&l.disabled.push({after:Tt(s,i-1),before:le(s,i-1)}),s&&d&&l.disabled.push({after:s,before:le(s,i-1)}),!s&&d&&l.disabled.push({after:Tt(d,i-1),before:le(d,i-1)})),o){if(s&&!d&&(l.disabled.push({before:le(s,-o+1)}),l.disabled.push({after:le(s,o-1)})),s&&d){var f=Le(d,s)+1,v=o-f;l.disabled.push({before:Tt(s,v)}),l.disabled.push({after:le(d,v)})}!s&&d&&(l.disabled.push({before:le(d,-o+1)}),l.disabled.push({after:le(d,o-1)}))}return u.jsx(Pn.Provider,{value:{selected:n,onDayClick:c,modifiers:l},children:t})}function Mn(){var e=g.useContext(Pn);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function et(e){return Array.isArray(e)?_s([],e):e!==void 0?[e]:[]}function Kl(e){var r={};return Object.entries(e).forEach(function(t){var n=t[0],a=t[1];r[n]=et(a)}),r}var ke;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ke||(ke={}));var Ql=ke.Selected,$e=ke.Disabled,Xl=ke.Hidden,Zl=ke.Today,Ft=ke.RangeEnd,It=ke.RangeMiddle,$t=ke.RangeStart,Jl=ke.Outside;function ef(e,r,t){var n,a=(n={},n[Ql]=et(e.selected),n[$e]=et(e.disabled),n[Xl]=et(e.hidden),n[Zl]=[e.today],n[Ft]=[],n[It]=[],n[$t]=[],n[Jl]=[],n);return e.fromDate&&a[$e].push({before:e.fromDate}),e.toDate&&a[$e].push({after:e.toDate}),Wr(e)?a[$e]=a[$e].concat(r.modifiers[$e]):Gr(e)&&(a[$e]=a[$e].concat(t.modifiers[$e]),a[$t]=t.modifiers[$t],a[It]=t.modifiers[It],a[Ft]=t.modifiers[Ft]),a}var ks=g.createContext(void 0);function rf(e){var r=K(),t=kn(),n=Mn(),a=ef(r,t,n),s=Kl(r.modifiers),d=D(D({},a),s);return u.jsx(ks.Provider,{value:d,children:e.children})}function Ps(){var e=g.useContext(ks);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function tf(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function nf(e){return!!(e&&typeof e=="object"&&"from"in e)}function af(e){return!!(e&&typeof e=="object"&&"after"in e)}function uf(e){return!!(e&&typeof e=="object"&&"before"in e)}function sf(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function df(e,r){var t,n=r.from,a=r.to;if(n&&a){var s=Le(a,n)<0;s&&(t=[a,n],n=t[0],a=t[1]);var d=Le(e,n)>=0&&Le(a,e)>=0;return d}return a?pe(a,e):n?pe(n,e):!1}function of(e){return wn(e)}function cf(e){return Array.isArray(e)&&e.every(wn)}function lf(e,r){return r.some(function(t){if(typeof t=="boolean")return t;if(of(t))return pe(e,t);if(cf(t))return t.includes(e);if(nf(t))return df(e,t);if(sf(t))return t.dayOfWeek.includes(e.getDay());if(tf(t)){var n=Le(t.before,e),a=Le(t.after,e),s=n>0,d=a<0,i=rn(t.before,t.after);return i?d&&s:s||d}return af(t)?Le(e,t.after)>0:uf(t)?Le(t.before,e)>0:typeof t=="function"?t(e):!1})}function En(e,r,t){var n=Object.keys(r).reduce(function(s,d){var i=r[d];return lf(e,i)&&s.push(d),s},[]),a={};return n.forEach(function(s){return a[s]=!0}),t&&!Nn(e,t)&&(a.outside=!0),a}function ff(e,r){for(var t=ge(e[0]),n=_n(e[e.length-1]),a,s,d=t;d<=n;){var i=En(d,r),o=!i.disabled&&!i.hidden;if(!o){d=le(d,1);continue}if(i.selected)return d;i.today&&!s&&(s=d),a||(a=d),d=le(d,1)}return s||a}var mf=365;function Ms(e,r){var t=r.moveBy,n=r.direction,a=r.context,s=r.modifiers,d=r.retry,i=d===void 0?{count:0,lastFocused:e}:d,o=a.weekStartsOn,c=a.fromDate,l=a.toDate,f=a.locale,v={day:le,week:en,month:Se,year:_o,startOfWeek:function(p){return a.ISOWeek?er(p):je(p,{locale:f,weekStartsOn:o})},endOfWeek:function(p){return a.ISOWeek?hs(p):Cn(p,{locale:f,weekStartsOn:o})}},m=v[t](e,n==="after"?1:-1);n==="before"&&c?m=Co([c,m]):n==="after"&&l&&(m=No([l,m]));var h=!0;if(s){var b=En(m,s);h=!b.disabled&&!b.hidden}return h?m:i.count>mf?i.lastFocused:Ms(m,{moveBy:t,direction:n,context:a,modifiers:s,retry:D(D({},i),{count:i.count+1})})}var Es=g.createContext(void 0);function hf(e){var r=Br(),t=Ps(),n=g.useState(),a=n[0],s=n[1],d=g.useState(),i=d[0],o=d[1],c=ff(r.displayMonths,t),l=a??(i&&r.isDateDisplayed(i))?i:c,f=function(){o(a),s(void 0)},v=function(p){s(p)},m=K(),h=function(p,_){if(a){var x=Ms(a,{moveBy:p,direction:_,context:m,modifiers:t});pe(a,x)||(r.goToDate(x,a),v(x))}},b={focusedDay:a,focusTarget:l,blur:f,focus:v,focusDayAfter:function(){return h("day","after")},focusDayBefore:function(){return h("day","before")},focusWeekAfter:function(){return h("week","after")},focusWeekBefore:function(){return h("week","before")},focusMonthBefore:function(){return h("month","before")},focusMonthAfter:function(){return h("month","after")},focusYearBefore:function(){return h("year","before")},focusYearAfter:function(){return h("year","after")},focusStartOfWeek:function(){return h("startOfWeek","before")},focusEndOfWeek:function(){return h("endOfWeek","after")}};return u.jsx(Es.Provider,{value:b,children:e.children})}function An(){var e=g.useContext(Es);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function pf(e,r){var t=Ps(),n=En(e,t,r);return n}var Rn=g.createContext(void 0);function vf(e){if(!xt(e.initialProps)){var r={selected:void 0};return u.jsx(Rn.Provider,{value:r,children:e.children})}return u.jsx(gf,{initialProps:e.initialProps,children:e.children})}function gf(e){var r=e.initialProps,t=e.children,n=function(s,d,i){var o,c,l;if((o=r.onDayClick)===null||o===void 0||o.call(r,s,d,i),d.selected&&!r.required){(c=r.onSelect)===null||c===void 0||c.call(r,void 0,s,d,i);return}(l=r.onSelect)===null||l===void 0||l.call(r,s,s,d,i)},a={selected:r.selected,onDayClick:n};return u.jsx(Rn.Provider,{value:a,children:t})}function As(){var e=g.useContext(Rn);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function bf(e,r){var t=K(),n=As(),a=kn(),s=Mn(),d=An(),i=d.focusDayAfter,o=d.focusDayBefore,c=d.focusWeekAfter,l=d.focusWeekBefore,f=d.blur,v=d.focus,m=d.focusMonthBefore,h=d.focusMonthAfter,b=d.focusYearBefore,p=d.focusYearAfter,_=d.focusStartOfWeek,x=d.focusEndOfWeek,y=function(E){var N,A,V,T;xt(t)?(N=n.onDayClick)===null||N===void 0||N.call(n,e,r,E):Wr(t)?(A=a.onDayClick)===null||A===void 0||A.call(a,e,r,E):Gr(t)?(V=s.onDayClick)===null||V===void 0||V.call(s,e,r,E):(T=t.onDayClick)===null||T===void 0||T.call(t,e,r,E)},O=function(E){var N;v(e),(N=t.onDayFocus)===null||N===void 0||N.call(t,e,r,E)},$=function(E){var N;f(),(N=t.onDayBlur)===null||N===void 0||N.call(t,e,r,E)},G=function(E){var N;(N=t.onDayMouseEnter)===null||N===void 0||N.call(t,e,r,E)},U=function(E){var N;(N=t.onDayMouseLeave)===null||N===void 0||N.call(t,e,r,E)},I=function(E){var N;(N=t.onDayPointerEnter)===null||N===void 0||N.call(t,e,r,E)},Q=function(E){var N;(N=t.onDayPointerLeave)===null||N===void 0||N.call(t,e,r,E)},Y=function(E){var N;(N=t.onDayTouchCancel)===null||N===void 0||N.call(t,e,r,E)},ne=function(E){var N;(N=t.onDayTouchEnd)===null||N===void 0||N.call(t,e,r,E)},se=function(E){var N;(N=t.onDayTouchMove)===null||N===void 0||N.call(t,e,r,E)},ue=function(E){var N;(N=t.onDayTouchStart)===null||N===void 0||N.call(t,e,r,E)},ae=function(E){var N;(N=t.onDayKeyUp)===null||N===void 0||N.call(t,e,r,E)},de=function(E){var N;switch(E.key){case"ArrowLeft":E.preventDefault(),E.stopPropagation(),t.dir==="rtl"?i():o();break;case"ArrowRight":E.preventDefault(),E.stopPropagation(),t.dir==="rtl"?o():i();break;case"ArrowDown":E.preventDefault(),E.stopPropagation(),c();break;case"ArrowUp":E.preventDefault(),E.stopPropagation(),l();break;case"PageUp":E.preventDefault(),E.stopPropagation(),E.shiftKey?b():m();break;case"PageDown":E.preventDefault(),E.stopPropagation(),E.shiftKey?p():h();break;case"Home":E.preventDefault(),E.stopPropagation(),_();break;case"End":E.preventDefault(),E.stopPropagation(),x();break}(N=t.onDayKeyDown)===null||N===void 0||N.call(t,e,r,E)},he={onClick:y,onFocus:O,onBlur:$,onKeyDown:de,onKeyUp:ae,onMouseEnter:G,onMouseLeave:U,onPointerEnter:I,onPointerLeave:Q,onTouchCancel:Y,onTouchEnd:ne,onTouchMove:se,onTouchStart:ue};return he}function yf(){var e=K(),r=As(),t=kn(),n=Mn(),a=xt(e)?r.selected:Wr(e)?t.selected:Gr(e)?n.selected:void 0;return a}function xf(e){return Object.values(ke).includes(e)}function wf(e,r){var t=[e.classNames.day];return Object.keys(r).forEach(function(n){var a=e.modifiersClassNames[n];if(a)t.push(a);else if(xf(n)){var s=e.classNames["day_".concat(n)];s&&t.push(s)}}),t}function _f(e,r){var t=D({},e.styles.day);return Object.keys(r).forEach(function(n){var a;t=D(D({},t),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),t}function Cf(e,r,t){var n,a,s,d=K(),i=An(),o=pf(e,r),c=bf(e,o),l=yf(),f=!!(d.onDayClick||d.mode!=="default");g.useEffect(function(){var G;o.outside||i.focusedDay&&f&&pe(i.focusedDay,e)&&((G=t.current)===null||G===void 0||G.focus())},[i.focusedDay,e,t,f,o.outside]);var v=wf(d,o).join(" "),m=_f(d,o),h=!!(o.outside&&!d.showOutsideDays||o.hidden),b=(s=(a=d.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:Ul,p=u.jsx(b,{date:e,displayMonth:r,activeModifiers:o}),_={style:m,className:v,children:p,role:"gridcell"},x=i.focusTarget&&pe(i.focusTarget,e)&&!o.outside,y=i.focusedDay&&pe(i.focusedDay,e),O=D(D(D({},_),(n={disabled:o.disabled,role:"gridcell"},n["aria-selected"]=o.selected,n.tabIndex=y||x?0:-1,n)),c),$={isButton:f,isHidden:h,activeModifiers:o,selectedDays:l,buttonProps:O,divProps:_};return $}function Nf(e){var r=g.useRef(null),t=Cf(e.date,e.displayMonth,r);return t.isHidden?u.jsx("div",{role:"gridcell"}):t.isButton?u.jsx(it,D({name:"day",ref:r},t.buttonProps)):u.jsx("div",D({},t.divProps))}function jf(e){var r=e.number,t=e.dates,n=K(),a=n.onWeekNumberClick,s=n.styles,d=n.classNames,i=n.locale,o=n.labels.labelWeekNumber,c=n.formatters.formatWeekNumber,l=c(Number(r),{locale:i});if(!a)return u.jsx("span",{className:d.weeknumber,style:s.weeknumber,children:l});var f=o(Number(r),{locale:i}),v=function(m){a(r,t,m)};return u.jsx(it,{name:"week-number","aria-label":f,className:d.weeknumber,style:s.weeknumber,onClick:v,children:l})}function Sf(e){var r,t,n=K(),a=n.styles,s=n.classNames,d=n.showWeekNumber,i=n.components,o=(r=i==null?void 0:i.Day)!==null&&r!==void 0?r:Nf,c=(t=i==null?void 0:i.WeekNumber)!==null&&t!==void 0?t:jf,l;return d&&(l=u.jsx("td",{className:s.cell,style:a.cell,children:u.jsx(c,{number:e.weekNumber,dates:e.dates})})),u.jsxs("tr",{className:s.row,style:a.row,children:[l,e.dates.map(function(f){return u.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:u.jsx(o,{displayMonth:e.displayMonth,date:f})},_c(f))})]})}function pa(e,r,t){for(var n=t!=null&&t.ISOWeek?hs(r):Cn(r,t),a=t!=null&&t.ISOWeek?er(e):je(e,t),s=Le(n,a),d=[],i=0;i<=s;i++)d.push(le(a,i));var o=d.reduce(function(c,l){var f=t!=null&&t.ISOWeek?gs(l):ys(l,t),v=c.find(function(m){return m.weekNumber===f});return v?(v.dates.push(l),c):(c.push({weekNumber:f,dates:[l]}),c)},[]);return o}function kf(e,r){var t=pa(ge(e),_n(e),r);if(r!=null&&r.useFixedWeeks){var n=Nc(e,r);if(n<6){var a=t[t.length-1],s=a.dates[a.dates.length-1],d=en(s,6-n),i=pa(en(s,1),d,r);t.push.apply(t,i)}}return t}function Pf(e){var r,t,n,a=K(),s=a.locale,d=a.classNames,i=a.styles,o=a.hideHead,c=a.fixedWeeks,l=a.components,f=a.weekStartsOn,v=a.firstWeekContainsDate,m=a.ISOWeek,h=kf(e.displayMonth,{useFixedWeeks:!!c,ISOWeek:m,locale:s,weekStartsOn:f,firstWeekContainsDate:v}),b=(r=l==null?void 0:l.Head)!==null&&r!==void 0?r:Bl,p=(t=l==null?void 0:l.Row)!==null&&t!==void 0?t:Sf,_=(n=l==null?void 0:l.Footer)!==null&&n!==void 0?n:$l;return u.jsxs("table",{id:e.id,className:d.table,style:i.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!o&&u.jsx(b,{}),u.jsx("tbody",{className:d.tbody,style:i.tbody,children:h.map(function(x){return u.jsx(p,{displayMonth:e.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),u.jsx(_,{displayMonth:e.displayMonth})]})}function Mf(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Ef=Mf()?g.useLayoutEffect:g.useEffect,Wt=!1,Af=0;function va(){return"react-day-picker-".concat(++Af)}function Rf(e){var r,t=e??(Wt?va():null),n=g.useState(t),a=n[0],s=n[1];return Ef(function(){a===null&&s(va())},[]),g.useEffect(function(){Wt===!1&&(Wt=!0)},[]),(r=e??a)!==null&&r!==void 0?r:void 0}function Df(e){var r,t,n=K(),a=n.dir,s=n.classNames,d=n.styles,i=n.components,o=Br().displayMonths,c=Rf(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),l=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[s.month],v=d.month,m=e.displayIndex===0,h=e.displayIndex===o.length-1,b=!m&&!h;a==="rtl"&&(r=[m,h],h=r[0],m=r[1]),m&&(f.push(s.caption_start),v=D(D({},v),d.caption_start)),h&&(f.push(s.caption_end),v=D(D({},v),d.caption_end)),b&&(f.push(s.caption_between),v=D(D({},v),d.caption_between));var p=(t=i==null?void 0:i.Caption)!==null&&t!==void 0?t:Il;return u.jsxs("div",{className:f.join(" "),style:v,children:[u.jsx(p,{id:c,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),u.jsx(Pf,{id:l,"aria-labelledby":c,displayMonth:e.displayMonth})]},e.displayIndex)}function Of(e){var r=K(),t=r.classNames,n=r.styles;return u.jsx("div",{className:t.months,style:n.months,children:e.children})}function Tf(e){var r,t,n=e.initialProps,a=K(),s=An(),d=Br(),i=g.useState(!1),o=i[0],c=i[1];g.useEffect(function(){a.initialFocus&&s.focusTarget&&(o||(s.focus(s.focusTarget),c(!0)))},[a.initialFocus,o,s.focus,s.focusTarget,s]);var l=[a.classNames.root,a.className];a.numberOfMonths>1&&l.push(a.classNames.multiple_months),a.showWeekNumber&&l.push(a.classNames.with_weeknumber);var f=D(D({},a.styles.root),a.style),v=Object.keys(n).filter(function(h){return h.startsWith("data-")}).reduce(function(h,b){var p;return D(D({},h),(p={},p[b]=n[b],p))},{}),m=(t=(r=n.components)===null||r===void 0?void 0:r.Months)!==null&&t!==void 0?t:Of;return u.jsx("div",D({className:l.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},v,{children:u.jsx(m,{children:d.displayMonths.map(function(h,b){return u.jsx(Df,{displayIndex:b,displayMonth:h},b)})})}))}function Lf(e){var r=e.children,t=ul(e,["children"]);return u.jsx(Nl,{initialProps:t,children:u.jsx(Ol,{children:u.jsx(vf,{initialProps:t,children:u.jsx(Vl,{initialProps:t,children:u.jsx(Yl,{initialProps:t,children:u.jsx(rf,{children:u.jsx(hf,{children:r})})})})})})})}function Ff(e){return u.jsx(Lf,D({},e,{children:u.jsx(Tf,{initialProps:e})}))}function Rs({className:e,classNames:r,showOutsideDays:t=!0,...n}){return u.jsx(Ff,{showOutsideDays:t,className:Ce("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ce(Qn({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ce(Qn({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:({...a})=>u.jsx(Ud,{className:"h-4 w-4"}),IconRight:({...a})=>u.jsx(vu,{className:"h-4 w-4"})},...n})}Rs.displayName="Calendar";var wt="Popover",[Ds,$h]=on(wt,[vt]),Ur=vt(),[If,Ke]=Ds(wt),Os=e=>{const{__scopePopover:r,children:t,open:n,defaultOpen:a,onOpenChange:s,modal:d=!1}=e,i=Ur(r),o=g.useRef(null),[c,l]=g.useState(!1),[f,v]=cu({prop:n,defaultProp:a??!1,onChange:s,caller:wt});return u.jsx(du,{...i,children:u.jsx(If,{scope:r,contentId:zt(),triggerRef:o,open:f,onOpenChange:v,onOpenToggle:g.useCallback(()=>v(m=>!m),[v]),hasCustomAnchor:c,onCustomAnchorAdd:g.useCallback(()=>l(!0),[]),onCustomAnchorRemove:g.useCallback(()=>l(!1),[]),modal:d,children:t})})};Os.displayName=wt;var Ts="PopoverAnchor",$f=g.forwardRef((e,r)=>{const{__scopePopover:t,...n}=e,a=Ke(Ts,t),s=Ur(t),{onCustomAnchorAdd:d,onCustomAnchorRemove:i}=a;return g.useEffect(()=>(d(),()=>i()),[d,i]),u.jsx(cn,{...s,...n,ref:r})});$f.displayName=Ts;var Ls="PopoverTrigger",Fs=g.forwardRef((e,r)=>{const{__scopePopover:t,...n}=e,a=Ke(Ls,t),s=Ur(t),d=tr(r,a.triggerRef),i=u.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Bs(a.open),...n,ref:d,onClick:q(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?i:u.jsx(cn,{asChild:!0,...s,children:i})});Fs.displayName=Ls;var Dn="PopoverPortal",[Wf,Gf]=Ds(Dn,{forceMount:void 0}),Is=e=>{const{__scopePopover:r,forceMount:t,children:n,container:a}=e,s=Ke(Dn,r);return u.jsx(Wf,{scope:r,forceMount:t,children:u.jsx(wr,{present:t||s.open,children:u.jsx(iu,{asChild:!0,container:a,children:n})})})};Is.displayName=Dn;var br="PopoverContent",$s=g.forwardRef((e,r)=>{const t=Gf(br,e.__scopePopover),{forceMount:n=t.forceMount,...a}=e,s=Ke(br,e.__scopePopover);return u.jsx(wr,{present:n||s.open,children:s.modal?u.jsx(Uf,{...a,ref:r}):u.jsx(Vf,{...a,ref:r})})});$s.displayName=br;var Bf=ou("PopoverContent.RemoveScroll"),Uf=g.forwardRef((e,r)=>{const t=Ke(br,e.__scopePopover),n=g.useRef(null),a=tr(r,n),s=g.useRef(!1);return g.useEffect(()=>{const d=n.current;if(d)return Za(d)},[]),u.jsx(su,{as:Bf,allowPinchZoom:!0,children:u.jsx(Ws,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:q(e.onCloseAutoFocus,d=>{var i;d.preventDefault(),s.current||(i=t.triggerRef.current)==null||i.focus()}),onPointerDownOutside:q(e.onPointerDownOutside,d=>{const i=d.detail.originalEvent,o=i.button===0&&i.ctrlKey===!0,c=i.button===2||o;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:q(e.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),Vf=g.forwardRef((e,r)=>{const t=Ke(br,e.__scopePopover),n=g.useRef(!1),a=g.useRef(!1);return u.jsx(Ws,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var d,i;(d=e.onCloseAutoFocus)==null||d.call(e,s),s.defaultPrevented||(n.current||(i=t.triggerRef.current)==null||i.focus(),s.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:s=>{var o,c;(o=e.onInteractOutside)==null||o.call(e,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const d=s.target;((c=t.triggerRef.current)==null?void 0:c.contains(d))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),Ws=g.forwardRef((e,r)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:d,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:c,onInteractOutside:l,...f}=e,v=Ke(br,t),m=Ur(t);return Ja(),u.jsx(eu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s,children:u.jsx(ru,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:l,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:c,onDismiss:()=>v.onOpenChange(!1),children:u.jsx(tu,{"data-state":Bs(v.open),role:"dialog",id:v.contentId,...m,...f,ref:r,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Gs="PopoverClose",qf=g.forwardRef((e,r)=>{const{__scopePopover:t,...n}=e,a=Ke(Gs,t);return u.jsx(Ye.button,{type:"button",...n,ref:r,onClick:q(e.onClick,()=>a.onOpenChange(!1))})});qf.displayName=Gs;var Hf="PopoverArrow",Yf=g.forwardRef((e,r)=>{const{__scopePopover:t,...n}=e,a=Ur(t);return u.jsx(au,{...a,...n,ref:r})});Yf.displayName=Hf;function Bs(e){return e?"open":"closed"}var zf=Os,Kf=Fs,Qf=Is,Us=$s;const Vs=zf,qs=Kf,On=g.forwardRef(({className:e,align:r="center",sideOffset:t=4,...n},a)=>u.jsx(Qf,{children:u.jsx(Us,{ref:a,align:r,sideOffset:t,className:Ce("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));On.displayName=Us.displayName;function Xf({column:e,value:r,onSave:t,onCancel:n,selectOptions:a=[],relationOptions:s=[]}){const d=e.column_type,i=e.column_name,[o,c]=g.useState(r),[l,f]=g.useState(!0),[v,m]=g.useState("");g.useEffect(()=>{c(r)},[r]);const h=y=>{switch(d){case"email":const $=!y||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y);return f($),m($?"":"Некорректный email"),$;case"url":const U=!y||/^https?:\/\/.+/.test(y);return f(U),m(U?"":"URL должен начинаться с http:// или https://"),U;case"phone":const I=/^[\d\s\-\+\(\)]+$/,Q=String(y||"").replace(/\s/g,""),Y=!y||I.test(y)&&Q.length>=7;return f(Y),m(Y?"":"Некорректный номер телефона"),Y;case"number":const ne=!y||!isNaN(parseFloat(y));return f(ne),m(ne?"":"Должно быть числом"),ne;default:return f(!0),m(""),!0}},b=()=>{if(h(o)){let y=o;switch(d){case"number":y=o?parseFloat(o):null;break;case"boolean":y=!!o;break;case"date":y=o?new Date(o).toISOString():null;break}t(y)}},p=y=>{y.key==="Enter"&&!y.shiftKey?(y.preventDefault(),b()):y.key==="Escape"&&n()},_=()=>{switch(d){case"text":return u.jsx(fe,{value:o||"",onChange:y=>c(y.target.value),onKeyDown:p,placeholder:`Введите ${i.toLowerCase()}...`,autoFocus:!0,className:l?"":"border-destructive"});case"number":return u.jsx(fe,{type:"number",value:o||"",onChange:y=>{c(y.target.value),h(y.target.value)},onKeyDown:p,placeholder:"0",autoFocus:!0,className:l?"":"border-destructive"});case"email":return u.jsx(fe,{type:"email",value:o||"",onChange:y=>{c(y.target.value),h(y.target.value)},onKeyDown:p,placeholder:"email@example.com",autoFocus:!0,className:l?"":"border-destructive"});case"url":return u.jsx(fe,{type:"url",value:o||"",onChange:y=>{c(y.target.value),h(y.target.value)},onKeyDown:p,placeholder:"https://example.com",autoFocus:!0,className:l?"":"border-destructive"});case"phone":return u.jsx(fe,{type:"tel",value:o||"",onChange:y=>{c(y.target.value),h(y.target.value)},onKeyDown:p,placeholder:"+7 (xxx) xxx-xx-xx",autoFocus:!0,className:l?"":"border-destructive"});case"date":return u.jsxs(Vs,{children:[u.jsx(qs,{asChild:!0,children:u.jsxs(F,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[u.jsx(Wd,{className:"mr-2 h-4 w-4"}),o?ze(new Date(o),"PPP",{locale:al}):"Выберите дату"]})}),u.jsx(On,{className:"w-auto p-0",align:"start",children:u.jsx(Rs,{mode:"single",selected:o?new Date(o):void 0,onSelect:y=>c(y),initialFocus:!0})})]});case"boolean":return u.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[u.jsx("span",{className:"text-sm",children:o?"Да":"Нет"}),u.jsx(pu,{checked:!!o,onCheckedChange:c})]});case"select":return u.jsxs(Re,{value:o||"",onValueChange:c,children:[u.jsx(De,{children:u.jsx(Oe,{placeholder:"Выберите значение"})}),u.jsx(Te,{children:a.map(y=>u.jsx(we,{value:y,children:y},y))})]});case"multi_select":return u.jsx("div",{className:"space-y-2",children:a.map(y=>{const O=Array.isArray(o)&&o.includes(y);return u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"checkbox",id:y,checked:O,onChange:$=>{const G=Array.isArray(o)?[...o]:[];if($.target.checked)G.push(y);else{const U=G.indexOf(y);U>-1&&G.splice(U,1)}c(G)},className:"rounded"}),u.jsx("label",{htmlFor:y,className:"text-sm",children:y})]},y)})});case"relation":return u.jsxs(Re,{value:o||"",onValueChange:c,children:[u.jsx(De,{children:u.jsx(Oe,{placeholder:"Выберите связанную запись"})}),u.jsx(Te,{children:s.map(y=>u.jsx(we,{value:y.id,children:y.label},y.id))})]});case"file":return u.jsx(fe,{type:"file",onChange:y=>{var $;const O=($=y.target.files)==null?void 0:$[0];O&&c(O.name)},autoFocus:!0});case"formula":case"rollup":case"lookup":return u.jsxs("div",{className:"p-2 border rounded-md bg-muted text-sm text-muted-foreground",children:["Вычисляемое поле (только для чтения)",u.jsx("div",{className:"mt-1 font-mono",children:o||"Нет данных"})]});default:return u.jsx(fe,{value:o||"",onChange:y=>c(y.target.value),onKeyDown:p,placeholder:`Введите ${i.toLowerCase()}...`,autoFocus:!0})}},x=["formula","rollup","lookup"].includes(d);return u.jsxs("div",{className:"space-y-2",children:[_(),v&&u.jsx("p",{className:"text-sm text-destructive",children:v}),!x&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(F,{size:"sm",onClick:b,disabled:!l,className:"gap-1",children:[u.jsx(ln,{className:"h-3 w-3"}),"Сохранить"]}),u.jsxs(F,{size:"sm",variant:"outline",onClick:n,className:"gap-1",children:[u.jsx(nt,{className:"h-3 w-3"}),"Отмена"]})]})]})}const sr={text:[{value:"eq",label:"Равно",types:["text","email","url","phone"]},{value:"neq",label:"Не равно",types:["text","email","url","phone"]},{value:"contains",label:"Содержит",types:["text","email","url","phone"]},{value:"startsWith",label:"Начинается с",types:["text","email","url","phone"]},{value:"endsWith",label:"Заканчивается на",types:["text","email","url","phone"]},{value:"is",label:"Пусто",types:["text","email","url","phone"]}],number:[{value:"eq",label:"=",types:["number"]},{value:"neq",label:"≠",types:["number"]},{value:"gt",label:">",types:["number"]},{value:"gte",label:"≥",types:["number"]},{value:"lt",label:"<",types:["number"]},{value:"lte",label:"≤",types:["number"]},{value:"between",label:"Между",types:["number"]}],date:[{value:"eq",label:"Равно",types:["date"]},{value:"neq",label:"Не равно",types:["date"]},{value:"gt",label:"После",types:["date"]},{value:"lt",label:"До",types:["date"]},{value:"between",label:"В диапазоне",types:["date"]}],boolean:[{value:"eq",label:"Равно",types:["boolean"]}],select:[{value:"eq",label:"Равно",types:["select","multi_select"]},{value:"neq",label:"Не равно",types:["select","multi_select"]},{value:"in",label:"Один из",types:["select","multi_select"]}]};function Zf({columns:e,filters:r,onFiltersChange:t}){const[n,a]=g.useState([]),[s,d]=g.useState(!1),i=()=>{var b;const m={id:Math.random().toString(36).substring(7),column:((b=e[0])==null?void 0:b.column_name)||"",operator:"eq",value:""},h=[...n,m];a(h),t({})},o=m=>{const h=n.filter(b=>b.id!==m);a(h),t({})},c=(m,h)=>{const b=n.map(p=>p.id===m?{...p,...h}:p);a(b),t({})},l=()=>{a([]),t({})},f=m=>{const h=e.find(p=>p.column_name===m);if(!h)return[];const b=h.column_type;return["text","email","url","phone"].includes(b)?sr.text:b==="number"?sr.number:b==="date"?sr.date:b==="boolean"?sr.boolean:["select","multi_select"].includes(b)?sr.select:sr.text},v=m=>{const h=e.find(p=>p.column_name===m.column);if(!h)return null;const b=h.column_type;return m.operator==="is"?u.jsxs(Re,{value:m.value===null?"null":"not_null",onValueChange:p=>c(m.id,{value:p==="null"?null:!1}),children:[u.jsx(De,{className:"w-[150px]",children:u.jsx(Oe,{})}),u.jsxs(Te,{children:[u.jsx(we,{value:"null",children:"Пусто"}),u.jsx(we,{value:"not_null",children:"Не пусто"})]})]}):m.operator==="between"?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(fe,{type:b==="number"?"number":b==="date"?"date":"text",placeholder:"От",value:Array.isArray(m.value)?m.value[0]:"",onChange:p=>{const _=Array.isArray(m.value)?m.value:["",""];c(m.id,{value:[p.target.value,_[1]]})},className:"w-[120px]"}),u.jsx("span",{className:"text-muted-foreground",children:"и"}),u.jsx(fe,{type:b==="number"?"number":b==="date"?"date":"text",placeholder:"До",value:Array.isArray(m.value)?m.value[1]:"",onChange:p=>{const _=Array.isArray(m.value)?m.value:["",""];c(m.id,{value:[_[0],p.target.value]})},className:"w-[120px]"})]}):b==="boolean"?u.jsxs(Re,{value:String(m.value),onValueChange:p=>c(m.id,{value:p==="true"}),children:[u.jsx(De,{className:"w-[150px]",children:u.jsx(Oe,{})}),u.jsxs(Te,{children:[u.jsx(we,{value:"true",children:"Да"}),u.jsx(we,{value:"false",children:"Нет"})]})]}):b==="date"?u.jsx(fe,{type:"date",value:m.value||"",onChange:p=>c(m.id,{value:p.target.value}),className:"w-[180px]"}):b==="number"?u.jsx(fe,{type:"number",placeholder:"Значение",value:m.value||"",onChange:p=>c(m.id,{value:p.target.value}),className:"w-[150px]"}):u.jsx(fe,{placeholder:"Значение",value:m.value||"",onChange:p=>c(m.id,{value:p.target.value}),className:"w-[200px]"})};return u.jsx("div",{className:"space-y-2",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(Vs,{open:s,onOpenChange:d,children:[u.jsx(qs,{asChild:!0,children:u.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",children:[u.jsx(Yd,{className:"h-4 w-4"}),"Фильтры",n.length>0&&u.jsx(Fe,{variant:"secondary",className:"ml-1",children:n.length})]})}),u.jsx(On,{className:"w-[600px]",align:"start",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h4",{className:"font-semibold",children:"Фильтры"}),n.length>0&&u.jsx(F,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground",children:"Очистить все"})]}),n.length===0?u.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"Нет активных фильтров. Добавьте фильтр для начала."}):u.jsx("div",{className:"space-y-2",children:n.map((m,h)=>u.jsx(Er,{className:"p-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[h>0&&u.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:"И"}),u.jsxs(Re,{value:m.column,onValueChange:b=>c(m.id,{column:b,operator:"eq",value:""}),children:[u.jsx(De,{className:"w-[150px]",children:u.jsx(Oe,{})}),u.jsx(Te,{children:e.map(b=>u.jsx(we,{value:b.column_name,children:b.column_name},b.id))})]}),u.jsxs(Re,{value:m.operator,onValueChange:b=>c(m.id,{operator:b,value:""}),children:[u.jsx(De,{className:"w-[140px]",children:u.jsx(Oe,{})}),u.jsx(Te,{children:f(m.column).map(b=>u.jsx(we,{value:b.value,children:b.label},b.value))})]}),v(m),u.jsx(F,{variant:"ghost",size:"sm",onClick:()=>o(m.id),children:u.jsx(nt,{className:"h-4 w-4"})})]})},m.id))}),u.jsxs(F,{variant:"outline",size:"sm",onClick:i,className:"w-full gap-2",children:[u.jsx(Mr,{className:"h-4 w-4"}),"Добавить фильтр"]})]})})]}),n.length>0&&u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:n.map(m=>{const h=e.find(p=>p.column_name===m.column),b=f(m.column).find(p=>p.value===m.operator);return u.jsxs(Fe,{variant:"secondary",className:"gap-1",children:[h==null?void 0:h.column_name," ",b==null?void 0:b.label," ",m.value,u.jsx(F,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>o(m.id),children:u.jsx(nt,{className:"h-3 w-3"})})]},m.id)})})]})})}class Tn{static async createRelation(r,t){const{data:n,error:a}=await ye.rpc("create_database_relation",{source_database_id:r,target_database_id:t.target_database_id,relation_type:t.relation_type,source_column:t.display_field||"id",target_column:t.display_field||"id"});if(a)throw a;return n}static async getRelations(r){const{data:t,error:n}=await ye.rpc("get_database_relations",{p_database_id:r});if(n)throw n;return t||[]}static async deleteRelation(r){const{error:t}=await ye.rpc("delete_database_relation",{p_relation_id:r});if(t)throw t}static async getRelatedData(r,t,n){const{data:a,error:s}=await ye.rpc("get_related_data",{p_source_database_id:r,p_source_row_id:t,p_relation_column_id:n});if(s)throw s;return a||[]}static async calculateRollup(r,t,n){const{data:a,error:s}=await ye.rpc("calculate_rollup",{p_source_database_id:r,p_source_row_id:t,p_rollup_config:n});if(s)throw s;return a}static async getLookupValue(r,t,n,a){const{data:s,error:d}=await ye.rpc("get_lookup_value",{p_source_database_id:r,p_source_row_id:t,p_relation_column_id:n,p_target_column:a});if(d)throw d;return s}static async linkRows(r,t,n,a){const{error:s}=await ye.rpc("link_rows",{p_source_database_id:r,p_source_row_id:t,p_relation_id:n,p_target_row_ids:a});if(s)throw s}static async unlinkRows(r,t,n,a){const{error:s}=await ye.rpc("unlink_rows",{p_source_database_id:r,p_source_row_id:t,p_relation_id:n,p_target_row_ids:a});if(s)throw s}static async getRelationshipGraph(r){const{data:t,error:n}=await ye.rpc("get_relationship_graph",{p_database_id:r||null});if(n)throw n;return t||{nodes:[],edges:[]}}static validateRelationConfig(r){const t=[];r.target_database_id||t.push("Не указана целевая база данных"),r.relation_type||t.push("Не указан тип связи");const n=["one_to_many","many_to_one","many_to_many"];return r.relation_type&&!n.includes(r.relation_type)&&t.push("Недопустимый тип связи"),{isValid:t.length===0,errors:t}}static validateRollupConfig(r){const t=[];r.relation_column_id||t.push("Не указана колонка со связью"),r.target_column||t.push("Не указана целевая колонка для агрегации"),r.aggregation||t.push("Не указан тип агрегации");const n=["count","sum","avg","min","max","median","unique","empty","not_empty"];return r.aggregation&&!n.includes(r.aggregation)&&t.push("Недопустимый тип агрегации"),{isValid:t.length===0,errors:t}}static async getAvailableRollupColumns(r){const{data:t,error:n}=await ye.rpc("get_available_rollup_columns",{p_relation_column_id:r});if(n)throw n;return t||[]}}function Jf(e){return Xa({queryKey:["relations",e],queryFn:()=>Tn.getRelations(e),staleTime:6e4})}function e0(e){const r=xr();return rr({mutationFn:async t=>await Tn.createRelation(e,t),onSuccess:(t,n)=>{r.invalidateQueries({queryKey:["relations",e]}),r.invalidateQueries({queryKey:["relations",n.targetDatabaseId]}),r.invalidateQueries({queryKey:["databases"]})}})}function r0(e){const r=xr();return rr({mutationFn:async t=>await Tn.deleteRelation(t),onSuccess:()=>{r.invalidateQueries({queryKey:["relations",e]}),r.invalidateQueries({queryKey:["databases"]})}})}const ga=[{value:"one_to_many",label:"Один ко многим",icon:"1️⃣ → ∞"},{value:"many_to_one",label:"Многие к одному",icon:"∞ → 1️⃣"},{value:"many_to_many",label:"Многие ко многим",icon:"∞ ↔ ∞"}];function t0({open:e,onOpenChange:r,databaseId:t}){const{data:n,isLoading:a}=Jf(t),{data:s=[]}=bd(""),d=e0(t),i=r0(t),[o,c]=g.useState(!1),[l,f]=g.useState({target_database_id:"",relation_type:"one_to_many",display_field:"name"}),v=async()=>{if(!l.target_database_id){te.error("Выберите целевую базу данных");return}try{await d.mutateAsync(l),te.success("Связь создана"),c(!1),f({target_database_id:"",relation_type:"one_to_many",display_field:"name"})}catch(p){te.error("Ошибка при создании связи"),console.error(p)}},m=async p=>{try{await i.mutateAsync(p),te.success("Связь удалена")}catch(_){te.error("Ошибка при удалении связи"),console.error(_)}},h=p=>s.find(_=>_.id===p),b=p=>ga.find(_=>_.value===p);return u.jsx(fr,{open:e,onOpenChange:r,children:u.jsxs(mr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(hr,{children:[u.jsx(pr,{children:"Управление связями"}),u.jsx(vr,{children:"Создавайте связи между базами данных"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Связи между базами"}),u.jsxs(fr,{open:o,onOpenChange:c,children:[u.jsx(lu,{asChild:!0,children:u.jsxs(F,{size:"sm",className:"gap-2",children:[u.jsx(Mr,{className:"h-4 w-4"}),"Создать связь"]})}),u.jsxs(mr,{className:"sm:max-w-[500px]",children:[u.jsxs(hr,{children:[u.jsx(pr,{children:"Новая связь"}),u.jsx(vr,{children:"Создайте связь с другой базой данных"})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Ze,{children:"Целевая база данных"}),u.jsxs(Re,{value:l.target_database_id,onValueChange:p=>f({...l,target_database_id:p}),children:[u.jsx(De,{children:u.jsx(Oe,{placeholder:"Выберите базу данных"})}),u.jsx(Te,{children:s.filter(p=>p.id!==t).map(p=>u.jsx(we,{value:p.id,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:p.icon}),u.jsx("span",{children:p.name})]})},p.id))})]})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx(Ze,{children:"Тип связи"}),u.jsxs(Re,{value:l.relation_type,onValueChange:p=>f({...l,relation_type:p}),children:[u.jsx(De,{children:u.jsx(Oe,{})}),u.jsx(Te,{children:ga.map(p=>u.jsx(we,{value:p.value,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-mono text-xs",children:p.icon}),u.jsx("span",{children:p.label})]})},p.value))})]})]}),u.jsxs("div",{className:"rounded-lg bg-muted p-3 text-sm",children:[u.jsx("p",{className:"font-medium mb-1",children:"Что это значит?"}),u.jsxs("p",{className:"text-muted-foreground",children:[l.relation_type==="one_to_many"&&"Одна запись в этой базе может быть связана с несколькими записями в целевой базе.",l.relation_type==="many_to_one"&&"Несколько записей в этой базе могут быть связаны с одной записью в целевой базе.",l.relation_type==="many_to_many"&&"Записи в обеих базах могут иметь множественные связи друг с другом."]})]})]}),u.jsxs(fn,{children:[u.jsx(F,{variant:"outline",onClick:()=>c(!1),children:"Отмена"}),u.jsx(F,{onClick:v,disabled:d.isPending,children:d.isPending?"Создание...":"Создать"})]})]})]})]}),u.jsx(Er,{children:u.jsx(tt,{className:"p-0",children:a?u.jsx("div",{className:"p-8 text-center text-muted-foreground",children:u.jsx("p",{children:"Загрузка связей..."})}):!n||n.length===0?u.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[u.jsx(Qt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),u.jsx("p",{className:"mb-2",children:"Нет связей с другими базами"}),u.jsx("p",{className:"text-sm",children:"Создайте связь для объединения данных из разных баз"})]}):u.jsx("div",{className:"divide-y",children:n.map(p=>{const _=h(p.target_database_id),x=b(p.relation_type);return u.jsxs("div",{className:"flex items-center gap-3 p-4 hover:bg-muted/50 transition-colors",children:[u.jsx(Qt,{className:"h-5 w-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsxs("span",{className:"font-medium",children:["Связь с ",_==null?void 0:_.icon," ",_==null?void 0:_.name]}),u.jsx(Fe,{variant:"outline",className:"font-mono text-xs",children:x==null?void 0:x.icon})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:x==null?void 0:x.label})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(F,{size:"sm",variant:"ghost",onClick:()=>{},children:u.jsx(yd,{className:"h-4 w-4"})}),u.jsx(F,{size:"sm",variant:"ghost",onClick:()=>m(p.id),className:"text-destructive hover:text-destructive",children:u.jsx(at,{className:"h-4 w-4"})})]})]},p.id)})})})})]})]})})}class tn{static async uploadFile(r,t,n){r.name.split(".").pop();const a=`${Date.now()}_${r.name}`,s=`${n}/${t}/${a}`,{data:d,error:i}=await ye.storage.from("uploads").upload(s,r);if(i)throw i;return{fileId:d.path,fileName:r.name}}static async parseFile(r){var n;const t=(n=r.name.split(".").pop())==null?void 0:n.toLowerCase();if(t==="csv")return this.parseCSV(r);if(t==="xlsx"||t==="xls")return this.parseExcel(r);if(t==="json")return this.parseJSON(r);throw new Error("Неподдерживаемый формат файла")}static async parseCSV(r){return new Promise((t,n)=>{const a=new FileReader;a.onload=s=>{var d;try{const o=((d=s.target)==null?void 0:d.result).split(`
`).filter(f=>f.trim());if(o.length===0){n(new Error("Файл пуст"));return}const c=o[0].split(",").map(f=>f.trim().replace(/^"|"$/g,"")),l=[];for(let f=1;f<o.length;f++){const v=o[f].split(",").map(h=>h.trim().replace(/^"|"$/g,"")),m={};c.forEach((h,b)=>{m[h]=v[b]||""}),l.push(m)}t({headers:c,rows:l,totalRows:l.length})}catch(i){n(i)}},a.onerror=()=>n(new Error("Ошибка чтения файла")),a.readAsText(r)})}static async parseExcel(r){throw new Error("Excel парсинг будет реализован с библиотекой xlsx")}static async parseJSON(r){return new Promise((t,n)=>{const a=new FileReader;a.onload=s=>{var d;try{const i=(d=s.target)==null?void 0:d.result,o=JSON.parse(i);if(!Array.isArray(o)){n(new Error("JSON должен содержать массив объектов"));return}if(o.length===0){n(new Error("JSON файл пуст"));return}const c=Object.keys(o[0]),l=o;t({headers:c,rows:l,totalRows:l.length})}catch(i){n(i)}},a.onerror=()=>n(new Error("Ошибка чтения файла")),a.readAsText(r)})}static suggestColumnMapping(r,t){const n=[];for(const a of r){let s="",d=0;for(const i of t){const o=this.calculateSimilarity(a.toLowerCase(),i.toLowerCase());o>d&&(d=o,s=i)}n.push({sourceColumn:a,targetColumn:s,confidence:d})}return n}static calculateSimilarity(r,t){const n=r.length>t.length?r:t,a=r.length>t.length?t:r;if(n.length===0)return 1;const s=this.levenshteinDistance(n,a);return(n.length-s)/n.length}static levenshteinDistance(r,t){const n=[];for(let a=0;a<=t.length;a++)n[a]=[a];for(let a=0;a<=r.length;a++)n[0][a]=a;for(let a=1;a<=t.length;a++)for(let s=1;s<=r.length;s++)t.charAt(a-1)===r.charAt(s-1)?n[a][s]=n[a-1][s-1]:n[a][s]=Math.min(n[a-1][s-1]+1,n[a][s-1]+1,n[a-1][s]+1);return n[t.length][r.length]}static validateData(r,t,n){const a=[],s=[];return r.forEach((d,i)=>{t.forEach(o=>{const c=d[o.sourceColumn],l=n[o.targetColumn];if(l&&(l.required&&(c==null||c==="")&&a.push({row:i+1,column:o.targetColumn,value:c,message:`Обязательное поле "${o.targetColumn}" пусто`}),c!=null&&c!==""))switch(l.type){case"number":isNaN(Number(c))&&a.push({row:i+1,column:o.targetColumn,value:c,message:`Значение "${c}" не является числом`});break;case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(c))||a.push({row:i+1,column:o.targetColumn,value:c,message:`Значение "${c}" не является валидным email`});break;case"url":try{new URL(String(c))}catch{a.push({row:i+1,column:o.targetColumn,value:c,message:`Значение "${c}" не является валидным URL`})}break;case"boolean":["true","false","1","0","yes","no","да","нет"].includes(String(c).toLowerCase())||s.push({row:i+1,column:o.targetColumn,value:c,message:`Значение "${c}" будет преобразовано в boolean`});break}})}),{isValid:a.length===0,errors:a,warnings:s}}static async importData(r,t,n){let a=0,s=0;const d=t.map(o=>{const c={};return n.forEach(l=>{l.targetColumn&&(c[l.targetColumn]=o[l.sourceColumn])}),c}),i=100;for(let o=0;o<d.length;o+=i){const c=d.slice(o,o+i);try{const{data:l,error:f}=await ye.rpc("bulk_insert_table_rows",{p_database_id:r,p_rows:c});f?s+=c.length:a+=c.length}catch{s+=c.length}}return{imported:a,failed:s}}}function n0(){return rr({mutationFn:async({file:e,format:r})=>{const t=await e.text();switch(r){case"csv":return tn.parseCSV(t);case"json":return tn.parseJSON(t);case"excel":throw new Error("Excel parsing not yet implemented");default:throw new Error(`Unsupported format: ${r}`)}}})}function a0(e){const r=xr();return rr({mutationFn:async({data:t,columnMapping:n,updateExisting:a})=>await tn.importData(e,t,n,a),onSuccess:()=>{r.invalidateQueries({queryKey:["tableData",e]}),r.invalidateQueries({queryKey:["databaseStats",e]})}})}function u0(e,r){const t=[];for(let n=0;n<=r.length;n++)t[n]=[n];for(let n=0;n<=e.length;n++)t[0][n]=n;for(let n=1;n<=r.length;n++)for(let a=1;a<=e.length;a++)r.charAt(n-1)===e.charAt(a-1)?t[n][a]=t[n-1][a-1]:t[n][a]=Math.min(t[n-1][a-1]+1,t[n][a-1]+1,t[n-1][a]+1);return t[r.length][e.length]}function ba(e){return e.toLowerCase().trim().replace(/[_\s-]+/g,"").replace(/[^\w]/g,"")}function s0(e,r){const t=ba(e),n=ba(r);if(t===n)return 1;const a=u0(t,n),s=Math.max(t.length,n.length);return s>0?1-a/s:0}function d0(e,r,t=.6){const n=[];for(const a of e){let s=null;for(const d of r){const i=s0(a,d.column_name);i>=t&&(!s||i>s.confidence)&&(s={column:d.column_name,confidence:i})}s?n.push({sourceColumn:a,targetColumn:s.column,confidence:s.confidence}):n.push({sourceColumn:a,targetColumn:"",confidence:0})}return n}class i0{constructor(){Ie(this,"knownPatterns",{email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^[\d\s\-\+\(\)]+$/,url:/^https?:\/\/.+/,date:/^\d{1,4}[-\/]\d{1,2}[-\/]\d{1,4}/,number:/^-?\d+\.?\d*$/,currency:/^[$€£¥]\s?\d+/,percentage:/^\d+\.?\d*%$/});Ie(this,"commonNameMappings",{name:["name","название","имя","title","наименование"],firstName:["first_name","firstname","fname","имя"],lastName:["last_name","lastname","lname","фамилия"],email:["email","e-mail","mail","почта","email_address"],phone:["phone","телефон","tel","telephone","mobile","мобильный"],address:["address","адрес","location","место"],city:["city","город","town"],country:["country","страна","nation"],price:["price","цена","cost","стоимость","amount"],total:["total","итого","sum","сумма"],discount:["discount","скидка","sale"],date:["date","дата","datetime","timestamp"],createdAt:["created_at","created","создан","create_date"],updatedAt:["updated_at","updated","изменен","update_date"],status:["status","статус","state","состояние"],active:["active","активен","enabled","включен"],id:["id","identifier","код","number","номер"]})}analyzeColumn(r,t){var c;const n=t.slice(0,100),a=n.filter(l=>l!=null&&l!==""),s={name:r,type:"text",samples:a.slice(0,5),nullCount:n.length-a.length,uniqueCount:new Set(a).size,patterns:[]};if(a.length===0)return s;const d={email:0,phone:0,url:0,date:0,number:0,boolean:0,text:0};a.forEach(l=>{const f=String(l).trim();this.knownPatterns.email.test(f)&&d.email++,this.knownPatterns.phone.test(f)&&d.phone++,this.knownPatterns.url.test(f)&&d.url++,this.knownPatterns.date.test(f)&&d.date++,this.knownPatterns.number.test(f)&&d.number++,["true","false","yes","no","1","0","да","нет"].includes(f.toLowerCase())&&d.boolean++});const i=Math.max(...Object.values(d)),o=a.length*.7;if(i>=o){const l=(c=Object.entries(d).find(([f,v])=>v===i))==null?void 0:c[0];s.type=l||"text"}return d.email>0&&s.patterns.push("email"),d.phone>0&&s.patterns.push("phone"),d.url>0&&s.patterns.push("url"),d.date>0&&s.patterns.push("date"),d.number>0&&s.patterns.push("number"),this.knownPatterns.currency.test(String(a[0]))&&s.patterns.push("currency"),s}calculateNameSimilarity(r,t){const n=r.toLowerCase().replace(/[_\s-]/g,""),a=t.toLowerCase().replace(/[_\s-]/g,"");if(n===a)return 1;for(const[i,o]of Object.entries(this.commonNameMappings))if(o.some(c=>n.includes(c))&&o.some(c=>a.includes(c)))return .9;const s=this.levenshteinDistance(n,a),d=Math.max(n.length,a.length);return 1-s/d}levenshteinDistance(r,t){const n=[];for(let a=0;a<=t.length;a++)n[a]=[a];for(let a=0;a<=r.length;a++)n[0][a]=a;for(let a=1;a<=t.length;a++)for(let s=1;s<=r.length;s++)t.charAt(a-1)===r.charAt(s-1)?n[a][s]=n[a-1][s-1]:n[a][s]=Math.min(n[a-1][s-1]+1,n[a][s-1]+1,n[a-1][s]+1);return n[t.length][r.length]}suggestMappings(r,t){const n=[],a=r.map(s=>({...s,analysis:this.analyzeColumn(s.name,s.values)}));for(const s of a){let d=null,i=0;for(const o of t){let c=0,l="";const f=this.calculateNameSimilarity(s.name,o.name);c+=f*.4,f>.8&&(l="Похожие названия колонок"),s.analysis.type===o.type&&(c+=.35,l+=l?", совпадают типы данных":"Совпадают типы данных"),s.analysis.patterns.length>0&&s.analysis.patterns.some(m=>o.name.toLowerCase().includes(m))&&(c+=.25,l+=l?", паттерны данных":"Паттерны данных"),c>i&&c>.5&&(i=c,d={sourceColumn:s.name,targetColumn:o.name,confidence:c,reason:l||"Автоматическое сопоставление"})}d&&n.push(d)}return n.sort((s,d)=>d.confidence-s.confidence)}improveMappingWithFeedback(r,t){const n={...r};return t.forEach(({source:a,target:s,isCorrect:d})=>{d?n[a]=s:n[a]===s&&delete n[a]}),n}}const ya=new i0;class o0{constructor(){Ie(this,"storageKey","vhdata_mapping_memory");Ie(this,"maxEntries",100)}saveMapping(r){const t=this.loadAll(),n={...r,id:crypto.randomUUID(),timestamp:new Date().toISOString()};t.unshift(n),t.length>this.maxEntries&&t.splice(this.maxEntries),this.save(t)}loadAll(){try{const r=localStorage.getItem(this.storageKey);return r?JSON.parse(r):[]}catch(r){return console.error("Error loading mapping memory:",r),[]}}findSimilarMappings(r,t,n){return this.loadAll().filter(s=>{if(n&&s.databaseId!==n)return!1;const d=this.calculateColumnSimilarity(r,s.sourceColumns),i=this.calculateColumnSimilarity(t,s.targetColumns);return d>.5&&i>.5}).sort((s,d)=>new Date(d.timestamp).getTime()-new Date(s.timestamp).getTime())}suggestFromHistory(r,t,n){const a=this.findSimilarMappings(r,t,n);if(a.length===0)return[];const s=a.find(i=>i.successful);if(!s)return[];const d=[];for(const[i,o]of Object.entries(s.mapping))r.includes(i)&&t.includes(o)&&d.push({sourceColumn:i,targetColumn:o,confidence:.95});return d}calculateColumnSimilarity(r,t){const n=new Set(r.map(i=>i.toLowerCase())),a=new Set(t.map(i=>i.toLowerCase())),s=new Set([...n].filter(i=>a.has(i))),d=new Set([...n,...a]);return s.size/d.size}clear(){localStorage.removeItem(this.storageKey)}cleanup(r=30){const t=this.loadAll(),n=new Date;n.setDate(n.getDate()-r);const a=t.filter(s=>new Date(s.timestamp)>n);this.save(a)}getStats(){const r=this.loadAll();return{totalMappings:r.length,successfulMappings:r.filter(t=>t.successful).length,databases:new Set(r.map(t=>t.databaseId)),avgMappingsPerFile:r.length>0?r.reduce((t,n)=>t+Object.keys(n.mapping).length,0)/r.length:0}}save(r){try{localStorage.setItem(this.storageKey,JSON.stringify(r))}catch(t){console.error("Error saving mapping memory:",t)}}}const xa=new o0;class c0{constructor(){Ie(this,"emailRegex",/^[^\s@]+@[^\s@]+\.[^\s@]+$/);Ie(this,"phoneRegex",/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/);Ie(this,"urlRegex",/^https?:\/\/.+/);Ie(this,"dateRegex",/^\d{1,4}[-\/]\d{1,2}[-\/]\d{1,4}/)}validate(r,t){const n=[],a=[],s=new Map;t.forEach(o=>{s.set(o.name,new Set)}),r.forEach((o,c)=>{t.forEach(l=>{const f=o[l.name];if(l.required&&(f==null||f==="")){n.push({row:c+1,column:l.name,value:f,message:"Обязательное поле не заполнено"});return}if(f==null||f==="")return;const v=this.validateType(f,l.type);v&&n.push({row:c+1,column:l.name,value:f,message:v});const m=this.validateFormat(f,l.type);m&&a.push({row:c+1,column:l.name,value:f,message:m});const h=s.get(l.name);h&&(h.has(f)?a.push({row:c+1,column:l.name,value:f,message:"Дубликат значения"}):h.add(f)),l.rules&&l.rules.forEach(b=>{const p=this.validateRule(f,b,c+1,l.name);p&&(b.type==="required"||b.type==="type"?n.push(p):a.push(p))})})});const d=new Set(n.map(o=>o.row)).size,i=new Set(a.map(o=>o.row)).size;return{isValid:n.length===0,errors:n,warnings:a,stats:{totalRows:r.length,validRows:r.length-d,errorRows:d,warningRows:i}}}validateType(r,t){switch(t){case"number":if(isNaN(Number(r)))return`Ожидается число, получено: "${r}"`;break;case"boolean":if(!["true","false","yes","no","1","0","да","нет"].includes(String(r).toLowerCase()))return`Ожидается boolean, получено: "${r}"`;break;case"date":if(!this.isValidDate(r))return`Неверный формат даты: "${r}"`;break;case"email":if(!this.emailRegex.test(String(r)))return`Неверный формат email: "${r}"`;break;case"phone":if(!this.phoneRegex.test(String(r)))return`Неверный формат телефона: "${r}"`;break;case"url":if(!this.urlRegex.test(String(r)))return`Неверный формат URL: "${r}"`;break}return null}validateFormat(r,t){const n=String(r);switch(t){case"text":if(n.length>1e3)return`Слишком длинный текст (${n.length} символов)`;break;case"number":const a=Number(r);if(a>Number.MAX_SAFE_INTEGER)return"Число слишком большое";if(a<Number.MIN_SAFE_INTEGER)return"Число слишком маленькое";break;case"email":if(n.length>255)return"Email слишком длинный";break}return null}validateRule(r,t,n,a){var s,d,i;switch(t.type){case"range":const o=Number(r);if(((s=t.params)==null?void 0:s.min)!=null&&o<t.params.min)return{row:n,column:a,value:r,message:t.message};if(((d=t.params)==null?void 0:d.max)!=null&&o>t.params.max)return{row:n,column:a,value:r,message:t.message};break;case"custom":if((i=t.params)!=null&&i.validator&&!t.params.validator(r))return{row:n,column:a,value:r,message:t.message};break}return null}isValidDate(r){const t=new Date(r);return t instanceof Date&&!isNaN(t.getTime())}analyzeDataQuality(r){if(r.length===0)return{columns:[],overallScore:0};const n=Object.keys(r[0]).map(s=>{const d=r.map(m=>m[s]),i=d.filter(m=>m!=null&&m!==""),o=i.length/d.length,c=new Set(i).size/Math.max(i.length,1),l=i.map(m=>this.inferType(m)),f=this.getMostCommon(l),v=l.filter(m=>m===f).length/Math.max(l.length,1);return{name:s,completeness:o,uniqueness:c,consistency:v}}),a=n.reduce((s,d)=>s+(d.completeness+d.consistency)/2,0)/n.length;return{columns:n,overallScore:a}}inferType(r){if(r==null)return"null";if(typeof r=="number")return"number";if(typeof r=="boolean")return"boolean";const t=String(r);return this.emailRegex.test(t)?"email":this.phoneRegex.test(t)?"phone":this.urlRegex.test(t)?"url":this.dateRegex.test(t)?"date":isNaN(Number(t))?"text":"number"}getMostCommon(r){const t=new Map;r.forEach(s=>{t.set(s,(t.get(s)||0)+1)});let n=0,a=r[0];return t.forEach((s,d)=>{s>n&&(n=s,a=d)}),a}}const Hs=new c0;function l0(e,r,t){return Hs.validate(e,r).errors}function f0(e,r){const t=Hs.analyzeDataQuality(e),n=t.columns.reduce((i,o)=>i+o.completeness,0)/Math.max(t.columns.length,1),a=t.columns.reduce((i,o)=>i+o.uniqueness,0)/Math.max(t.columns.length,1),s=t.columns.reduce((i,o)=>i+o.consistency,0)/Math.max(t.columns.length,1),d=[];return t.columns.forEach(i=>{i.completeness<.9&&d.push(`Колонка "${i.name}" заполнена только на ${Math.round(i.completeness*100)}%`),i.consistency<.9&&d.push(`Колонка "${i.name}" содержит разнородные данные (${Math.round(i.consistency*100)}% согласованность)`)}),{completeness:n,uniqueness:a,consistency:s,totalErrors:0,warnings:d}}const m0=({open:e,onOpenChange:r,databaseId:t,existingColumns:n,onImportComplete:a})=>{const{toast:s}=xd(),[d,i]=g.useState(null),[o,c]=g.useState(null),[l,f]=g.useState([]),[v,m]=g.useState("upload"),[h,b]=g.useState(0),[p,_]=g.useState(!1),[x,y]=g.useState(null),[O,$]=g.useState([]),[G,U]=g.useState(!0),[I,Q]=g.useState({}),Y=n0(),ne=a0(t),se=g.useCallback(S=>{S.preventDefault(),S.stopPropagation(),S.type==="dragenter"||S.type==="dragover"?_(!0):S.type==="dragleave"&&_(!1)},[]),ue=g.useCallback(async S=>{if(!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(S.type)&&!S.name.match(/\.(csv|xlsx|xls)$/i)){s({title:"Неподдерживаемый формат",description:"Пожалуйста, загрузите CSV или Excel файл",variant:"destructive"});return}if(S.size>10*1024*1024){s({title:"Файл слишком большой",description:"Максимальный размер файла: 10MB",variant:"destructive"});return}i(S),S.name.endsWith(".json")||S.name.match(/\.(xlsx|xls)$/i);try{const j=await Y.mutateAsync(S);c(j);let R=[];if(G){const L=xa.suggestFromHistory(j.headers,n.map(z=>z.column_name),t);if(L.length>0)R=L,s({title:"🎯 Найдены исторические маппинги",description:`Применено ${L.length} проверенных сопоставлений`});else{const z=j.headers.map(Z=>({name:Z,values:j.rows.slice(0,100).map(Vr=>Vr[Z])})),Pe=n.map(Z=>({name:Z.column_name,type:Z.column_type}));R=ya.suggestMappings(z,Pe).map(Z=>({sourceColumn:Z.sourceColumn,targetColumn:Z.targetColumn,confidence:Z.confidence})),s({title:"🤖 ML-маппинг применен",description:`Автоматически сопоставлено ${R.filter(Z=>Z.confidence&&Z.confidence>.7).length} колонок`})}}else{const L=n.map(z=>({column_name:z.column_name}));R=d0(j.headers,L,.6)}f(R);const M=f0(j.rows,j.headers);y(M);const W=R.filter(L=>L.targetColumn).map(L=>{const z=n.find(Pe=>Pe.column_name===L.targetColumn);return{name:L.targetColumn,type:(z==null?void 0:z.column_type)||"text",required:!1}}),ee=l0(j.rows,W,[]);$(ee),m("mapping"),s({title:"Файл успешно загружен",description:`Найдено ${j.totalRows} строк и ${j.headers.length} колонок. Качество: ${Math.round(M.completeness*100)}%`})}catch(j){s({title:"Ошибка загрузки",description:j instanceof Error?j.message:"Не удалось загрузить файл",variant:"destructive"})}},[t,n,Y,s,G]),ae=g.useCallback(S=>{var j;S.preventDefault(),S.stopPropagation(),_(!1);const k=(j=S.dataTransfer.files)==null?void 0:j[0];k&&ue(k)},[ue]),de=(S,k)=>{Q(R=>({...R,[S]:k}));const j=l.find(R=>R.sourceColumn===S);if(j&&j.targetColumn){const R=l.reduce((ee,L)=>(L.targetColumn&&(ee[L.sourceColumn]=L.targetColumn),ee),{}),M=[{source:S,target:j.targetColumn,isCorrect:k}],W=ya.improveMappingWithFeedback(R,M);f(ee=>ee.map(L=>({...L,targetColumn:W[L.sourceColumn]||L.targetColumn})))}s({title:k?"✅ Спасибо за подтверждение":"🔄 Учтем на будущее",description:"ML-алгоритм улучшен"})},he=async()=>{if(o){m("importing"),b(0);try{const S=setInterval(()=>{b(j=>Math.min(j+10,90))},200),k=l.reduce((j,R)=>(R.targetColumn&&(j[R.sourceColumn]=R.targetColumn),j),{});if(await ne.mutateAsync({data:o.rows,columnMapping:l}),clearInterval(S),b(100),s({title:"Импорт завершен",description:`Успешно импортировано ${o.totalRows} строк`}),d){const j=l.reduce((R,M)=>(M.targetColumn&&(R[M.sourceColumn]=M.targetColumn),R),{});xa.saveMapping({sourceColumns:o.headers,targetColumns:n.map(R=>R.column_name),mapping:j,databaseId:t,fileName:d.name,userId:"current-user",successful:!0})}setTimeout(()=>{a==null||a(),E()},1e3)}catch(S){s({title:"Ошибка импорта",description:S instanceof Error?S.message:"Не удалось импортировать данные",variant:"destructive"}),m("preview"),b(0)}}},E=()=>{i(null),c(null),f([]),m("upload"),b(0),r(!1)},N=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:`border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-colors ${p?"border-primary bg-primary/5":"border-gray-300 hover:border-primary/50"}`,onDragEnter:se,onDragLeave:se,onDragOver:se,onDrop:ae,onClick:()=>{var S;return(S=document.getElementById("file-input"))==null?void 0:S.click()},children:[u.jsx(bu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),u.jsx("h3",{className:"text-lg font-medium mb-2",children:"Загрузите файл или перетащите его сюда"}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Поддерживаются форматы: CSV, Excel (XLSX, XLS)"}),u.jsx("p",{className:"text-xs text-gray-400",children:"Максимальный размер: 10MB"}),u.jsx("input",{id:"file-input",type:"file",accept:".csv,.xlsx,.xls",onChange:S=>{var k;return((k=S.target.files)==null?void 0:k[0])&&ue(S.target.files[0])},className:"hidden"})]}),d&&u.jsxs(Ge,{children:[u.jsx(Hd,{className:"h-4 w-4"}),u.jsxs(Be,{children:["Выбран файл: ",d.name," (",(d.size/1024).toFixed(2)," KB)"]})]})]}),A=()=>{if(!o)return null;const S=o.headers.filter(M=>!l.find(W=>W.sourceColumn===M&&W.targetColumn)),k=l.filter(M=>M.confidence&&M.confidence>.8),j=l.filter(M=>M.confidence&&M.confidence>=.5&&M.confidence<=.8),R=l.filter(M=>M.confidence&&M.confidence<.5);return u.jsxs(mu,{defaultValue:"mapping",className:"space-y-4",children:[u.jsxs(hu,{className:"grid w-full grid-cols-2",children:[u.jsxs(ir,{value:"mapping",children:["Сопоставление",k.length>0&&u.jsx(Fe,{variant:"secondary",className:"ml-2",children:k.length})]}),u.jsxs(ir,{value:"quality",children:["Качество данных",x&&u.jsxs(Fe,{variant:x.completeness>.9?"default":"destructive",className:"ml-2",children:[Math.round(x.completeness*100),"%"]})]})]}),u.jsxs(Kt,{value:"mapping",className:"space-y-4",children:[u.jsxs(Ge,{children:[u.jsx(ra,{className:"h-4 w-4"}),u.jsx(Be,{children:G?u.jsx(u.Fragment,{children:"ML-алгоритм автоматически сопоставил колонки. Проверьте и подтвердите маппинг."}):u.jsx(u.Fragment,{children:"Сопоставьте колонки из файла с колонками базы данных."})})]}),G&&u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsxs("div",{className:"border rounded p-2 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.length}),u.jsx("div",{className:"text-xs text-gray-600",children:"Высокая уверенность"})]}),u.jsxs("div",{className:"border rounded p-2 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:j.length}),u.jsx("div",{className:"text-xs text-gray-600",children:"Средняя уверенность"})]}),u.jsxs("div",{className:"border rounded p-2 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-red-600",children:R.length}),u.jsx("div",{className:"text-xs text-gray-600",children:"Низкая уверенность"})]})]}),u.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.headers.map(M=>{const W=l.find(z=>z.sourceColumn===M),ee=I[M],L=(W==null?void 0:W.confidence)||0;return u.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx($d,{className:"h-4 w-4 text-gray-400"}),u.jsx(Ze,{className:"font-medium",children:M}),L>0&&u.jsxs(Fe,{variant:L>.8?"default":L>.5?"secondary":"outline",className:"ml-2",children:[Math.round(L*100),"%"]})]}),u.jsxs(Re,{value:(W==null?void 0:W.targetColumn)||"",onValueChange:z=>{f(Pe=>Pe.find(Z=>Z.sourceColumn===M)?Pe.map(Z=>Z.sourceColumn===M?{...Z,targetColumn:z}:Z):[...Pe,{sourceColumn:M,targetColumn:z,confidence:.8}])},children:[u.jsx(De,{children:u.jsx(Oe,{placeholder:"Не сопоставлено"})}),u.jsxs(Te,{children:[u.jsx(we,{value:"",children:"Не сопоставлено"}),n.map(z=>u.jsxs(we,{value:z.column_name,children:[z.column_name," (",z.column_type,")"]},z.id))]})]})]}),G&&(W==null?void 0:W.targetColumn)&&ee===void 0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-gray-600",children:"Маппинг правильный?"}),u.jsx(F,{size:"sm",variant:"ghost",className:"h-6 px-2",onClick:()=>de(M,!0),children:u.jsx(Xd,{className:"h-3 w-3 text-green-600"})}),u.jsx(F,{size:"sm",variant:"ghost",className:"h-6 px-2",onClick:()=>de(M,!1),children:u.jsx(Qd,{className:"h-3 w-3 text-red-600"})})]}),ee!==void 0&&u.jsx("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:ee?u.jsxs(u.Fragment,{children:[u.jsx(jr,{className:"h-3 w-3 text-green-600"}),u.jsx("span",{children:"Подтверждено"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Jr,{className:"h-3 w-3 text-yellow-600"}),u.jsx("span",{children:"Требует проверки"})]})})]},M)})}),S.length>0&&u.jsxs(Ge,{variant:"destructive",children:[u.jsx(Jr,{className:"h-4 w-4"}),u.jsxs(Be,{children:["Несопоставленные колонки (",S.length,"): ",S.join(", ")]})]})]}),u.jsx(Kt,{value:"quality",className:"space-y-4",children:x&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"border rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Полнота"}),u.jsx(Ad,{className:`h-4 w-4 ${x.completeness>.9?"text-green-600":"text-yellow-600"}`})]}),u.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(x.completeness*100),"%"]}),u.jsx(qr,{value:x.completeness*100,className:"mt-2"})]}),u.jsxs("div",{className:"border rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Уникальность"}),u.jsx(ra,{className:`h-4 w-4 ${x.uniqueness>.9?"text-green-600":"text-yellow-600"}`})]}),u.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(x.uniqueness*100),"%"]}),u.jsx(qr,{value:x.uniqueness*100,className:"mt-2"})]}),u.jsxs("div",{className:"border rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Согласованность"}),u.jsx(jr,{className:`h-4 w-4 ${x.consistency>.9?"text-green-600":"text-yellow-600"}`})]}),u.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(x.consistency*100),"%"]}),u.jsx(qr,{value:x.consistency*100,className:"mt-2"})]})]}),x.warnings.length>0&&u.jsxs(Ge,{children:[u.jsx(Zd,{className:"h-4 w-4"}),u.jsxs(Be,{children:[u.jsx("div",{className:"font-medium mb-2",children:"Обнаружены проблемы с данными:"}),u.jsx("ul",{className:"list-disc list-inside space-y-1",children:x.warnings.slice(0,5).map((M,W)=>u.jsx("li",{className:"text-sm",children:M},W))}),x.warnings.length>5&&u.jsxs("p",{className:"text-sm mt-2 text-gray-600",children:["...и еще ",x.warnings.length-5," предупреждений"]})]})]}),O.length>0&&u.jsxs(Ge,{variant:"destructive",children:[u.jsx(Jr,{className:"h-4 w-4"}),u.jsxs(Be,{children:[u.jsxs("div",{className:"font-medium mb-2",children:["Критические ошибки (",O.length,"):"]}),u.jsx("ul",{className:"list-disc list-inside space-y-1",children:O.slice(0,5).map((M,W)=>u.jsxs("li",{className:"text-sm",children:["Строка ",M.row,": ",M.message]},W))}),O.length>5&&u.jsxs("p",{className:"text-sm mt-2",children:["...и еще ",O.length-5," ошибок"]})]})]}),O.length===0&&x.warnings.length===0&&u.jsxs(Ge,{children:[u.jsx(jr,{className:"h-4 w-4"}),u.jsx(Be,{children:"Данные прошли все проверки качества! Готовы к импорту."})]})]})}),u.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[u.jsx(F,{variant:"outline",onClick:()=>m("upload"),children:"Назад"}),u.jsx(F,{onClick:()=>m("preview"),disabled:l.filter(M=>M.targetColumn).length===0,children:"Далее: Предпросмотр"})]})]})},V=()=>{if(!o)return null;const S=l.filter(j=>j.targetColumn),k=o.rows.slice(0,5);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs(Ge,{children:[u.jsx(jr,{className:"h-4 w-4"}),u.jsxs(Be,{children:["Будет импортировано ",o.totalRows," строк в ",S.length," колонок"]})]}),u.jsx("div",{className:"border rounded-lg overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsx("tr",{children:S.map(j=>u.jsxs("th",{className:"px-4 py-2 text-left font-medium",children:[j.targetColumn,u.jsxs("span",{className:"text-xs text-gray-500 block",children:["(",j.sourceColumn,")"]})]},j.sourceColumn))})}),u.jsx("tbody",{children:k.map((j,R)=>u.jsx("tr",{className:"border-t",children:S.map(M=>u.jsx("td",{className:"px-4 py-2",children:String(j[M.sourceColumn]??"")},M.sourceColumn))},R))})]})})}),o.totalRows>5&&u.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Показано 5 из ",o.totalRows," строк"]}),u.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[u.jsx(F,{variant:"outline",onClick:()=>m("mapping"),children:"Назад"}),u.jsx(F,{onClick:he,children:"Импортировать данные"})]})]})},T=()=>u.jsxs("div",{className:"space-y-4 py-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"mx-auto w-16 h-16 mb-4 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"})}),u.jsx("h3",{className:"text-lg font-medium mb-2",children:"Импорт данных..."}),u.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Пожалуйста, не закрывайте это окно"})]}),u.jsx(qr,{value:h,className:"w-full"}),u.jsxs("p",{className:"text-center text-sm text-gray-600",children:[h,"% завершено"]})]});return u.jsx(fr,{open:e,onOpenChange:E,children:u.jsxs(mr,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[u.jsxs(hr,{children:[u.jsx(pr,{children:"Импорт данных"}),u.jsx(vr,{children:"Загрузите CSV или Excel файл для импорта данных в базу данных"})]}),v==="upload"&&N(),v==="mapping"&&A(),v==="preview"&&V(),v==="importing"&&T()]})})};class h0{constructor(r){this.heuristic_replimit=r}}class p0{constructor(r){this.options=r}isVulnerable(r){return!1}genAttackString(r){return null}}var Ys=function(e,r){let t=null,n=null;try{e instanceof RegExp?t=e:typeof e=="string"?t=new RegExp(e):t=new RegExp(String(e)),n=regexpTree.parse(t)}catch{return!1}let a=0,s=0,d=0;return regexpTree.traverse(n,{Repetition:{pre({node:i}){d++,a++,s<a&&(s=a)},post({node:i}){a--}}}),s<=1&&d<=r};Ys={AnalyzerOptions:h0,Analyzer:p0};var v0={_hasUFlag:!1,shouldRun:function(r){var t=r.flags.includes("s");return t?(r.flags=r.flags.replace("s",""),this._hasUFlag=r.flags.includes("u"),!0):!1},Char:function(r){var t=r.node;if(!(t.kind!=="meta"||t.value!==".")){var n="\\uFFFF",a="￿";this._hasUFlag&&(n="\\u{10FFFF}",a="􏿿"),r.replace({type:"CharacterClass",expressions:[{type:"ClassRange",from:{type:"Char",value:"\\0",kind:"decimal",symbol:"\0"},to:{type:"Char",value:n,kind:"unicode",symbol:a}}]})}}},g0={_groupNames:{},init:function(){this._groupNames={}},getExtra:function(){return this._groupNames},Group:function(r){var t=r.node;t.name&&(this._groupNames[t.name]=t.number,delete t.name,delete t.nameRaw)},Backreference:function(r){var t=r.node;t.kind==="name"&&(t.kind="number",t.reference=t.number,delete t.referenceRaw)}},b0={RegExp:function(r){var t=r.node;t.flags.includes("x")&&(t.flags=t.flags.replace("x",""))}},y0={dotAll:v0,namedCapturingGroups:g0,xFlag:b0};function be(e){return e?x0[e.type](e):""}var x0={RegExp:function(r){return"/"+be(r.body)+"/"+r.flags},Alternative:function(r){return(r.expressions||[]).map(be).join("")},Disjunction:function(r){return be(r.left)+"|"+be(r.right)},Group:function(r){var t=be(r.expression);return r.capturing?r.name?"(?<"+(r.nameRaw||r.name)+">"+t+")":"("+t+")":"(?:"+t+")"},Backreference:function(r){switch(r.kind){case"number":return"\\"+r.reference;case"name":return"\\k<"+(r.referenceRaw||r.reference)+">";default:throw new TypeError("Unknown Backreference kind: "+r.kind)}},Assertion:function(r){switch(r.kind){case"^":case"$":case"\\b":case"\\B":return r.kind;case"Lookahead":{var t=be(r.assertion);return r.negative?"(?!"+t+")":"(?="+t+")"}case"Lookbehind":{var n=be(r.assertion);return r.negative?"(?<!"+n+")":"(?<="+n+")"}default:throw new TypeError("Unknown Assertion kind: "+r.kind)}},CharacterClass:function(r){var t=r.expressions.map(be).join("");return r.negative?"[^"+t+"]":"["+t+"]"},ClassRange:function(r){return be(r.from)+"-"+be(r.to)},Repetition:function(r){return""+be(r.expression)+be(r.quantifier)},Quantifier:function(r){var t=void 0,n=r.greedy?"":"?";switch(r.kind){case"+":case"?":case"*":t=r.kind;break;case"Range":r.from===r.to?t="{"+r.from+"}":r.to?t="{"+r.from+","+r.to+"}":t="{"+r.from+",}";break;default:throw new TypeError("Unknown Quantifier kind: "+r.kind)}return""+t+n},Char:function(r){var t=r.value;switch(r.kind){case"simple":return r.escaped?"\\"+t:t;case"hex":case"unicode":case"oct":case"decimal":case"control":case"meta":return t;default:throw new TypeError("Unknown Char kind: "+r.kind)}},UnicodeProperty:function(r){var t=r.negative?"P":"p",n=void 0;return!r.shorthand&&!r.binary?n=r.name+"=":n="","\\"+t+"{"+n+r.value+"}"}},zs={generate:be},Ln={General_Category:"gc",Script:"sc",Script_Extensions:"scx"},Or=Ct(Ln),_t={ASCII:"ASCII",ASCII_Hex_Digit:"AHex",Alphabetic:"Alpha",Any:"Any",Assigned:"Assigned",Bidi_Control:"Bidi_C",Bidi_Mirrored:"Bidi_M",Case_Ignorable:"CI",Cased:"Cased",Changes_When_Casefolded:"CWCF",Changes_When_Casemapped:"CWCM",Changes_When_Lowercased:"CWL",Changes_When_NFKC_Casefolded:"CWKCF",Changes_When_Titlecased:"CWT",Changes_When_Uppercased:"CWU",Dash:"Dash",Default_Ignorable_Code_Point:"DI",Deprecated:"Dep",Diacritic:"Dia",Emoji:"Emoji",Emoji_Component:"Emoji_Component",Emoji_Modifier:"Emoji_Modifier",Emoji_Modifier_Base:"Emoji_Modifier_Base",Emoji_Presentation:"Emoji_Presentation",Extended_Pictographic:"Extended_Pictographic",Extender:"Ext",Grapheme_Base:"Gr_Base",Grapheme_Extend:"Gr_Ext",Hex_Digit:"Hex",IDS_Binary_Operator:"IDSB",IDS_Trinary_Operator:"IDST",ID_Continue:"IDC",ID_Start:"IDS",Ideographic:"Ideo",Join_Control:"Join_C",Logical_Order_Exception:"LOE",Lowercase:"Lower",Math:"Math",Noncharacter_Code_Point:"NChar",Pattern_Syntax:"Pat_Syn",Pattern_White_Space:"Pat_WS",Quotation_Mark:"QMark",Radical:"Radical",Regional_Indicator:"RI",Sentence_Terminal:"STerm",Soft_Dotted:"SD",Terminal_Punctuation:"Term",Unified_Ideograph:"UIdeo",Uppercase:"Upper",Variation_Selector:"VS",White_Space:"space",XID_Continue:"XIDC",XID_Start:"XIDS"},He=Ct(_t),Fn={Cased_Letter:"LC",Close_Punctuation:"Pe",Connector_Punctuation:"Pc",Control:["Cc","cntrl"],Currency_Symbol:"Sc",Dash_Punctuation:"Pd",Decimal_Number:["Nd","digit"],Enclosing_Mark:"Me",Final_Punctuation:"Pf",Format:"Cf",Initial_Punctuation:"Pi",Letter:"L",Letter_Number:"Nl",Line_Separator:"Zl",Lowercase_Letter:"Ll",Mark:["M","Combining_Mark"],Math_Symbol:"Sm",Modifier_Letter:"Lm",Modifier_Symbol:"Sk",Nonspacing_Mark:"Mn",Number:"N",Open_Punctuation:"Ps",Other:"C",Other_Letter:"Lo",Other_Number:"No",Other_Punctuation:"Po",Other_Symbol:"So",Paragraph_Separator:"Zp",Private_Use:"Co",Punctuation:["P","punct"],Separator:"Z",Space_Separator:"Zs",Spacing_Mark:"Mc",Surrogate:"Cs",Symbol:"S",Titlecase_Letter:"Lt",Unassigned:"Cn",Uppercase_Letter:"Lu"},ot=Ct(Fn),In={Adlam:"Adlm",Ahom:"Ahom",Anatolian_Hieroglyphs:"Hluw",Arabic:"Arab",Armenian:"Armn",Avestan:"Avst",Balinese:"Bali",Bamum:"Bamu",Bassa_Vah:"Bass",Batak:"Batk",Bengali:"Beng",Bhaiksuki:"Bhks",Bopomofo:"Bopo",Brahmi:"Brah",Braille:"Brai",Buginese:"Bugi",Buhid:"Buhd",Canadian_Aboriginal:"Cans",Carian:"Cari",Caucasian_Albanian:"Aghb",Chakma:"Cakm",Cham:"Cham",Cherokee:"Cher",Common:"Zyyy",Coptic:["Copt","Qaac"],Cuneiform:"Xsux",Cypriot:"Cprt",Cyrillic:"Cyrl",Deseret:"Dsrt",Devanagari:"Deva",Dogra:"Dogr",Duployan:"Dupl",Egyptian_Hieroglyphs:"Egyp",Elbasan:"Elba",Ethiopic:"Ethi",Georgian:"Geor",Glagolitic:"Glag",Gothic:"Goth",Grantha:"Gran",Greek:"Grek",Gujarati:"Gujr",Gunjala_Gondi:"Gong",Gurmukhi:"Guru",Han:"Hani",Hangul:"Hang",Hanifi_Rohingya:"Rohg",Hanunoo:"Hano",Hatran:"Hatr",Hebrew:"Hebr",Hiragana:"Hira",Imperial_Aramaic:"Armi",Inherited:["Zinh","Qaai"],Inscriptional_Pahlavi:"Phli",Inscriptional_Parthian:"Prti",Javanese:"Java",Kaithi:"Kthi",Kannada:"Knda",Katakana:"Kana",Kayah_Li:"Kali",Kharoshthi:"Khar",Khmer:"Khmr",Khojki:"Khoj",Khudawadi:"Sind",Lao:"Laoo",Latin:"Latn",Lepcha:"Lepc",Limbu:"Limb",Linear_A:"Lina",Linear_B:"Linb",Lisu:"Lisu",Lycian:"Lyci",Lydian:"Lydi",Mahajani:"Mahj",Makasar:"Maka",Malayalam:"Mlym",Mandaic:"Mand",Manichaean:"Mani",Marchen:"Marc",Medefaidrin:"Medf",Masaram_Gondi:"Gonm",Meetei_Mayek:"Mtei",Mende_Kikakui:"Mend",Meroitic_Cursive:"Merc",Meroitic_Hieroglyphs:"Mero",Miao:"Plrd",Modi:"Modi",Mongolian:"Mong",Mro:"Mroo",Multani:"Mult",Myanmar:"Mymr",Nabataean:"Nbat",New_Tai_Lue:"Talu",Newa:"Newa",Nko:"Nkoo",Nushu:"Nshu",Ogham:"Ogam",Ol_Chiki:"Olck",Old_Hungarian:"Hung",Old_Italic:"Ital",Old_North_Arabian:"Narb",Old_Permic:"Perm",Old_Persian:"Xpeo",Old_Sogdian:"Sogo",Old_South_Arabian:"Sarb",Old_Turkic:"Orkh",Oriya:"Orya",Osage:"Osge",Osmanya:"Osma",Pahawh_Hmong:"Hmng",Palmyrene:"Palm",Pau_Cin_Hau:"Pauc",Phags_Pa:"Phag",Phoenician:"Phnx",Psalter_Pahlavi:"Phlp",Rejang:"Rjng",Runic:"Runr",Samaritan:"Samr",Saurashtra:"Saur",Sharada:"Shrd",Shavian:"Shaw",Siddham:"Sidd",SignWriting:"Sgnw",Sinhala:"Sinh",Sogdian:"Sogd",Sora_Sompeng:"Sora",Soyombo:"Soyo",Sundanese:"Sund",Syloti_Nagri:"Sylo",Syriac:"Syrc",Tagalog:"Tglg",Tagbanwa:"Tagb",Tai_Le:"Tale",Tai_Tham:"Lana",Tai_Viet:"Tavt",Takri:"Takr",Tamil:"Taml",Tangut:"Tang",Telugu:"Telu",Thaana:"Thaa",Thai:"Thai",Tibetan:"Tibt",Tifinagh:"Tfng",Tirhuta:"Tirh",Ugaritic:"Ugar",Vai:"Vaii",Warang_Citi:"Wara",Yi:"Yiii",Zanabazar_Square:"Zanb"},ct=Ct(In);function Ct(e){var r={};for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(Array.isArray(n))for(var a=0;a<n.length;a++)r[n[a]]=t;else r[n]=t}return r}function w0(e){return Ln.hasOwnProperty(e)||Or.hasOwnProperty(e)||_t.hasOwnProperty(e)||He.hasOwnProperty(e)}function _0(e,r){return N0(e)?Ks(r):j0(e)?Qs(r):!1}function C0(e){return Or.hasOwnProperty(e)||He.hasOwnProperty(e)}function N0(e){return e==="General_Category"||e=="gc"}function j0(e){return e==="Script"||e==="Script_Extensions"||e==="sc"||e==="scx"}function Ks(e){return Fn.hasOwnProperty(e)||ot.hasOwnProperty(e)}function Qs(e){return In.hasOwnProperty(e)||ct.hasOwnProperty(e)}function S0(e){return _t.hasOwnProperty(e)||He.hasOwnProperty(e)}function k0(e){return Or.hasOwnProperty(e)?Or[e]:He.hasOwnProperty(e)?He[e]:null}function P0(e){return ot.hasOwnProperty(e)?ot[e]:ct.hasOwnProperty(e)?ct[e]:He.hasOwnProperty(e)?He[e]:null}var M0={isAlias:C0,isValidName:w0,isValidValue:_0,isGeneralCategoryValue:Ks,isScriptCategoryValue:Qs,isBinaryPropertyName:S0,getCanonicalName:k0,getCanonicalValue:P0,NON_BINARY_PROP_NAMES_TO_ALIASES:Ln,NON_BINARY_ALIASES_TO_PROP_NAMES:Or,BINARY_PROP_NAMES_TO_ALIASES:_t,BINARY_ALIASES_TO_PROP_NAMES:He,GENERAL_CATEGORY_VALUE_TO_ALIASES:Fn,GENERAL_CATEGORY_VALUE_ALIASES_TO_VALUES:ot,SCRIPT_VALUE_TO_ALIASES:In,SCRIPT_VALUE_ALIASES_TO_VALUE:ct},E0=function(){function e(r,t){var n=[],a=!0,s=!1,d=void 0;try{for(var i=r[Symbol.iterator](),o;!(a=(o=i.next()).done)&&(n.push(o.value),!(t&&n.length===t));a=!0);}catch(c){s=!0,d=c}finally{try{!a&&i.return&&i.return()}finally{if(s)throw d}}return n}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function Xs(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}var Me=void 0,re={},C=void 0,w=void 0;function P(e,r){return re.options.captureLocations?!e||!r?e||r:{startOffset:e.startOffset,endOffset:r.endOffset,startLine:e.startLine,endLine:r.endLine,startColumn:e.startColumn,endColumn:r.endColumn}:null}var Zs="$",A0=[[-1,1,function(e,r){w=P(r,r),C=e}],[0,4,function(e,r,t,n,a,s,d,i){w=P(a,i),C=X({type:"RegExp",body:r,flags:L0(n)},Hr(a,i||d))}],[1,1,function(e,r){w=P(r,r),C=e}],[1,0,function(){w=null,C=""}],[2,1,function(e,r){w=P(r,r),C=e}],[2,2,function(e,r,t,n){w=P(t,n),C=e+r}],[3,1,function(e,r){w=P(r,r),C=e}],[4,1,function(e,r){w=P(r,r),C=e}],[4,3,function(e,r,t,n,a,s){w=P(n,s);var d=null;a&&(d=Hr(n||a,s||a)),C=X({type:"Disjunction",left:e,right:t},d)}],[5,1,function(e,r){if(w=P(r,r),e.length===0){C=null;return}e.length===1?C=X(e[0],w):C=X({type:"Alternative",expressions:e},w)}],[6,0,function(){w=null,C=[]}],[6,2,function(e,r,t,n){w=P(t,n),C=e.concat(r)}],[7,1,function(e,r){w=P(r,r),C=X(Object.assign({type:"Assertion"},e),w)}],[7,2,function(e,r,t,n){w=P(t,n),C=e,r&&(C=X({type:"Repetition",expression:e,quantifier:r},w))}],[8,1,function(e,r){w=P(r,r),C={kind:"^"}}],[8,1,function(e,r){w=P(r,r),C={kind:"$"}}],[8,1,function(e,r){w=P(r,r),C={kind:"\\b"}}],[8,1,function(e,r){w=P(r,r),C={kind:"\\B"}}],[8,3,function(e,r,t,n,a,s){w=P(n,s),C={kind:"Lookahead",assertion:r}}],[8,3,function(e,r,t,n,a,s){w=P(n,s),C={kind:"Lookahead",negative:!0,assertion:r}}],[8,3,function(e,r,t,n,a,s){w=P(n,s),C={kind:"Lookbehind",assertion:r}}],[8,3,function(e,r,t,n,a,s){w=P(n,s),C={kind:"Lookbehind",negative:!0,assertion:r}}],[9,1,function(e,r){w=P(r,r),C=e}],[9,1,function(e,r){w=P(r,r),C=e}],[9,1,function(e,r){w=P(r,r),C=e}],[10,1,function(e,r){w=P(r,r),C=ce(e,"simple",w)}],[10,1,function(e,r){w=P(r,r),C=ce(e.slice(1),"simple",w),C.escaped=!0}],[10,1,function(e,r){w=P(r,r),C=ce(e,"unicode",w),C.isSurrogatePair=!0}],[10,1,function(e,r){w=P(r,r),C=ce(e,"unicode",w)}],[10,1,function(e,r){w=P(r,r),C=O0(e,w)}],[10,1,function(e,r){w=P(r,r),C=ce(e,"control",w)}],[10,1,function(e,r){w=P(r,r),C=ce(e,"hex",w)}],[10,1,function(e,r){w=P(r,r),C=ce(e,"oct",w)}],[10,1,function(e,r){w=P(r,r),C=F0(e,w)}],[10,1,function(e,r){w=P(r,r),C=ce(e,"meta",w)}],[10,1,function(e,r){w=P(r,r),C=ce(e,"meta",w)}],[10,1,function(e,r){w=P(r,r),C=B0(e,r)}],[11,1,function(e,r){w=P(r,r),C=e}],[11,0],[12,1,function(e,r){w=P(r,r),C=e}],[12,2,function(e,r,t,n){w=P(t,n),e.greedy=!1,C=e}],[13,1,function(e,r){w=P(r,r),C=X({type:"Quantifier",kind:e,greedy:!0},w)}],[13,1,function(e,r){w=P(r,r),C=X({type:"Quantifier",kind:e,greedy:!0},w)}],[13,1,function(e,r){w=P(r,r),C=X({type:"Quantifier",kind:e,greedy:!0},w)}],[13,1,function(e,r){w=P(r,r);var t=Bt(e);C=X({type:"Quantifier",kind:"Range",from:t[0],to:t[0],greedy:!0},w)}],[13,1,function(e,r){w=P(r,r),C=X({type:"Quantifier",kind:"Range",from:Bt(e)[0],greedy:!0},w)}],[13,1,function(e,r){w=P(r,r);var t=Bt(e);C=X({type:"Quantifier",kind:"Range",from:t[0],to:t[1],greedy:!0},w)}],[14,1,function(e,r){w=P(r,r),C=e}],[14,1,function(e,r){w=P(r,r),C=e}],[15,3,function(e,r,t,n,a,s){w=P(n,s);var d=String(e),i=ed(d);if(!re.options.allowGroupNameDuplicates&&Tr.hasOwnProperty(i))throw new SyntaxError('Duplicate of the named group "'+i+'".');Tr[i]=e.groupNumber,C=X({type:"Group",capturing:!0,name:i,nameRaw:d,number:e.groupNumber,expression:r},w)}],[15,3,function(e,r,t,n,a,s){w=P(n,s),C=X({type:"Group",capturing:!0,number:e.groupNumber,expression:r},w)}],[16,3,function(e,r,t,n,a,s){w=P(n,s),C=X({type:"Group",capturing:!1,expression:r},w)}],[17,3,function(e,r,t,n,a,s){w=P(n,s),C=X({type:"CharacterClass",negative:!0,expressions:r},w)}],[17,3,function(e,r,t,n,a,s){w=P(n,s),C=X({type:"CharacterClass",expressions:r},w)}],[18,0,function(){w=null,C=[]}],[18,1,function(e,r){w=P(r,r),C=e}],[19,1,function(e,r){w=P(r,r),C=[e]}],[19,2,function(e,r,t,n){w=P(t,n),C=[e].concat(r)}],[19,4,function(e,r,t,n,a,s,d,i){w=P(a,i),Ca(e,t),C=[X({type:"ClassRange",from:e,to:t},Hr(a,d))],n&&(C=C.concat(n))}],[20,1,function(e,r){w=P(r,r),C=e}],[20,2,function(e,r,t,n){w=P(t,n),C=[e].concat(r)}],[20,4,function(e,r,t,n,a,s,d,i){w=P(a,i),Ca(e,t),C=[X({type:"ClassRange",from:e,to:t},Hr(a,d))],n&&(C=C.concat(n))}],[21,1,function(e,r){w=P(r,r),C=ce(e,"simple",w)}],[21,1,function(e,r){w=P(r,r),C=e}],[22,1,function(e,r){w=P(r,r),C=e}],[22,1,function(e,r){w=P(r,r),C=ce(e,"meta",w)}]],wa={SLASH:"23",CHAR:"24",BAR:"25",BOS:"26",EOS:"27",ESC_b:"28",ESC_B:"29",POS_LA_ASSERT:"30",R_PAREN:"31",NEG_LA_ASSERT:"32",POS_LB_ASSERT:"33",NEG_LB_ASSERT:"34",ESC_CHAR:"35",U_CODE_SURROGATE:"36",U_CODE:"37",U_PROP_VALUE_EXP:"38",CTRL_CH:"39",HEX_CODE:"40",OCT_CODE:"41",DEC_CODE:"42",META_CHAR:"43",ANY:"44",NAMED_GROUP_REF:"45",Q_MARK:"46",STAR:"47",PLUS:"48",RANGE_EXACT:"49",RANGE_OPEN:"50",RANGE_CLOSED:"51",NAMED_CAPTURE_GROUP:"52",L_PAREN:"53",NON_CAPTURE_GROUP:"54",NEG_CLASS:"55",R_BRACKET:"56",L_BRACKET:"57",DASH:"58",$:"59"},Gt=[{0:1,23:"s2"},{59:"acc"},{3:3,4:4,5:5,6:6,23:"r10",24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{23:"s7"},{23:"r6",25:"s12"},{23:"r7",25:"r7",31:"r7"},{7:14,8:15,9:16,10:25,14:27,15:42,16:43,17:26,23:"r9",24:"s28",25:"r9",26:"s17",27:"s18",28:"s19",29:"s20",30:"s21",31:"r9",32:"s22",33:"s23",34:"s24",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",52:"s44",53:"s45",54:"s46",55:"s40",57:"s41"},{1:8,2:9,24:"s10",59:"r3"},{59:"r1"},{24:"s11",59:"r2"},{24:"r4",59:"r4"},{24:"r5",59:"r5"},{5:13,6:6,23:"r10",24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{23:"r8",25:"r8",31:"r8"},{23:"r11",24:"r11",25:"r11",26:"r11",27:"r11",28:"r11",29:"r11",30:"r11",31:"r11",32:"r11",33:"r11",34:"r11",35:"r11",36:"r11",37:"r11",38:"r11",39:"r11",40:"r11",41:"r11",42:"r11",43:"r11",44:"r11",45:"r11",52:"r11",53:"r11",54:"r11",55:"r11",57:"r11"},{23:"r12",24:"r12",25:"r12",26:"r12",27:"r12",28:"r12",29:"r12",30:"r12",31:"r12",32:"r12",33:"r12",34:"r12",35:"r12",36:"r12",37:"r12",38:"r12",39:"r12",40:"r12",41:"r12",42:"r12",43:"r12",44:"r12",45:"r12",52:"r12",53:"r12",54:"r12",55:"r12",57:"r12"},{11:47,12:48,13:49,23:"r38",24:"r38",25:"r38",26:"r38",27:"r38",28:"r38",29:"r38",30:"r38",31:"r38",32:"r38",33:"r38",34:"r38",35:"r38",36:"r38",37:"r38",38:"r38",39:"r38",40:"r38",41:"r38",42:"r38",43:"r38",44:"r38",45:"r38",46:"s52",47:"s50",48:"s51",49:"s53",50:"s54",51:"s55",52:"r38",53:"r38",54:"r38",55:"r38",57:"r38"},{23:"r14",24:"r14",25:"r14",26:"r14",27:"r14",28:"r14",29:"r14",30:"r14",31:"r14",32:"r14",33:"r14",34:"r14",35:"r14",36:"r14",37:"r14",38:"r14",39:"r14",40:"r14",41:"r14",42:"r14",43:"r14",44:"r14",45:"r14",52:"r14",53:"r14",54:"r14",55:"r14",57:"r14"},{23:"r15",24:"r15",25:"r15",26:"r15",27:"r15",28:"r15",29:"r15",30:"r15",31:"r15",32:"r15",33:"r15",34:"r15",35:"r15",36:"r15",37:"r15",38:"r15",39:"r15",40:"r15",41:"r15",42:"r15",43:"r15",44:"r15",45:"r15",52:"r15",53:"r15",54:"r15",55:"r15",57:"r15"},{23:"r16",24:"r16",25:"r16",26:"r16",27:"r16",28:"r16",29:"r16",30:"r16",31:"r16",32:"r16",33:"r16",34:"r16",35:"r16",36:"r16",37:"r16",38:"r16",39:"r16",40:"r16",41:"r16",42:"r16",43:"r16",44:"r16",45:"r16",52:"r16",53:"r16",54:"r16",55:"r16",57:"r16"},{23:"r17",24:"r17",25:"r17",26:"r17",27:"r17",28:"r17",29:"r17",30:"r17",31:"r17",32:"r17",33:"r17",34:"r17",35:"r17",36:"r17",37:"r17",38:"r17",39:"r17",40:"r17",41:"r17",42:"r17",43:"r17",44:"r17",45:"r17",52:"r17",53:"r17",54:"r17",55:"r17",57:"r17"},{4:57,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:59,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:61,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:63,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{23:"r22",24:"r22",25:"r22",26:"r22",27:"r22",28:"r22",29:"r22",30:"r22",31:"r22",32:"r22",33:"r22",34:"r22",35:"r22",36:"r22",37:"r22",38:"r22",39:"r22",40:"r22",41:"r22",42:"r22",43:"r22",44:"r22",45:"r22",46:"r22",47:"r22",48:"r22",49:"r22",50:"r22",51:"r22",52:"r22",53:"r22",54:"r22",55:"r22",57:"r22"},{23:"r23",24:"r23",25:"r23",26:"r23",27:"r23",28:"r23",29:"r23",30:"r23",31:"r23",32:"r23",33:"r23",34:"r23",35:"r23",36:"r23",37:"r23",38:"r23",39:"r23",40:"r23",41:"r23",42:"r23",43:"r23",44:"r23",45:"r23",46:"r23",47:"r23",48:"r23",49:"r23",50:"r23",51:"r23",52:"r23",53:"r23",54:"r23",55:"r23",57:"r23"},{23:"r24",24:"r24",25:"r24",26:"r24",27:"r24",28:"r24",29:"r24",30:"r24",31:"r24",32:"r24",33:"r24",34:"r24",35:"r24",36:"r24",37:"r24",38:"r24",39:"r24",40:"r24",41:"r24",42:"r24",43:"r24",44:"r24",45:"r24",46:"r24",47:"r24",48:"r24",49:"r24",50:"r24",51:"r24",52:"r24",53:"r24",54:"r24",55:"r24",57:"r24"},{23:"r25",24:"r25",25:"r25",26:"r25",27:"r25",28:"r25",29:"r25",30:"r25",31:"r25",32:"r25",33:"r25",34:"r25",35:"r25",36:"r25",37:"r25",38:"r25",39:"r25",40:"r25",41:"r25",42:"r25",43:"r25",44:"r25",45:"r25",46:"r25",47:"r25",48:"r25",49:"r25",50:"r25",51:"r25",52:"r25",53:"r25",54:"r25",55:"r25",56:"r25",57:"r25",58:"r25"},{23:"r26",24:"r26",25:"r26",26:"r26",27:"r26",28:"r26",29:"r26",30:"r26",31:"r26",32:"r26",33:"r26",34:"r26",35:"r26",36:"r26",37:"r26",38:"r26",39:"r26",40:"r26",41:"r26",42:"r26",43:"r26",44:"r26",45:"r26",46:"r26",47:"r26",48:"r26",49:"r26",50:"r26",51:"r26",52:"r26",53:"r26",54:"r26",55:"r26",56:"r26",57:"r26",58:"r26"},{23:"r27",24:"r27",25:"r27",26:"r27",27:"r27",28:"r27",29:"r27",30:"r27",31:"r27",32:"r27",33:"r27",34:"r27",35:"r27",36:"r27",37:"r27",38:"r27",39:"r27",40:"r27",41:"r27",42:"r27",43:"r27",44:"r27",45:"r27",46:"r27",47:"r27",48:"r27",49:"r27",50:"r27",51:"r27",52:"r27",53:"r27",54:"r27",55:"r27",56:"r27",57:"r27",58:"r27"},{23:"r28",24:"r28",25:"r28",26:"r28",27:"r28",28:"r28",29:"r28",30:"r28",31:"r28",32:"r28",33:"r28",34:"r28",35:"r28",36:"r28",37:"r28",38:"r28",39:"r28",40:"r28",41:"r28",42:"r28",43:"r28",44:"r28",45:"r28",46:"r28",47:"r28",48:"r28",49:"r28",50:"r28",51:"r28",52:"r28",53:"r28",54:"r28",55:"r28",56:"r28",57:"r28",58:"r28"},{23:"r29",24:"r29",25:"r29",26:"r29",27:"r29",28:"r29",29:"r29",30:"r29",31:"r29",32:"r29",33:"r29",34:"r29",35:"r29",36:"r29",37:"r29",38:"r29",39:"r29",40:"r29",41:"r29",42:"r29",43:"r29",44:"r29",45:"r29",46:"r29",47:"r29",48:"r29",49:"r29",50:"r29",51:"r29",52:"r29",53:"r29",54:"r29",55:"r29",56:"r29",57:"r29",58:"r29"},{23:"r30",24:"r30",25:"r30",26:"r30",27:"r30",28:"r30",29:"r30",30:"r30",31:"r30",32:"r30",33:"r30",34:"r30",35:"r30",36:"r30",37:"r30",38:"r30",39:"r30",40:"r30",41:"r30",42:"r30",43:"r30",44:"r30",45:"r30",46:"r30",47:"r30",48:"r30",49:"r30",50:"r30",51:"r30",52:"r30",53:"r30",54:"r30",55:"r30",56:"r30",57:"r30",58:"r30"},{23:"r31",24:"r31",25:"r31",26:"r31",27:"r31",28:"r31",29:"r31",30:"r31",31:"r31",32:"r31",33:"r31",34:"r31",35:"r31",36:"r31",37:"r31",38:"r31",39:"r31",40:"r31",41:"r31",42:"r31",43:"r31",44:"r31",45:"r31",46:"r31",47:"r31",48:"r31",49:"r31",50:"r31",51:"r31",52:"r31",53:"r31",54:"r31",55:"r31",56:"r31",57:"r31",58:"r31"},{23:"r32",24:"r32",25:"r32",26:"r32",27:"r32",28:"r32",29:"r32",30:"r32",31:"r32",32:"r32",33:"r32",34:"r32",35:"r32",36:"r32",37:"r32",38:"r32",39:"r32",40:"r32",41:"r32",42:"r32",43:"r32",44:"r32",45:"r32",46:"r32",47:"r32",48:"r32",49:"r32",50:"r32",51:"r32",52:"r32",53:"r32",54:"r32",55:"r32",56:"r32",57:"r32",58:"r32"},{23:"r33",24:"r33",25:"r33",26:"r33",27:"r33",28:"r33",29:"r33",30:"r33",31:"r33",32:"r33",33:"r33",34:"r33",35:"r33",36:"r33",37:"r33",38:"r33",39:"r33",40:"r33",41:"r33",42:"r33",43:"r33",44:"r33",45:"r33",46:"r33",47:"r33",48:"r33",49:"r33",50:"r33",51:"r33",52:"r33",53:"r33",54:"r33",55:"r33",56:"r33",57:"r33",58:"r33"},{23:"r34",24:"r34",25:"r34",26:"r34",27:"r34",28:"r34",29:"r34",30:"r34",31:"r34",32:"r34",33:"r34",34:"r34",35:"r34",36:"r34",37:"r34",38:"r34",39:"r34",40:"r34",41:"r34",42:"r34",43:"r34",44:"r34",45:"r34",46:"r34",47:"r34",48:"r34",49:"r34",50:"r34",51:"r34",52:"r34",53:"r34",54:"r34",55:"r34",56:"r34",57:"r34",58:"r34"},{23:"r35",24:"r35",25:"r35",26:"r35",27:"r35",28:"r35",29:"r35",30:"r35",31:"r35",32:"r35",33:"r35",34:"r35",35:"r35",36:"r35",37:"r35",38:"r35",39:"r35",40:"r35",41:"r35",42:"r35",43:"r35",44:"r35",45:"r35",46:"r35",47:"r35",48:"r35",49:"r35",50:"r35",51:"r35",52:"r35",53:"r35",54:"r35",55:"r35",56:"r35",57:"r35",58:"r35"},{23:"r36",24:"r36",25:"r36",26:"r36",27:"r36",28:"r36",29:"r36",30:"r36",31:"r36",32:"r36",33:"r36",34:"r36",35:"r36",36:"r36",37:"r36",38:"r36",39:"r36",40:"r36",41:"r36",42:"r36",43:"r36",44:"r36",45:"r36",46:"r36",47:"r36",48:"r36",49:"r36",50:"r36",51:"r36",52:"r36",53:"r36",54:"r36",55:"r36",56:"r36",57:"r36",58:"r36"},{10:70,18:65,19:66,21:67,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r54",58:"s68"},{10:70,18:83,19:66,21:67,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r54",58:"s68"},{23:"r47",24:"r47",25:"r47",26:"r47",27:"r47",28:"r47",29:"r47",30:"r47",31:"r47",32:"r47",33:"r47",34:"r47",35:"r47",36:"r47",37:"r47",38:"r47",39:"r47",40:"r47",41:"r47",42:"r47",43:"r47",44:"r47",45:"r47",46:"r47",47:"r47",48:"r47",49:"r47",50:"r47",51:"r47",52:"r47",53:"r47",54:"r47",55:"r47",57:"r47"},{23:"r48",24:"r48",25:"r48",26:"r48",27:"r48",28:"r48",29:"r48",30:"r48",31:"r48",32:"r48",33:"r48",34:"r48",35:"r48",36:"r48",37:"r48",38:"r48",39:"r48",40:"r48",41:"r48",42:"r48",43:"r48",44:"r48",45:"r48",46:"r48",47:"r48",48:"r48",49:"r48",50:"r48",51:"r48",52:"r48",53:"r48",54:"r48",55:"r48",57:"r48"},{4:85,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:87,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:89,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{23:"r13",24:"r13",25:"r13",26:"r13",27:"r13",28:"r13",29:"r13",30:"r13",31:"r13",32:"r13",33:"r13",34:"r13",35:"r13",36:"r13",37:"r13",38:"r13",39:"r13",40:"r13",41:"r13",42:"r13",43:"r13",44:"r13",45:"r13",52:"r13",53:"r13",54:"r13",55:"r13",57:"r13"},{23:"r37",24:"r37",25:"r37",26:"r37",27:"r37",28:"r37",29:"r37",30:"r37",31:"r37",32:"r37",33:"r37",34:"r37",35:"r37",36:"r37",37:"r37",38:"r37",39:"r37",40:"r37",41:"r37",42:"r37",43:"r37",44:"r37",45:"r37",52:"r37",53:"r37",54:"r37",55:"r37",57:"r37"},{23:"r39",24:"r39",25:"r39",26:"r39",27:"r39",28:"r39",29:"r39",30:"r39",31:"r39",32:"r39",33:"r39",34:"r39",35:"r39",36:"r39",37:"r39",38:"r39",39:"r39",40:"r39",41:"r39",42:"r39",43:"r39",44:"r39",45:"r39",46:"s56",52:"r39",53:"r39",54:"r39",55:"r39",57:"r39"},{23:"r41",24:"r41",25:"r41",26:"r41",27:"r41",28:"r41",29:"r41",30:"r41",31:"r41",32:"r41",33:"r41",34:"r41",35:"r41",36:"r41",37:"r41",38:"r41",39:"r41",40:"r41",41:"r41",42:"r41",43:"r41",44:"r41",45:"r41",46:"r41",52:"r41",53:"r41",54:"r41",55:"r41",57:"r41"},{23:"r42",24:"r42",25:"r42",26:"r42",27:"r42",28:"r42",29:"r42",30:"r42",31:"r42",32:"r42",33:"r42",34:"r42",35:"r42",36:"r42",37:"r42",38:"r42",39:"r42",40:"r42",41:"r42",42:"r42",43:"r42",44:"r42",45:"r42",46:"r42",52:"r42",53:"r42",54:"r42",55:"r42",57:"r42"},{23:"r43",24:"r43",25:"r43",26:"r43",27:"r43",28:"r43",29:"r43",30:"r43",31:"r43",32:"r43",33:"r43",34:"r43",35:"r43",36:"r43",37:"r43",38:"r43",39:"r43",40:"r43",41:"r43",42:"r43",43:"r43",44:"r43",45:"r43",46:"r43",52:"r43",53:"r43",54:"r43",55:"r43",57:"r43"},{23:"r44",24:"r44",25:"r44",26:"r44",27:"r44",28:"r44",29:"r44",30:"r44",31:"r44",32:"r44",33:"r44",34:"r44",35:"r44",36:"r44",37:"r44",38:"r44",39:"r44",40:"r44",41:"r44",42:"r44",43:"r44",44:"r44",45:"r44",46:"r44",52:"r44",53:"r44",54:"r44",55:"r44",57:"r44"},{23:"r45",24:"r45",25:"r45",26:"r45",27:"r45",28:"r45",29:"r45",30:"r45",31:"r45",32:"r45",33:"r45",34:"r45",35:"r45",36:"r45",37:"r45",38:"r45",39:"r45",40:"r45",41:"r45",42:"r45",43:"r45",44:"r45",45:"r45",46:"r45",52:"r45",53:"r45",54:"r45",55:"r45",57:"r45"},{23:"r46",24:"r46",25:"r46",26:"r46",27:"r46",28:"r46",29:"r46",30:"r46",31:"r46",32:"r46",33:"r46",34:"r46",35:"r46",36:"r46",37:"r46",38:"r46",39:"r46",40:"r46",41:"r46",42:"r46",43:"r46",44:"r46",45:"r46",46:"r46",52:"r46",53:"r46",54:"r46",55:"r46",57:"r46"},{23:"r40",24:"r40",25:"r40",26:"r40",27:"r40",28:"r40",29:"r40",30:"r40",31:"r40",32:"r40",33:"r40",34:"r40",35:"r40",36:"r40",37:"r40",38:"r40",39:"r40",40:"r40",41:"r40",42:"r40",43:"r40",44:"r40",45:"r40",52:"r40",53:"r40",54:"r40",55:"r40",57:"r40"},{25:"s12",31:"s58"},{23:"r18",24:"r18",25:"r18",26:"r18",27:"r18",28:"r18",29:"r18",30:"r18",31:"r18",32:"r18",33:"r18",34:"r18",35:"r18",36:"r18",37:"r18",38:"r18",39:"r18",40:"r18",41:"r18",42:"r18",43:"r18",44:"r18",45:"r18",52:"r18",53:"r18",54:"r18",55:"r18",57:"r18"},{25:"s12",31:"s60"},{23:"r19",24:"r19",25:"r19",26:"r19",27:"r19",28:"r19",29:"r19",30:"r19",31:"r19",32:"r19",33:"r19",34:"r19",35:"r19",36:"r19",37:"r19",38:"r19",39:"r19",40:"r19",41:"r19",42:"r19",43:"r19",44:"r19",45:"r19",52:"r19",53:"r19",54:"r19",55:"r19",57:"r19"},{25:"s12",31:"s62"},{23:"r20",24:"r20",25:"r20",26:"r20",27:"r20",28:"r20",29:"r20",30:"r20",31:"r20",32:"r20",33:"r20",34:"r20",35:"r20",36:"r20",37:"r20",38:"r20",39:"r20",40:"r20",41:"r20",42:"r20",43:"r20",44:"r20",45:"r20",52:"r20",53:"r20",54:"r20",55:"r20",57:"r20"},{25:"s12",31:"s64"},{23:"r21",24:"r21",25:"r21",26:"r21",27:"r21",28:"r21",29:"r21",30:"r21",31:"r21",32:"r21",33:"r21",34:"r21",35:"r21",36:"r21",37:"r21",38:"r21",39:"r21",40:"r21",41:"r21",42:"r21",43:"r21",44:"r21",45:"r21",52:"r21",53:"r21",54:"r21",55:"r21",57:"r21"},{56:"s72"},{56:"r55"},{10:70,20:73,21:75,22:76,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r56",58:"s74"},{24:"r62",28:"r62",35:"r62",36:"r62",37:"r62",38:"r62",39:"r62",40:"r62",41:"r62",42:"r62",43:"r62",44:"r62",45:"r62",56:"r62",58:"r62"},{24:"r63",28:"r63",35:"r63",36:"r63",37:"r63",38:"r63",39:"r63",40:"r63",41:"r63",42:"r63",43:"r63",44:"r63",45:"r63",56:"r63",58:"r63"},{24:"r64",28:"r64",35:"r64",36:"r64",37:"r64",38:"r64",39:"r64",40:"r64",41:"r64",42:"r64",43:"r64",44:"r64",45:"r64",56:"r64",58:"r64"},{24:"r65",28:"r65",35:"r65",36:"r65",37:"r65",38:"r65",39:"r65",40:"r65",41:"r65",42:"r65",43:"r65",44:"r65",45:"r65",56:"r65",58:"r65"},{23:"r52",24:"r52",25:"r52",26:"r52",27:"r52",28:"r52",29:"r52",30:"r52",31:"r52",32:"r52",33:"r52",34:"r52",35:"r52",36:"r52",37:"r52",38:"r52",39:"r52",40:"r52",41:"r52",42:"r52",43:"r52",44:"r52",45:"r52",46:"r52",47:"r52",48:"r52",49:"r52",50:"r52",51:"r52",52:"r52",53:"r52",54:"r52",55:"r52",57:"r52"},{56:"r57"},{10:70,21:77,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r62",58:"s68"},{56:"r59"},{10:70,20:79,21:75,22:76,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r63",58:"s80"},{10:70,18:78,19:66,21:67,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r54",58:"s68"},{56:"r58"},{56:"r60"},{10:70,21:81,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r62",58:"s68"},{10:70,18:82,19:66,21:67,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r54",58:"s68"},{56:"r61"},{56:"s84"},{23:"r53",24:"r53",25:"r53",26:"r53",27:"r53",28:"r53",29:"r53",30:"r53",31:"r53",32:"r53",33:"r53",34:"r53",35:"r53",36:"r53",37:"r53",38:"r53",39:"r53",40:"r53",41:"r53",42:"r53",43:"r53",44:"r53",45:"r53",46:"r53",47:"r53",48:"r53",49:"r53",50:"r53",51:"r53",52:"r53",53:"r53",54:"r53",55:"r53",57:"r53"},{25:"s12",31:"s86"},{23:"r49",24:"r49",25:"r49",26:"r49",27:"r49",28:"r49",29:"r49",30:"r49",31:"r49",32:"r49",33:"r49",34:"r49",35:"r49",36:"r49",37:"r49",38:"r49",39:"r49",40:"r49",41:"r49",42:"r49",43:"r49",44:"r49",45:"r49",46:"r49",47:"r49",48:"r49",49:"r49",50:"r49",51:"r49",52:"r49",53:"r49",54:"r49",55:"r49",57:"r49"},{25:"s12",31:"s88"},{23:"r50",24:"r50",25:"r50",26:"r50",27:"r50",28:"r50",29:"r50",30:"r50",31:"r50",32:"r50",33:"r50",34:"r50",35:"r50",36:"r50",37:"r50",38:"r50",39:"r50",40:"r50",41:"r50",42:"r50",43:"r50",44:"r50",45:"r50",46:"r50",47:"r50",48:"r50",49:"r50",50:"r50",51:"r50",52:"r50",53:"r50",54:"r50",55:"r50",57:"r50"},{25:"s12",31:"s90"},{23:"r51",24:"r51",25:"r51",26:"r51",27:"r51",28:"r51",29:"r51",30:"r51",31:"r51",32:"r51",33:"r51",34:"r51",35:"r51",36:"r51",37:"r51",38:"r51",39:"r51",40:"r51",41:"r51",42:"r51",43:"r51",44:"r51",45:"r51",46:"r51",47:"r51",48:"r51",49:"r51",50:"r51",51:"r51",52:"r51",53:"r51",54:"r51",55:"r51",57:"r51"}],oe=[],xe=void 0,R0=[[/^#[^\n]+/,function(){}],[/^\s+/,function(){}],[/^-/,function(){return"DASH"}],[/^\//,function(){return"CHAR"}],[/^#/,function(){return"CHAR"}],[/^\|/,function(){return"CHAR"}],[/^\./,function(){return"CHAR"}],[/^\{/,function(){return"CHAR"}],[/^\{\d+\}/,function(){return"RANGE_EXACT"}],[/^\{\d+,\}/,function(){return"RANGE_OPEN"}],[/^\{\d+,\d+\}/,function(){return"RANGE_CLOSED"}],[/^\\k<(([\u0041-\u005a\u0061-\u007a\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4-\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u09fc\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0af9\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60-\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0cf1-\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae-\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5-\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a-\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd-\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5-\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c-\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37-\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4-\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe-\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude35\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd23\udf00-\udf1c\udf27\udf30-\udf45\udfe0-\udff6]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd44\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f-\udf10\udf13-\udf28\udf2a-\udf30\udf32-\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc5f\udc80-\udcaf\udcc4-\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udeb8\udf00-\udf1a]|\ud806[\udc00-\udc2b\udca0-\udcdf\udcff\udda0-\udda7\uddaa-\uddd0\udde1\udde3\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude89\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc72-\udc8f\udd00-\udd06\udd08-\udd09\udd0b-\udd30\udd46\udd60-\udd65\udd67-\udd68\udd6a-\udd89\udd98\udee0-\udef2]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf50\udf93-\udf9f\udfe0-\udfe1\udfe3]|\ud81c[\udc00-\udfff]|\ud81d[\udc00-\udfff]|\ud81e[\udc00-\udfff]|\ud81f[\udc00-\udfff]|\ud820[\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud838[\udd00-\udd2c\udd37-\udd3d\udd4e\udec0-\udeeb]|\ud83a[\udc00-\udcc4\udd00-\udd43\udd4b]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21-\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51-\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61-\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86f[\udc00-\udfff]|\ud870[\udc00-\udfff]|\ud871[\udc00-\udfff]|\ud872[\udc00-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud874[\udc00-\udfff]|\ud875[\udc00-\udfff]|\ud876[\udc00-\udfff]|\ud877[\udc00-\udfff]|\ud878[\udc00-\udfff]|\ud879[\udc00-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d])|[$_]|(\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]{1,}\}))(([\u0030-\u0039\u0041-\u005a\u005f\u0061-\u007a\u00aa\u00b5\u00b7\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376-\u0377\u037a-\u037d\u037f\u0386-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05ef-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u07fd\u0800-\u082d\u0840-\u085b\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u08d3-\u08e1\u08e3-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7-\u09c8\u09cb-\u09ce\u09d7\u09dc-\u09dd\u09df-\u09e3\u09e6-\u09f1\u09fc\u09fe\u0a01-\u0a03\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a3c\u0a3e-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0af9-\u0aff\u0b01-\u0b03\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b5c-\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82-\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c58-\u0c5a\u0c60-\u0c63\u0c66-\u0c6f\u0c80-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1-\u0cf2\u0d00-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d54-\u0d57\u0d5f-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82-\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2-\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18-\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1369-\u1371\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772-\u1773\u1780-\u17d3\u17d7\u17dc-\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1878\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19da\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1cd0-\u1cd2\u1cd4-\u1cfa\u1d00-\u1df9\u1dfb-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua8fd-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabea\uabec-\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2f\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c-\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udca0-\udca9\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37-\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4-\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe-\uddbf\ude00-\ude03\ude05-\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude35\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd27\udd30-\udd39\udf00-\udf1c\udf27\udf30-\udf50\udfe0-\udff6]|\ud804[\udc00-\udc46\udc66-\udc6f\udc7f-\udcba\udcd0-\udce8\udcf0-\udcf9\udd00-\udd34\udd36-\udd3f\udd44-\udd46\udd50-\udd73\udd76\udd80-\uddc4\uddc9-\uddcc\uddd0-\uddda\udddc\ude00-\ude11\ude13-\ude37\ude3e\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udeea\udef0-\udef9\udf00-\udf03\udf05-\udf0c\udf0f-\udf10\udf13-\udf28\udf2a-\udf30\udf32-\udf33\udf35-\udf39\udf3b-\udf44\udf47-\udf48\udf4b-\udf4d\udf50\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc00-\udc4a\udc50-\udc59\udc5e-\udc5f\udc80-\udcc5\udcc7\udcd0-\udcd9\udd80-\uddb5\uddb8-\uddc0\uddd8-\udddd\ude00-\ude40\ude44\ude50-\ude59\ude80-\udeb8\udec0-\udec9\udf00-\udf1a\udf1d-\udf2b\udf30-\udf39]|\ud806[\udc00-\udc3a\udca0-\udce9\udcff\udda0-\udda7\uddaa-\uddd7\uddda-\udde1\udde3-\udde4\ude00-\ude3e\ude47\ude50-\ude99\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc36\udc38-\udc40\udc50-\udc59\udc72-\udc8f\udc92-\udca7\udca9-\udcb6\udd00-\udd06\udd08-\udd09\udd0b-\udd36\udd3a\udd3c-\udd3d\udd3f-\udd47\udd50-\udd59\udd60-\udd65\udd67-\udd68\udd6a-\udd8e\udd90-\udd91\udd93-\udd98\udda0-\udda9\udee0-\udef6]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\ude60-\ude69\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf50-\udf59\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf4f-\udf87\udf8f-\udf9f\udfe0-\udfe1\udfe3]|\ud81c[\udc00-\udfff]|\ud81d[\udc00-\udfff]|\ud81e[\udc00-\udfff]|\ud81f[\udc00-\udfff]|\ud820[\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d-\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb\udfce-\udfff]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud838[\udc00-\udc06\udc08-\udc18\udc1b-\udc21\udc23-\udc24\udc26-\udc2a\udd00-\udd2c\udd30-\udd3d\udd40-\udd49\udd4e\udec0-\udef9]|\ud83a[\udc00-\udcc4\udcd0-\udcd6\udd00-\udd4b\udd50-\udd59]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21-\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51-\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61-\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86f[\udc00-\udfff]|\ud870[\udc00-\udfff]|\ud871[\udc00-\udfff]|\ud872[\udc00-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud874[\udc00-\udfff]|\ud875[\udc00-\udfff]|\ud876[\udc00-\udfff]|\ud877[\udc00-\udfff]|\ud878[\udc00-\udfff]|\ud879[\udc00-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef])|[$_]|(\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]{1,}\})|[\u200c\u200d])*>/,function(){var e=Me.slice(3,-1);return Na(e,this.getCurrentState()),"NAMED_GROUP_REF"}],[/^\\b/,function(){return"ESC_b"}],[/^\\B/,function(){return"ESC_B"}],[/^\\c[a-zA-Z]/,function(){return"CTRL_CH"}],[/^\\0\d{1,2}/,function(){return"OCT_CODE"}],[/^\\0/,function(){return"DEC_CODE"}],[/^\\\d{1,3}/,function(){return"DEC_CODE"}],[/^\\u[dD][89abAB][0-9a-fA-F]{2}\\u[dD][c-fC-F][0-9a-fA-F]{2}/,function(){return"U_CODE_SURROGATE"}],[/^\\u\{[0-9a-fA-F]{1,}\}/,function(){return"U_CODE"}],[/^\\u[0-9a-fA-F]{4}/,function(){return"U_CODE"}],[/^\\[pP]\{\w+(?:=\w+)?\}/,function(){return"U_PROP_VALUE_EXP"}],[/^\\x[0-9a-fA-F]{2}/,function(){return"HEX_CODE"}],[/^\\[tnrdDsSwWvf]/,function(){return"META_CHAR"}],[/^\\\//,function(){return"ESC_CHAR"}],[/^\\[ #]/,function(){return"ESC_CHAR"}],[/^\\[\^\$\.\*\+\?\(\)\\\[\]\{\}\|\/]/,function(){return"ESC_CHAR"}],[/^\\[^*?+\[()\\|]/,function(){var e=this.getCurrentState();if(e==="u_class"&&Me==="\\-")return"ESC_CHAR";if(e==="u"||e==="xu"||e==="u_class")throw new SyntaxError("invalid Unicode escape "+Me);return"ESC_CHAR"}],[/^\(/,function(){return"CHAR"}],[/^\)/,function(){return"CHAR"}],[/^\(\?=/,function(){return"POS_LA_ASSERT"}],[/^\(\?!/,function(){return"NEG_LA_ASSERT"}],[/^\(\?<=/,function(){return"POS_LB_ASSERT"}],[/^\(\?<!/,function(){return"NEG_LB_ASSERT"}],[/^\(\?:/,function(){return"NON_CAPTURE_GROUP"}],[/^\(\?<(([\u0041-\u005a\u0061-\u007a\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4-\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u09fc\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0af9\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60-\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0cf1-\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae-\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5-\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a-\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd-\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5-\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c-\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37-\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4-\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe-\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude35\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd23\udf00-\udf1c\udf27\udf30-\udf45\udfe0-\udff6]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd44\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f-\udf10\udf13-\udf28\udf2a-\udf30\udf32-\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc5f\udc80-\udcaf\udcc4-\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udeb8\udf00-\udf1a]|\ud806[\udc00-\udc2b\udca0-\udcdf\udcff\udda0-\udda7\uddaa-\uddd0\udde1\udde3\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude89\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc72-\udc8f\udd00-\udd06\udd08-\udd09\udd0b-\udd30\udd46\udd60-\udd65\udd67-\udd68\udd6a-\udd89\udd98\udee0-\udef2]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf50\udf93-\udf9f\udfe0-\udfe1\udfe3]|\ud81c[\udc00-\udfff]|\ud81d[\udc00-\udfff]|\ud81e[\udc00-\udfff]|\ud81f[\udc00-\udfff]|\ud820[\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud838[\udd00-\udd2c\udd37-\udd3d\udd4e\udec0-\udeeb]|\ud83a[\udc00-\udcc4\udd00-\udd43\udd4b]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21-\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51-\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61-\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86f[\udc00-\udfff]|\ud870[\udc00-\udfff]|\ud871[\udc00-\udfff]|\ud872[\udc00-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud874[\udc00-\udfff]|\ud875[\udc00-\udfff]|\ud876[\udc00-\udfff]|\ud877[\udc00-\udfff]|\ud878[\udc00-\udfff]|\ud879[\udc00-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d])|[$_]|(\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]{1,}\}))(([\u0030-\u0039\u0041-\u005a\u005f\u0061-\u007a\u00aa\u00b5\u00b7\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376-\u0377\u037a-\u037d\u037f\u0386-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05ef-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u07fd\u0800-\u082d\u0840-\u085b\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u08d3-\u08e1\u08e3-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7-\u09c8\u09cb-\u09ce\u09d7\u09dc-\u09dd\u09df-\u09e3\u09e6-\u09f1\u09fc\u09fe\u0a01-\u0a03\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a3c\u0a3e-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0af9-\u0aff\u0b01-\u0b03\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b5c-\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82-\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c58-\u0c5a\u0c60-\u0c63\u0c66-\u0c6f\u0c80-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1-\u0cf2\u0d00-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d54-\u0d57\u0d5f-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82-\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2-\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18-\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1369-\u1371\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772-\u1773\u1780-\u17d3\u17d7\u17dc-\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1878\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19da\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1cd0-\u1cd2\u1cd4-\u1cfa\u1d00-\u1df9\u1dfb-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua8fd-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabea\uabec-\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2f\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c-\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udca0-\udca9\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37-\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4-\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe-\uddbf\ude00-\ude03\ude05-\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude35\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd27\udd30-\udd39\udf00-\udf1c\udf27\udf30-\udf50\udfe0-\udff6]|\ud804[\udc00-\udc46\udc66-\udc6f\udc7f-\udcba\udcd0-\udce8\udcf0-\udcf9\udd00-\udd34\udd36-\udd3f\udd44-\udd46\udd50-\udd73\udd76\udd80-\uddc4\uddc9-\uddcc\uddd0-\uddda\udddc\ude00-\ude11\ude13-\ude37\ude3e\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udeea\udef0-\udef9\udf00-\udf03\udf05-\udf0c\udf0f-\udf10\udf13-\udf28\udf2a-\udf30\udf32-\udf33\udf35-\udf39\udf3b-\udf44\udf47-\udf48\udf4b-\udf4d\udf50\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc00-\udc4a\udc50-\udc59\udc5e-\udc5f\udc80-\udcc5\udcc7\udcd0-\udcd9\udd80-\uddb5\uddb8-\uddc0\uddd8-\udddd\ude00-\ude40\ude44\ude50-\ude59\ude80-\udeb8\udec0-\udec9\udf00-\udf1a\udf1d-\udf2b\udf30-\udf39]|\ud806[\udc00-\udc3a\udca0-\udce9\udcff\udda0-\udda7\uddaa-\uddd7\uddda-\udde1\udde3-\udde4\ude00-\ude3e\ude47\ude50-\ude99\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc36\udc38-\udc40\udc50-\udc59\udc72-\udc8f\udc92-\udca7\udca9-\udcb6\udd00-\udd06\udd08-\udd09\udd0b-\udd36\udd3a\udd3c-\udd3d\udd3f-\udd47\udd50-\udd59\udd60-\udd65\udd67-\udd68\udd6a-\udd8e\udd90-\udd91\udd93-\udd98\udda0-\udda9\udee0-\udef6]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\ude60-\ude69\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf50-\udf59\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf4f-\udf87\udf8f-\udf9f\udfe0-\udfe1\udfe3]|\ud81c[\udc00-\udfff]|\ud81d[\udc00-\udfff]|\ud81e[\udc00-\udfff]|\ud81f[\udc00-\udfff]|\ud820[\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d-\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb\udfce-\udfff]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud838[\udc00-\udc06\udc08-\udc18\udc1b-\udc21\udc23-\udc24\udc26-\udc2a\udd00-\udd2c\udd30-\udd3d\udd40-\udd49\udd4e\udec0-\udef9]|\ud83a[\udc00-\udcc4\udcd0-\udcd6\udd00-\udd4b\udd50-\udd59]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21-\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51-\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61-\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86f[\udc00-\udfff]|\ud870[\udc00-\udfff]|\ud871[\udc00-\udfff]|\ud872[\udc00-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud874[\udc00-\udfff]|\ud875[\udc00-\udfff]|\ud876[\udc00-\udfff]|\ud877[\udc00-\udfff]|\ud878[\udc00-\udfff]|\ud879[\udc00-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef])|[$_]|(\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]{1,}\})|[\u200c\u200d])*>/,function(){return Me=Me.slice(3,-1),Na(Me,this.getCurrentState()),"NAMED_CAPTURE_GROUP"}],[/^\(/,function(){return"L_PAREN"}],[/^\)/,function(){return"R_PAREN"}],[/^[*?+[^$]/,function(){return"CHAR"}],[/^\\\]/,function(){return"ESC_CHAR"}],[/^\]/,function(){return this.popState(),"R_BRACKET"}],[/^\^/,function(){return"BOS"}],[/^\$/,function(){return"EOS"}],[/^\*/,function(){return"STAR"}],[/^\?/,function(){return"Q_MARK"}],[/^\+/,function(){return"PLUS"}],[/^\|/,function(){return"BAR"}],[/^\./,function(){return"ANY"}],[/^\//,function(){return"SLASH"}],[/^[^*?+\[()\\|]/,function(){return"CHAR"}],[/^\[\^/,function(){var e=this.getCurrentState();return this.pushState(e==="u"||e==="xu"?"u_class":"class"),"NEG_CLASS"}],[/^\[/,function(){var e=this.getCurrentState();return this.pushState(e==="u"||e==="xu"?"u_class":"class"),"L_BRACKET"}]],D0={INITIAL:[8,9,10,11,12,13,14,15,16,17,20,22,23,24,26,27,30,31,32,33,34,35,36,37,41,42,43,44,45,46,47,48,49,50,51],u:[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,30,31,32,33,34,35,36,37,41,42,43,44,45,46,47,48,49,50,51],xu:[0,1,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,30,31,32,33,34,35,36,37,41,42,43,44,45,46,47,48,49,50,51],x:[0,1,8,9,10,11,12,13,14,15,16,17,20,22,23,24,26,27,30,31,32,33,34,35,36,37,41,42,43,44,45,46,47,48,49,50,51],u_class:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],class:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20,22,23,24,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]},_a={type:Zs,value:""};xe={initString:function(r){return this._string=r,this._cursor=0,this._states=["INITIAL"],this._tokensQueue=[],this._currentLine=1,this._currentColumn=0,this._currentLineBeginOffset=0,this._tokenStartOffset=0,this._tokenEndOffset=0,this._tokenStartLine=1,this._tokenEndLine=1,this._tokenStartColumn=0,this._tokenEndColumn=0,this},getStates:function(){return this._states},getCurrentState:function(){return this._states[this._states.length-1]},pushState:function(r){this._states.push(r)},begin:function(r){this.pushState(r)},popState:function(){return this._states.length>1?this._states.pop():this._states[0]},getNextToken:function(){if(this._tokensQueue.length>0)return this.onToken(this._toToken(this._tokensQueue.shift()));if(!this.hasMoreTokens())return this.onToken(_a);for(var r=this._string.slice(this._cursor),t=D0[this.getCurrentState()],n=0;n<t.length;n++){var a=t[n],s=R0[a],d=this._match(r,s[0]);if(r===""&&d===""&&this._cursor++,d!==null){Me=d,Me.length;var i=s[1].call(this);if(!i)return this.getNextToken();if(Array.isArray(i)){var o=i.slice(1);if(i=i[0],o.length>0){var c;(c=this._tokensQueue).unshift.apply(c,Xs(o))}}return this.onToken(this._toToken(i,Me))}}if(this.isEOF())return this._cursor++,_a;this.throwUnexpectedToken(r[0],this._currentLine,this._currentColumn)},throwUnexpectedToken:function(r,t,n){var a=this._string.split(`
`)[t-1],s="";if(a){var d=" ".repeat(n);s=`

`+a+`
`+d+`^
`}throw new SyntaxError(s+'Unexpected token: "'+r+'" '+("at "+t+":"+n+"."))},getCursor:function(){return this._cursor},getCurrentLine:function(){return this._currentLine},getCurrentColumn:function(){return this._currentColumn},_captureLocation:function(r){var t=/\n/g;this._tokenStartOffset=this._cursor,this._tokenStartLine=this._currentLine,this._tokenStartColumn=this._tokenStartOffset-this._currentLineBeginOffset;for(var n=void 0;(n=t.exec(r))!==null;)this._currentLine++,this._currentLineBeginOffset=this._tokenStartOffset+n.index+1;this._tokenEndOffset=this._cursor+r.length,this._tokenEndLine=this._currentLine,this._tokenEndColumn=this._currentColumn=this._tokenEndOffset-this._currentLineBeginOffset},_toToken:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return{type:r,value:t,startOffset:this._tokenStartOffset,endOffset:this._tokenEndOffset,startLine:this._tokenStartLine,endLine:this._tokenEndLine,startColumn:this._tokenStartColumn,endColumn:this._tokenEndColumn}},isEOF:function(){return this._cursor===this._string.length},hasMoreTokens:function(){return this._cursor<=this._string.length},_match:function(r,t){var n=r.match(t);return n?(this._captureLocation(n[0]),this._cursor+=n[0].length,n[0]):null},onToken:function(r){return r}};re.lexer=xe;re.tokenizer=xe;re.options={captureLocations:!0};var Je={setOptions:function(r){return re.options=r,this},getOptions:function(){return re.options},parse:function(r,t){if(!xe)throw new Error("Tokenizer instance wasn't specified.");xe.initString(r);var n=re.options;t&&(re.options=Object.assign({},re.options,t)),Je.onParseBegin(r,xe,re.options),oe.length=0,oe.push(0);var a=xe.getNextToken(),s=null;do{a||(re.options=n,rd());var d=oe[oe.length-1],i=wa[a.type];Gt[d].hasOwnProperty(i)||(re.options=n,ja(a));var o=Gt[d][i];if(o[0]==="s"){var c=null;re.options.captureLocations&&(c={startOffset:a.startOffset,endOffset:a.endOffset,startLine:a.startLine,endLine:a.endLine,startColumn:a.startColumn,endColumn:a.endColumn}),s=this.onShift(a),oe.push({symbol:wa[s.type],semanticValue:s.value,loc:c},Number(o.slice(1))),a=xe.getNextToken()}else if(o[0]==="r"){var l=o.slice(1),f=A0[l],v=typeof f[2]=="function",m=v?[]:null,h=v&&re.options.captureLocations?[]:null;if(f[1]!==0)for(var b=f[1];b-- >0;){oe.pop();var p=oe.pop();v&&(m.unshift(p.semanticValue),h&&h.unshift(p.loc))}var _={symbol:f[0]};if(v){Me=s?s.value:null,s&&s.value.length;var x=h!==null?m.concat(h):m;f[2].apply(f,Xs(x)),_.semanticValue=C,h&&(_.loc=w)}var y=oe[oe.length-1],O=f[0];oe.push(_,Gt[y][O])}else if(o==="acc"){oe.pop();var $=oe.pop();return(oe.length!==1||oe[0]!==0||xe.hasMoreTokens())&&(re.options=n,ja(a)),$.hasOwnProperty("semanticValue")?(re.options=n,Je.onParseEnd($.semanticValue),$.semanticValue):(Je.onParseEnd(),re.options=n,!0)}}while(xe.hasMoreTokens()||oe.length>1)},setTokenizer:function(r){return xe=r,Je},getTokenizer:function(){return xe},onParseBegin:function(r,t,n){},onParseEnd:function(r){},onShift:function(r){return r}},$n=0,Tr={},Js="";Je.onParseBegin=function(e,r){Js=e,$n=0,Tr={};var t=e.lastIndexOf("/"),n=e.slice(t);n.includes("x")&&n.includes("u")?r.pushState("xu"):(n.includes("x")&&r.pushState("x"),n.includes("u")&&r.pushState("u"))};Je.onShift=function(e){return(e.type==="L_PAREN"||e.type==="NAMED_CAPTURE_GROUP")&&(e.value=new String(e.value),e.value.groupNumber=++$n),e};function Bt(e){var r=e.match(/\d+/g).map(Number);if(Number.isFinite(r[1])&&r[1]<r[0])throw new SyntaxError("Numbers out of order in "+e+" quantifier");return r}function Ca(e,r){if(e.kind==="control"||r.kind==="control"||!isNaN(e.codePoint)&&!isNaN(r.codePoint)&&e.codePoint>r.codePoint)throw new SyntaxError("Range "+e.value+"-"+r.value+" out of order in character class")}var dr=M0;function O0(e,r){var t=e[1]==="P",n=e.indexOf("="),a=e.slice(3,n!==-1?n:-1),s=void 0,d=n===-1&&dr.isGeneralCategoryValue(a),i=n===-1&&dr.isBinaryPropertyName(a);if(d)s=a,a="General_Category";else if(i)s=a;else{if(!dr.isValidName(a))throw new SyntaxError("Invalid unicode property name: "+a+".");if(s=e.slice(n+1,-1),!dr.isValidValue(a,s))throw new SyntaxError("Invalid "+a+" unicode property value: "+s+".")}return X({type:"UnicodeProperty",name:a,value:s,negative:t,shorthand:d,binary:i,canonicalName:dr.getCanonicalName(a)||a,canonicalValue:dr.getCanonicalValue(s)||s},r)}function ce(e,r,t){var n=void 0,a=void 0;switch(r){case"decimal":{a=Number(e.slice(1)),n=String.fromCodePoint(a);break}case"oct":{a=parseInt(e.slice(1),8),n=String.fromCodePoint(a);break}case"hex":case"unicode":{if(e.lastIndexOf("\\u")>0){var s=e.split("\\u").slice(1),d=E0(s,2),i=d[0],o=d[1];i=parseInt(i,16),o=parseInt(o,16),a=(i-55296)*1024+(o-56320)+65536,n=String.fromCodePoint(a)}else{var c=e.slice(2).replace("{","");if(a=parseInt(c,16),a>1114111)throw new SyntaxError("Bad character escape sequence: "+e);n=String.fromCodePoint(a)}break}case"meta":{switch(e){case"\\t":n="	",a=n.codePointAt(0);break;case"\\n":n=`
`,a=n.codePointAt(0);break;case"\\r":n="\r",a=n.codePointAt(0);break;case"\\v":n="\v",a=n.codePointAt(0);break;case"\\f":n="\f",a=n.codePointAt(0);break;case"\\b":n="\b",a=n.codePointAt(0);case"\\0":n="\0",a=0;case".":n=".",a=NaN;break;default:a=NaN}break}case"simple":{n=e,a=n.codePointAt(0);break}}return X({type:"Char",value:e,kind:r,symbol:n,codePoint:a},t)}var T0="gimsuxy";function L0(e){var r=new Set,t=!0,n=!1,a=void 0;try{for(var s=e[Symbol.iterator](),d;!(t=(d=s.next()).done);t=!0){var i=d.value;if(r.has(i)||!T0.includes(i))throw new SyntaxError("Invalid flags: "+e);r.add(i)}}catch(o){n=!0,a=o}finally{try{!t&&s.return&&s.return()}finally{if(n)throw a}}return e.split("").sort().join("")}function F0(e,r){var t=Number(e.slice(1));return t>0&&t<=$n?X({type:"Backreference",kind:"number",number:t,reference:t},r):ce(e,"decimal",r)}var I0=/^\\u[0-9a-fA-F]{4}/,$0=/^\\u\{[0-9a-fA-F]{1,}\}/,W0=/\\u\{[0-9a-fA-F]{1,}\}/;function Na(e,r){var t=W0.test(e),n=r==="u"||r==="xu"||r==="u_class";if(t&&!n)throw new SyntaxError('invalid group Unicode name "'+e+'", use `u` flag.');return e}var G0=/\\u(?:([dD][89aAbB][0-9a-fA-F]{2})\\u([dD][c-fC-F][0-9a-fA-F]{2})|([dD][89aAbB][0-9a-fA-F]{2})|([dD][c-fC-F][0-9a-fA-F]{2})|([0-9a-ce-fA-CE-F][0-9a-fA-F]{3}|[dD][0-7][0-9a-fA-F]{2})|\{(0*(?:[0-9a-fA-F]{1,5}|10[0-9a-fA-F]{4}))\})/;function ed(e){return e.replace(new RegExp(G0,"g"),function(r,t,n,a,s,d,i){return t?String.fromCodePoint(parseInt(t,16),parseInt(n,16)):a?String.fromCodePoint(parseInt(a,16)):s?String.fromCodePoint(parseInt(s,16)):d?String.fromCodePoint(parseInt(d,16)):i?String.fromCodePoint(parseInt(i,16)):r})}function B0(e,r){var t=e.slice(3,-1),n=ed(t);if(Tr.hasOwnProperty(n))return X({type:"Backreference",kind:"name",number:Tr[n],reference:n,referenceRaw:t},r);var a=null,s=null,d=null,i=null;r&&(a=r.startOffset,s=r.startLine,d=r.endLine,i=r.startColumn);var o=/^[\w$<>]/,c=void 0,l=[ce(e.slice(1,2),"simple",a?{startLine:s,endLine:d,startColumn:i,startOffset:a,endOffset:a+=2,endColumn:i+=2}:null)];for(l[0].escaped=!0,e=e.slice(2);e.length>0;){var f=null;(f=e.match(I0))||(f=e.match($0))?(a&&(c={startLine:s,endLine:d,startColumn:i,startOffset:a,endOffset:a+=f[0].length,endColumn:i+=f[0].length}),l.push(ce(f[0],"unicode",c)),e=e.slice(f[0].length)):(f=e.match(o))&&(a&&(c={startLine:s,endLine:d,startColumn:i,startOffset:a,endOffset:++a,endColumn:++i}),l.push(ce(f[0],"simple",c)),e=e.slice(1))}return l}function X(e,r){return re.options.captureLocations&&(e.loc={source:Js.slice(r.startOffset,r.endOffset),start:{line:r.startLine,column:r.startColumn,offset:r.startOffset},end:{line:r.endLine,column:r.endColumn,offset:r.endOffset}}),e}function Hr(e,r){return re.options.captureLocations?{startOffset:e.startOffset,endOffset:r.endOffset,startLine:e.startLine,endLine:r.endLine,startColumn:e.startColumn,endColumn:r.endColumn}:null}function ja(e){e.type===Zs&&rd(),xe.throwUnexpectedToken(e.value,e.startLine,e.startColumn)}function rd(){U0("Unexpected end of input.")}function U0(e){throw new SyntaxError(e)}var V0=Je,Lr=V0,q0=Lr.parse.bind(Lr);Lr.parse=function(e,r){return q0(""+e,r)};Lr.setOptions({captureLocations:!1});var Nt=Lr,H0=function(){function e(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function Y0(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Yr="expressions",Sa="expression",Wn=function(){function e(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Y0(this,e),this.node=r,this.parentPath=t,this.parent=t?t.node:null,this.property=n,this.index=a}return H0(e,[{key:"_enforceProp",value:function(t){if(!this.node.hasOwnProperty(t))throw new Error("Node of type "+this.node.type+` doesn't have "`+t+'" collection.')}},{key:"setChild",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=void 0;return n!=null?(a||(a=Yr),this._enforceProp(a),this.node[a][n]=t,s=e.getForNode(t,this,a,n)):(a||(a=Sa),this._enforceProp(a),this.node[a]=t,s=e.getForNode(t,this,a,null)),s}},{key:"appendChild",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;n||(n=Yr),this._enforceProp(n);var a=this.node[n].length;return this.setChild(t,a,n)}},{key:"insertChildAt",value:function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yr;this._enforceProp(a),this.node[a].splice(n,0,t),n<=e.getTraversingIndex()&&e.updateTraversingIndex(1),this._rebuildIndex(this.node,a)}},{key:"remove",value:function(){if(!this.isRemoved()&&(e.registry.delete(this.node),this.node=null,!!this.parent)){if(this.index!==null){this.parent[this.property].splice(this.index,1),this.index<=e.getTraversingIndex()&&e.updateTraversingIndex(-1),this._rebuildIndex(this.parent,this.property),this.index=null,this.property=null;return}delete this.parent[this.property],this.property=null}}},{key:"_rebuildIndex",value:function(t,n){for(var a=e.getForNode(t),s=0;s<t[n].length;s++){var d=e.getForNode(t[n][s],a,n,s);d.index=s}}},{key:"isRemoved",value:function(){return this.node===null}},{key:"replace",value:function(t){return e.registry.delete(this.node),this.node=t,this.parent?(this.index!==null?this.parent[this.property][this.index]=t:this.parent[this.property]=t,e.getForNode(t,this.parentPath,this.property,this.index)):null}},{key:"update",value:function(t){Object.assign(this.node,t)}},{key:"getParent",value:function(){return this.parentPath}},{key:"getChild",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.node.expressions?e.getForNode(this.node.expressions[t],this,Yr,t):this.node.expression&&t==0?e.getForNode(this.node.expression,this,Sa):null}},{key:"hasEqualSource",value:function(t){return JSON.stringify(this.node,Ut)===JSON.stringify(t.node,Ut)}},{key:"jsonEncode",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.format,a=t.useLoc;return JSON.stringify(this.node,a?null:Ut,n)}},{key:"getPreviousSibling",value:function(){return!this.parent||this.index==null?null:e.getForNode(this.parent[this.property][this.index-1],e.getForNode(this.parent),this.property,this.index-1)}},{key:"getNextSibling",value:function(){return!this.parent||this.index==null?null:e.getForNode(this.parent[this.property][this.index+1],e.getForNode(this.parent),this.property,this.index+1)}}],[{key:"getForNode",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1;if(!t)return null;e.registry.has(t)||e.registry.set(t,new e(t,n,a,s==-1?null:s));var d=e.registry.get(t);return n!==null&&(d.parentPath=n,d.parent=d.parentPath.node),a!==null&&(d.property=a),s>=0&&(d.index=s),d}},{key:"initRegistry",value:function(){e.registry||(e.registry=new Map),e.registry.clear()}},{key:"updateTraversingIndex",value:function(t){return e.traversingIndexStack[e.traversingIndexStack.length-1]+=t}},{key:"getTraversingIndex",value:function(){return e.traversingIndexStack[e.traversingIndexStack.length-1]}}]),e}();Wn.initRegistry();Wn.traversingIndexStack=[];function Ut(e,r){if(e!=="loc")return r}var Gn=Wn,cr=Gn;function z0(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.pre,n=r.post,a=r.skipProperty;function s(d,i,o,c){if(!(!d||typeof d.type!="string")){var l=void 0;if(t&&(l=t(d,i,o,c)),l!==!1){i&&i[o]&&(isNaN(c)?d=i[o]:d=i[o][c]);for(var f in d)if(d.hasOwnProperty(f)){if(a?a(f,d):f[0]==="$")continue;var v=d[f];if(Array.isArray(v)){var m=0;for(cr.traversingIndexStack.push(m);m<v.length;)s(v[m],d,f,m),m=cr.updateTraversingIndex(1);cr.traversingIndexStack.pop()}else s(v,d,f)}}n&&n(d,i,o,c)}}s(e,null)}var td={traverse:function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{asNodes:!1};Array.isArray(t)||(t=[t]),t=t.filter(function(s){return typeof s.shouldRun!="function"?!0:s.shouldRun(r)}),cr.initRegistry(),t.forEach(function(s){typeof s.init=="function"&&s.init(r)});function a(s,d,i,o){var c=cr.getForNode(d),l=cr.getForNode(s,c,i,o);return l}z0(r,{pre:function(d,i,o,c){var l=void 0;n.asNodes||(l=a(d,i,o,c));var f=!0,v=!1,m=void 0;try{for(var h=t[Symbol.iterator](),b;!(f=(b=h.next()).done);f=!0){var p=b.value;if(typeof p["*"]=="function")if(l){if(!l.isRemoved()){var _=p["*"](l);if(_===!1)return!1}}else p["*"](d,i,o,c);var x=void 0;if(typeof p[d.type]=="function"?x=p[d.type]:typeof p[d.type]=="object"&&typeof p[d.type].pre=="function"&&(x=p[d.type].pre),x)if(l){if(!l.isRemoved()){var y=x.call(p,l);if(y===!1)return!1}}else x.call(p,d,i,o,c)}}catch(O){v=!0,m=O}finally{try{!f&&h.return&&h.return()}finally{if(v)throw m}}},post:function(d,i,o,c){if(d){var l=void 0;n.asNodes||(l=a(d,i,o,c));var f=!0,v=!1,m=void 0;try{for(var h=t[Symbol.iterator](),b;!(f=(b=h.next()).done);f=!0){var p=b.value,_=void 0;if(typeof p[d.type]=="object"&&typeof p[d.type].post=="function"&&(_=p[d.type].post),_)if(l){if(!l.isRemoved()){var x=_.call(p,l);if(x===!1)return!1}}else _.call(p,d,i,o,c)}}catch(y){v=!0,m=y}finally{try{!f&&h.return&&h.return()}finally{if(v)throw m}}}},skipProperty:function(d){return d==="loc"}})}},K0=function(){function e(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function Q0(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var ka=zs,X0=Nt,Z0=td,Pa=function(){function e(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Q0(this,e),this._ast=r,this._source=null,this._string=null,this._regexp=null,this._extra=t}return K0(e,[{key:"getAST",value:function(){return this._ast}},{key:"setExtra",value:function(t){this._extra=t}},{key:"getExtra",value:function(){return this._extra}},{key:"toRegExp",value:function(){return this._regexp||(this._regexp=new RegExp(this.getSource(),this._ast.flags)),this._regexp}},{key:"getSource",value:function(){return this._source||(this._source=ka.generate(this._ast.body)),this._source}},{key:"getFlags",value:function(){return this._ast.flags}},{key:"toString",value:function(){return this._string||(this._string=ka.generate(this._ast)),this._string}}]),e}(),Bn={TransformResult:Pa,transform:function(r,t){var n=r;return r instanceof RegExp&&(r=""+r),typeof r=="string"&&(n=X0.parse(r,{captureLocations:!0})),Z0.traverse(n,t),new Pa(n)}},zr=y0,J0=Bn,e1={transform:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.length>0?t:Object.keys(zr),a=void 0,s={};return n.forEach(function(d){if(!zr.hasOwnProperty(d))throw new Error("Unknown compat-transform: "+d+". Available transforms are: "+Object.keys(zr).join(", "));var i=zr[d];a=J0.transform(r,i),r=a.getAST(),typeof i.getExtra=="function"&&(s[d]=i.getExtra())}),a.setExtra(s),a}},r1=function e(r){if(r===null||typeof r!="object")return r;var t=void 0;Array.isArray(r)?t=[]:t={};for(var n in r)t[n]=e(r[n]);return t},t1={shouldRun:function(r){return r.flags.includes("u")},Char:function(r){var t=r.node;t.kind!=="unicode"||!t.isSurrogatePair||isNaN(t.codePoint)||(t.value="\\u{"+t.codePoint.toString(16)+"}",delete t.isSurrogatePair)}},Ma="A".codePointAt(0),Ea="Z".codePointAt(0),Aa="a".codePointAt(0),Ra="z".codePointAt(0),Da="0".codePointAt(0),Oa="9".codePointAt(0),n1={Char:function(r){var t=r.node,n=r.parent;if(!(isNaN(t.codePoint)||t.kind==="simple")&&!(n.type==="ClassRange"&&!a1(n))&&u1(t.codePoint)){var a=String.fromCodePoint(t.codePoint),s={type:"Char",kind:"simple",value:a,symbol:a,codePoint:t.codePoint};s1(a,n.type)&&(s.escaped=!0),r.replace(s)}}};function a1(e){var r=e.from,t=e.to;return r.codePoint>=Da&&r.codePoint<=Oa&&t.codePoint>=Da&&t.codePoint<=Oa||r.codePoint>=Ma&&r.codePoint<=Ea&&t.codePoint>=Ma&&t.codePoint<=Ea||r.codePoint>=Aa&&r.codePoint<=Ra&&t.codePoint>=Aa&&t.codePoint<=Ra}function u1(e){return e>=32&&e<=126}function s1(e,r){return r==="ClassRange"||r==="CharacterClass"?/[\]\\^-]/.test(e):/[*[()+?^$./\\|{}]/.test(e)}var Ta="A".codePointAt(0),La="Z".codePointAt(0),d1={_AZClassRanges:null,_hasUFlag:!1,init:function(r){this._AZClassRanges=new Set,this._hasUFlag=r.flags.includes("u")},shouldRun:function(r){return r.flags.includes("i")},Char:function(r){var t=r.node,n=r.parent;if(!isNaN(t.codePoint)&&!(!this._hasUFlag&&t.codePoint>=4096)){if(n.type==="ClassRange"){if(!this._AZClassRanges.has(n)&&!i1(n))return;this._AZClassRanges.add(n)}var a=t.symbol.toLowerCase();a!==t.symbol&&(t.value=o1(a,t),t.symbol=a,t.codePoint=a.codePointAt(0))}}};function i1(e){var r=e.from,t=e.to;return r.codePoint>=Ta&&r.codePoint<=La&&t.codePoint>=Ta&&t.codePoint<=La}function o1(e,r){var t=e.codePointAt(0);if(r.kind==="decimal")return"\\"+t;if(r.kind==="oct")return"\\0"+t.toString(8);if(r.kind==="hex")return"\\x"+t.toString(16);if(r.kind==="unicode")if(r.isSurrogatePair){var n=c1(t),a=n.lead,s=n.trail;return"\\u"+"0".repeat(4-a.length)+a+"\\u"+"0".repeat(4-s.length)+s}else{if(r.value.includes("{"))return"\\u{"+t.toString(16)+"}";var d=t.toString(16);return"\\u"+"0".repeat(4-d.length)+d}return e}function c1(e){var r=Math.floor((e-65536)/1024)+55296,t=(e-65536)%1024+56320;return{lead:r.toString(16),trail:t.toString(16)}}var l1={CharacterClass:function(r){for(var t=r.node,n={},a=0;a<t.expressions.length;a++){var s=r.getChild(a),d=s.jsonEncode();n.hasOwnProperty(d)&&(s.remove(),a--),n[d]=!0}}};function f1(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}function nd(e){if(e.type!=="Disjunction")throw new TypeError('Expected "Disjunction" node, got "'+e.type+'"');var r=[];return e.left&&e.left.type==="Disjunction"?r.push.apply(r,f1(nd(e.left)).concat([e.right])):r.push(e.left,e.right),r}function m1(e){return e.reduce(function(r,t){return{type:"Disjunction",left:r,right:t}})}function h1(e){e.kind==="*"?e.kind="+":e.kind==="+"?(e.kind="Range",e.from=2,delete e.to):e.kind==="?"?(e.kind="Range",e.from=1,e.to=2):e.kind==="Range"&&(e.from+=1,e.to&&(e.to+=1))}var Un={disjunctionToList:nd,listToDisjunction:m1,increaseQuantifierByOne:h1},p1=Un,v1=p1.increaseQuantifierByOne,g1={Repetition:function(r){var t=r.node,n=r.parent;if(!(n.type!=="Alternative"||!r.index)){var a=r.getPreviousSibling();if(a)if(a.node.type==="Repetition"){if(!a.getChild().hasEqualSource(r.getChild()))return;var s=Fa(a.node.quantifier),d=s.from,i=s.to,o=Fa(t.quantifier),c=o.from,l=o.to;if(a.node.quantifier.greedy!==t.quantifier.greedy&&!Kr(a.node.quantifier)&&!Kr(t.quantifier))return;t.quantifier.kind="Range",t.quantifier.from=d+c,i&&l?t.quantifier.to=i+l:delete t.quantifier.to,(Kr(a.node.quantifier)||Kr(t.quantifier))&&(t.quantifier.greedy=!0),a.remove()}else{if(!a.hasEqualSource(r.getChild()))return;v1(t.quantifier),a.remove()}}}};function Kr(e){return e.greedy&&(e.kind==="+"||e.kind==="*"||e.kind==="Range"&&!e.to)}function Fa(e){var r=void 0,t=void 0;return e.kind==="*"?r=0:e.kind==="+"?r=1:e.kind==="?"?(r=0,t=1):(r=e.from,e.to&&(t=e.to)),{from:r,to:t}}var b1={Quantifier:function(r){var t=r.node;t.kind==="Range"&&(y1(r),x1(r),w1(r))}};function y1(e){var r=e.node;r.from!==0||r.to||(r.kind="*",delete r.from)}function x1(e){var r=e.node;r.from!==1||r.to||(r.kind="+",delete r.from)}function w1(e){var r=e.node;r.from!==1||r.to!==1||e.parentPath.replace(e.parentPath.node.expression)}var _1={ClassRange:function(r){var t=r.node;t.from.codePoint===t.to.codePoint?r.replace(t.from):t.from.codePoint===t.to.codePoint-1&&(r.getParent().insertChildAt(t.to,r.index+1),r.replace(t.from))}};function Ia(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}var C1={_hasIFlag:!1,_hasUFlag:!1,init:function(r){this._hasIFlag=r.flags.includes("i"),this._hasUFlag=r.flags.includes("u")},CharacterClass:function(r){N1(r),j1(r,this._hasIFlag,this._hasUFlag),S1(r)}};function N1(e){var r=e.node;r.expressions.forEach(function(t,n){k1(t)&&e.getChild(n).replace({type:"Char",value:"\\d",kind:"meta"})})}function j1(e,r,t){var n=e.node,a=null,s=null,d=null,i=null,o=null,c=null;n.expressions.forEach(function(l,f){Vn(l,"\\d")?a=e.getChild(f):P1(l)?s=e.getChild(f):M1(l)?d=e.getChild(f):E1(l)?i=e.getChild(f):r&&t&&Pr(l,383)?o=e.getChild(f):r&&t&&Pr(l,8490)&&(c=e.getChild(f))}),a&&(s&&d||r&&(s||d))&&i&&(!t||!r||o&&c)&&(a.replace({type:"Char",value:"\\w",kind:"meta"}),s&&s.remove(),d&&d.remove(),i.remove(),o&&o.remove(),c&&c.remove())}var Vt=[function(e){return ad(e," ")}].concat(Ia(["\\f","\\n","\\r","\\t","\\v"].map(function(e){return function(r){return Vn(r,e)}})),Ia([160,5760,8232,8233,8239,8287,12288,65279].map(function(e){return function(r){return Pr(r,e)}})),[function(e){return e.type==="ClassRange"&&Pr(e.from,8192)&&Pr(e.to,8202)}]);function S1(e){var r=e.node;if(!(r.expressions.length<Vt.length||!Vt.every(function(n){return r.expressions.some(function(a){return n(a)})}))){var t=r.expressions.find(function(n){return Vn(n,"\\n")});t.value="\\s",t.symbol=void 0,t.codePoint=NaN,r.expressions.map(function(n,a){return Vt.some(function(s){return s(n)})?e.getChild(a):void 0}).filter(Boolean).forEach(function(n){return n.remove()})}}function k1(e){return e.type==="ClassRange"&&e.from.value==="0"&&e.to.value==="9"}function ad(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"simple";return e.type==="Char"&&e.value===r&&e.kind===t}function Vn(e,r){return ad(e,r,"meta")}function P1(e){return e.type==="ClassRange"&&e.from.value==="a"&&e.to.value==="z"}function M1(e){return e.type==="ClassRange"&&e.from.value==="A"&&e.to.value==="Z"}function E1(e){return e.type==="Char"&&e.value==="_"&&e.kind==="simple"}function Pr(e,r){return e.type==="Char"&&e.kind==="unicode"&&e.codePoint===r}var A1={CharacterClass:function(r){var t=r.node;if(!(t.expressions.length!==1||!T1(r)||!R1(t.expressions[0]))){var n=t.expressions[0],a=n.value,s=n.kind,d=n.escaped;if(t.negative){if(!D1(a))return;a=O1(a)}r.replace({type:"Char",value:a,kind:s,escaped:d||L1(a)})}}};function R1(e){return e.type==="Char"&&e.value!=="\\b"}function D1(e){return/^\\[dwsDWS]$/.test(e)}function O1(e){return/[dws]/.test(e)?e.toUpperCase():e.toLowerCase()}function T1(e){var r=e.parent,t=e.index;if(r.type!=="Alternative")return!0;var n=r.expressions[t-1];return n==null?!0:!(n.type==="Backreference"&&n.kind==="number"||n.type==="Char"&&n.kind==="decimal")}function L1(e){return/[*[()+?$./{}|]/.test(e)}var F1={_hasXFlag:!1,init:function(r){this._hasXFlag=r.flags.includes("x")},Char:function(r){var t=r.node;t.escaped&&I1(r,this._hasXFlag)&&delete t.escaped}};function I1(e,r){var t=e.node.value,n=e.index,a=e.parent;return a.type!=="CharacterClass"&&a.type!=="ClassRange"?!W1(t,n,a,r):!$1(t,n,a)}function $1(e,r,t){return e==="^"?r===0&&!t.negative:e==="-"?!0:/[\]\\]/.test(e)}function W1(e,r,t,n){return e==="{"?G1(r,t):e==="}"?B1(r,t):n&&/[ #]/.test(e)?!0:/[*[()+?^$./\\|]/.test(e)}function lt(e,r,t){for(var n=e,a=(t?n>=0:n<r.expressions.length)&&r.expressions[n];a&&a.type==="Char"&&a.kind==="simple"&&!a.escaped&&/\d/.test(a.value);)t?n--:n++,a=(t?n>=0:n<r.expressions.length)&&r.expressions[n];return Math.abs(e-n)}function lr(e,r){return e&&e.type==="Char"&&e.kind==="simple"&&!e.escaped&&e.value===r}function G1(e,r){if(e==null)return!1;var t=lt(e+1,r),n=e+t+1,a=n<r.expressions.length&&r.expressions[n];if(t){if(lr(a,"}"))return!0;if(lr(a,","))return t=lt(n+1,r),n=n+t+1,a=n<r.expressions.length&&r.expressions[n],lr(a,"}")}return!1}function B1(e,r){if(e==null)return!1;var t=lt(e-1,r,!0),n=e-t-1,a=n>=0&&r.expressions[n];return t&&lr(a,"{")?!0:lr(a,",")?(t=lt(n-1,r,!0),n=n-t-1,a=n<r.expressions.length&&r.expressions[n],t&&lr(a,"{")):!1}var U1={_hasIUFlags:!1,init:function(r){this._hasIUFlags=r.flags.includes("i")&&r.flags.includes("u")},CharacterClass:function(r){var t=r.node,n=t.expressions,a=[];n.forEach(function(o){Ue(o)&&a.push(o.value)}),n.sort(V1);for(var s=0;s<n.length;s++){var d=n[s];if(q1(d,a,this._hasIUFlags)||H1(d,n[s-1])||Y1(d,n[s+1]))n.splice(s,1),s--;else{var i=z1(d,s,n);n.splice(s-i+1,i),s-=i}}}};function V1(e,r){var t=Qr(e),n=Qr(r);if(t===n){if(e.type==="ClassRange"&&r.type!=="ClassRange")return-1;if(r.type==="ClassRange"&&e.type!=="ClassRange")return 1;if(e.type==="ClassRange"&&r.type==="ClassRange")return Qr(e.to)-Qr(r.to);if(Ue(e)&&Ue(r)||$a(e)&&$a(r))return e.value<r.value?-1:1}return t-n}function Qr(e){return e.type==="Char"?e.value==="-"||e.kind==="control"?1/0:e.kind==="meta"&&isNaN(e.codePoint)?-1:e.codePoint:e.from.codePoint}function Ue(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return e.type==="Char"&&e.kind==="meta"&&(r?e.value===r:/^\\[dws]$/i.test(e.value))}function $a(e){return e.type==="Char"&&e.kind==="control"}function q1(e,r,t){for(var n=0;n<r.length;n++)if(nn(e,r[n],t))return!0;return!1}function nn(e,r,t){return e.type==="ClassRange"?nn(e.from,r,t)&&nn(e.to,r,t):r==="\\S"&&(Ue(e,"\\w")||Ue(e,"\\d"))||r==="\\D"&&(Ue(e,"\\W")||Ue(e,"\\s"))||r==="\\w"&&Ue(e,"\\d")||r==="\\W"&&Ue(e,"\\s")?!0:e.type!=="Char"||isNaN(e.codePoint)?!1:r==="\\s"?Wa(e):r==="\\S"?!Wa(e):r==="\\d"?an(e):r==="\\D"?!an(e):r==="\\w"?un(e,t):r==="\\W"?!un(e,t):!1}function Wa(e){return e.codePoint===9||e.codePoint===10||e.codePoint===11||e.codePoint===12||e.codePoint===13||e.codePoint===32||e.codePoint===160||e.codePoint===5760||e.codePoint>=8192&&e.codePoint<=8202||e.codePoint===8232||e.codePoint===8233||e.codePoint===8239||e.codePoint===8287||e.codePoint===12288||e.codePoint===65279}function an(e){return e.codePoint>=48&&e.codePoint<=57}function un(e,r){return an(e)||e.codePoint>=65&&e.codePoint<=90||e.codePoint>=97&&e.codePoint<=122||e.value==="_"||r&&(e.codePoint===383||e.codePoint===8490)}function H1(e,r){if(r&&r.type==="ClassRange"){if(sn(e,r))return!0;if(ft(e)&&r.to.codePoint===e.codePoint-1)return r.to=e,!0;if(e.type==="ClassRange"&&e.from.codePoint<=r.to.codePoint+1&&e.to.codePoint>=r.from.codePoint-1)return e.from.codePoint<r.from.codePoint&&(r.from=e.from),e.to.codePoint>r.to.codePoint&&(r.to=e.to),!0}return!1}function Y1(e,r){return r&&r.type==="ClassRange"&&ft(e)&&r.from.codePoint===e.codePoint+1?(r.from=e,!0):!1}function sn(e,r){return e.type==="Char"&&isNaN(e.codePoint)?!1:e.type==="ClassRange"?sn(e.from,r)&&sn(e.to,r):e.codePoint>=r.from.codePoint&&e.codePoint<=r.to.codePoint}function z1(e,r,t){if(!ft(e))return 0;for(var n=0;r>0;){var a=t[r],s=t[r-1];if(ft(s)&&s.codePoint===a.codePoint-1)n++,r--;else break}return n>1?(t[r]={type:"ClassRange",from:t[r],to:e},n):0}function ft(e){return e&&e.type==="Char"&&!isNaN(e.codePoint)&&(un(e,!1)||e.kind==="unicode"||e.kind==="hex"||e.kind==="oct"||e.kind==="decimal")}var K1=Gn,ud=Un,Q1=ud.disjunctionToList,X1=ud.listToDisjunction,Z1={Disjunction:function(r){var t=r.node,n={},a=Q1(t).filter(function(s){var d=s?K1.getForNode(s).jsonEncode():"null";return n.hasOwnProperty(d)?!1:(n[d]=s,!0)});r.replace(X1(a))}},J1={Disjunction:function(r){var t=r.node,n=r.parent;if(Ga[n.type]){var a=new Map;if(!(!rt(t,a)||!a.size)){var s={type:"CharacterClass",expressions:Array.from(a.keys()).sort().map(function(d){return a.get(d)})};Ga[n.type](r.getParent(),s)}}}},Ga={RegExp:function(r,t){var n=r.node;n.body=t},Group:function(r,t){var n=r.node;n.capturing?n.expression=t:r.replace(t)}};function rt(e,r){if(!e)return!1;var t=e.type;if(t==="Disjunction"){var n=e.left,a=e.right;return rt(n,r)&&rt(a,r)}else if(t==="Char"){if(e.kind==="meta"&&e.symbol===".")return!1;var s=e.value;return r.set(s,e),!0}else if(t==="CharacterClass"&&!e.negative)return e.expressions.every(function(d){return rt(d,r)});return!1}var em={Group:function(r){var t=r.node,n=r.parent,a=r.getChild();t.capturing||a||(n.type==="Repetition"?r.getParent().replace(t):n.type!=="RegExp"&&r.remove())}};function qt(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}var rm={Group:function(r){var t=r.node,n=r.parent,a=r.getChild();if(!(t.capturing||!a)&&tm(r)&&!(a.node.type==="Disjunction"&&n.type!=="RegExp")&&!(n.type==="Repetition"&&a.node.type!=="Char"&&a.node.type!=="CharacterClass"))if(a.node.type==="Alternative"){var s=r.getParent();s.node.type==="Alternative"&&s.replace({type:"Alternative",expressions:[].concat(qt(n.expressions.slice(0,r.index)),qt(a.node.expressions),qt(n.expressions.slice(r.index+1)))})}else r.replace(a.node)}};function tm(e){var r=e.parent,t=e.index;if(r.type!=="Alternative")return!0;var n=r.expressions[t-1];return n==null?!0:!(n.type==="Backreference"&&n.kind==="number"||n.type==="Char"&&n.kind==="decimal")}function mt(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}var ht=Gn,nm=Un,sd=nm.increaseQuantifierByOne,am={Alternative:function(r){for(var t=r.node,n=1;n<t.expressions.length;){var a=r.getChild(n);if(n=Math.max(1,um(r,a,n)),n>=t.expressions.length||(a=r.getChild(n),n=Math.max(1,sm(r,a,n)),n>=t.expressions.length))break;a=r.getChild(n),n=Math.max(1,dm(r,a,n)),n++}}};function um(e,r,t){for(var n=e.node,a=Math.ceil(t/2),s=0;s<a;){var d=t-2*s-1,i=void 0,o=void 0;if(s===0?(i=r,o=e.getChild(d)):(i=ht.getForNode({type:"Alternative",expressions:[].concat(mt(n.expressions.slice(t-s,t)),[r.node])}),o=ht.getForNode({type:"Alternative",expressions:[].concat(mt(n.expressions.slice(d,t-s)))})),i.hasEqualSource(o)){for(var c=0;c<2*s+1;c++)e.getChild(d).remove();return r.replace({type:"Repetition",expression:s===0&&i.node.type!=="Repetition"?i.node:{type:"Group",capturing:!1,expression:i.node},quantifier:{type:"Quantifier",kind:"Range",from:2,to:2,greedy:!0}}),d}s++}return t}function sm(e,r,t){for(var n=e.node,a=0;a<t;){var s=e.getChild(a);if(s.node.type==="Repetition"&&s.node.quantifier.greedy){var d=s.getChild(),i=void 0;if(d.node.type==="Group"&&!d.node.capturing&&(d=d.getChild()),a+1===t?(i=r,i.node.type==="Group"&&!i.node.capturing&&(i=i.getChild())):i=ht.getForNode({type:"Alternative",expressions:[].concat(mt(n.expressions.slice(a+1,t+1)))}),d.hasEqualSource(i)){for(var o=a;o<t;o++)e.getChild(a+1).remove();return sd(s.node.quantifier),a}}a++}return t}function dm(e,r,t){var n=e.node;if(r.node.type==="Repetition"&&r.node.quantifier.greedy){var a=r.getChild(),s=void 0;a.node.type==="Group"&&!a.node.capturing&&(a=a.getChild());var d=void 0;if(a.node.type==="Alternative"?(d=a.node.expressions.length,s=ht.getForNode({type:"Alternative",expressions:[].concat(mt(n.expressions.slice(t-d,t)))})):(d=1,s=e.getChild(t-1),s.node.type==="Group"&&!s.node.capturing&&(s=s.getChild())),s.hasEqualSource(a)){for(var i=t-d;i<t;i++)e.getChild(t-d).remove();return sd(r.node.quantifier),t-d}}return t}var im=new Map([["charSurrogatePairToSingleUnicode",t1],["charCodeToSimpleChar",n1],["charCaseInsensitiveLowerCaseTransform",d1],["charClassRemoveDuplicates",l1],["quantifiersMerge",g1],["quantifierRangeToSymbol",b1],["charClassClassrangesToChars",_1],["charClassToMeta",C1],["charClassToSingleChar",A1],["charEscapeUnescape",F1],["charClassClassrangesMerge",U1],["disjunctionRemoveDuplicates",Z1],["groupSingleCharsToCharClass",J1],["removeEmptyGroup",em],["ungroup",rm],["combineRepeatingPatterns",am]]),Ba=r1,om=Nt,Ua=Bn,Xr=im,cm={optimize:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.whitelist,a=n===void 0?[]:n,s=t.blacklist,d=s===void 0?[]:s,i=a.length>0?a:Array.from(Xr.keys()),o=i.filter(function(v){return!d.includes(v)}),c=r;r instanceof RegExp&&(r=""+r),typeof r=="string"&&(c=om.parse(r));var l=new Ua.TransformResult(c),f=void 0;do f=l.toString(),c=Ba(l.getAST()),o.forEach(function(v){if(!Xr.has(v))throw new Error("Unknown optimization-transform: "+v+". Available transforms are: "+Array.from(Xr.keys()).join(", "));var m=Xr.get(v),h=Ua.transform(c,m);h.toString()!==l.toString()&&(h.toString().length<=l.toString().length?l=h:c=Ba(l.getAST()))});while(l.toString()!==f);return l}},dd="ε",lm=dd+"*",jt={EPSILON:dd,EPSILON_CLOSURE:lm},fm=function(){function e(r,t){var n=[],a=!0,s=!1,d=void 0;try{for(var i=r[Symbol.iterator](),o;!(a=(o=i.next()).done)&&(n.push(o.value),!(t&&n.length===t));a=!0);}catch(c){s=!0,d=c}finally{try{!a&&i.return&&i.return()}finally{if(s)throw d}}return n}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),mm=function(){function e(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function hm(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}function pm(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var id=jt,vm=id.EPSILON,Va=id.EPSILON_CLOSURE,gm=function(){function e(r,t){pm(this,e),this.in=r,this.out=t}return mm(e,[{key:"matches",value:function(t){return this.in.matches(t)}},{key:"getAlphabet",value:function(){if(!this._alphabet){this._alphabet=new Set;var t=this.getTransitionTable();for(var n in t){var a=t[n];for(var s in a)s!==Va&&this._alphabet.add(s)}}return this._alphabet}},{key:"getAcceptingStates",value:function(){return this._acceptingStates||this.getTransitionTable(),this._acceptingStates}},{key:"getAcceptingStateNumbers",value:function(){if(!this._acceptingStateNumbers){this._acceptingStateNumbers=new Set;var t=!0,n=!1,a=void 0;try{for(var s=this.getAcceptingStates()[Symbol.iterator](),d;!(t=(d=s.next()).done);t=!0){var i=d.value;this._acceptingStateNumbers.add(i.number)}}catch(o){n=!0,a=o}finally{try{!t&&s.return&&s.return()}finally{if(n)throw a}}}return this._acceptingStateNumbers}},{key:"getTransitionTable",value:function(){var t=this;if(!this._transitionTable){this._transitionTable={},this._acceptingStates=new Set;var n=new Set,a=new Set,s=function d(i){if(!n.has(i)){n.add(i),i.number=n.size,t._transitionTable[i.number]={},i.accepting&&t._acceptingStates.add(i);var o=i.getTransitions(),c=!0,l=!1,f=void 0;try{for(var v=o[Symbol.iterator](),m;!(c=(m=v.next()).done);c=!0){var h=m.value,b=fm(h,2),p=b[0],_=b[1],x=[];a.add(p);var y=!0,O=!1,$=void 0;try{for(var G=_[Symbol.iterator](),U;!(y=(U=G.next()).done);y=!0){var I=U.value;d(I),x.push(I.number)}}catch(Q){O=!0,$=Q}finally{try{!y&&G.return&&G.return()}finally{if(O)throw $}}t._transitionTable[i.number][p]=x}}catch(Q){l=!0,f=Q}finally{try{!c&&v.return&&v.return()}finally{if(l)throw f}}}};s(this.in),n.forEach(function(d){delete t._transitionTable[d.number][vm],t._transitionTable[d.number][Va]=[].concat(hm(d.getEpsilonClosure())).map(function(i){return i.number})})}return this._transitionTable}}]),e}(),od=gm,bm=function(){function e(r,t){var n=[],a=!0,s=!1,d=void 0;try{for(var i=r[Symbol.iterator](),o;!(a=(o=i.next()).done)&&(n.push(o.value),!(t&&n.length===t));a=!0);}catch(c){s=!0,d=c}finally{try{!a&&i.return&&i.return()}finally{if(s)throw d}}return n}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function ym(e){return Array.isArray(e)?e:Array.from(e)}function dn(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}var Ve=null;function xm(e){var r=e.getTransitionTable(),t=Object.keys(r),n=e.getAlphabet(),a=e.getAcceptingStateNumbers();Ve={};var s=new Set;t.forEach(function(T){T=Number(T);var S=a.has(T);S?Ve[T]=a:(s.add(T),Ve[T]=s)});var d=[[s,a].filter(function(T){return T.size>0})],i=void 0,o=void 0;i=d[d.length-1],o=d[d.length-2];for(var c=function(){var S={},k=!0,j=!1,R=void 0;try{for(var M=i[Symbol.iterator](),W;!(k=(W=M.next()).done);k=!0){var ee=W.value,L={},z=ym(ee),Pe=z[0],kt=z.slice(1);L[Pe]=new Set([Pe]);var Z=!0,Vr=!1,qn=void 0;try{e:for(var Pt=kt[Symbol.iterator](),Hn;!(Z=(Hn=Pt.next()).done);Z=!0){var Cr=Hn.value,Mt=!0,Yn=!1,zn=void 0;try{for(var Et=Object.keys(L)[Symbol.iterator](),Kn;!(Mt=(Kn=Et.next()).done);Mt=!0){var At=Kn.value;if(_m(Cr,At,r,n)){L[At].add(Cr),L[Cr]=L[At];continue e}}}catch(Qe){Yn=!0,zn=Qe}finally{try{!Mt&&Et.return&&Et.return()}finally{if(Yn)throw zn}}L[Cr]=new Set([Cr])}}catch(Qe){Vr=!0,qn=Qe}finally{try{!Z&&Pt.return&&Pt.return()}finally{if(Vr)throw qn}}Object.assign(S,L)}}catch(Qe){j=!0,R=Qe}finally{try{!k&&M.return&&M.return()}finally{if(j)throw R}}Ve=S;var md=new Set(Object.keys(S).map(function(Qe){return S[Qe]}));d.push([].concat(dn(md))),i=d[d.length-1],o=d[d.length-2]};!wm(i,o);)c();var l=new Map,f=1;i.forEach(function(T){return l.set(T,f++)});var v={},m=new Set,h=function(S,k){var j=!0,R=!1,M=void 0;try{for(var W=S[Symbol.iterator](),ee;!(j=(ee=W.next()).done);j=!0){var L=ee.value;a.has(L)&&m.add(k)}}catch(z){R=!0,M=z}finally{try{!j&&W.return&&W.return()}finally{if(R)throw M}}},b=!0,p=!1,_=void 0;try{for(var x=l.entries()[Symbol.iterator](),y;!(b=(y=x.next()).done);b=!0){var O=y.value,$=bm(O,2),G=$[0],U=$[1];v[U]={};var I=!0,Q=!1,Y=void 0;try{for(var ne=n[Symbol.iterator](),se;!(I=(se=ne.next()).done);I=!0){var ue=se.value;h(G,U);var ae=void 0,de=!0,he=!1,E=void 0;try{for(var N=G[Symbol.iterator](),A;!(de=(A=N.next()).done);de=!0){var V=A.value;if(ae=r[V][ue],ae)break}}catch(T){he=!0,E=T}finally{try{!de&&N.return&&N.return()}finally{if(he)throw E}}ae&&(v[U][ue]=l.get(Ve[ae]))}}catch(T){Q=!0,Y=T}finally{try{!I&&ne.return&&ne.return()}finally{if(Q)throw Y}}}}catch(T){p=!0,_=T}finally{try{!b&&x.return&&x.return()}finally{if(p)throw _}}return e.setTransitionTable(v),e.setAcceptingStateNumbers(m),e}function wm(e,r){if(!r||e.length!==r.length)return!1;for(var t=0;t<e.length;t++){var n=e[t],a=r[t];if(n.size!==a.size||[].concat(dn(n)).sort().join(",")!==[].concat(dn(a)).sort().join(","))return!1}return!0}function _m(e,r,t,n){var a=!0,s=!1,d=void 0;try{for(var i=n[Symbol.iterator](),o;!(a=(o=i.next()).done);a=!0){var c=o.value;if(!Cm(e,r,t,c))return!1}}catch(l){s=!0,d=l}finally{try{!a&&i.return&&i.return()}finally{if(s)throw d}}return!0}function Cm(e,r,t,n){if(!Ve[e]||!Ve[r])return!1;var a=t[e][n],s=t[r][n];return!a&&!s?!0:Ve[e].has(a)&&Ve[r].has(s)}var Nm={minimize:xm},jm=function(){function e(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function qa(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}function Sm(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var km=Nm,Pm=jt,Ha=Pm.EPSILON_CLOSURE,Mm=function(){function e(r){Sm(this,e),this._nfa=r}return jm(e,[{key:"minimize",value:function(){this.getTransitionTable(),this._originalAcceptingStateNumbers=this._acceptingStateNumbers,this._originalTransitionTable=this._transitionTable,km.minimize(this)}},{key:"getAlphabet",value:function(){return this._nfa.getAlphabet()}},{key:"getAcceptingStateNumbers",value:function(){return this._acceptingStateNumbers||this.getTransitionTable(),this._acceptingStateNumbers}},{key:"getOriginaAcceptingStateNumbers",value:function(){return this._originalAcceptingStateNumbers||this.getTransitionTable(),this._originalAcceptingStateNumbers}},{key:"setTransitionTable",value:function(t){this._transitionTable=t}},{key:"setAcceptingStateNumbers",value:function(t){this._acceptingStateNumbers=t}},{key:"getTransitionTable",value:function(){var t=this;if(this._transitionTable)return this._transitionTable;var n=this._nfa.getTransitionTable(),a=Object.keys(n);this._acceptingStateNumbers=new Set;for(var s=n[a[0]][Ha],d=[s],i=this.getAlphabet(),o=this._nfa.getAcceptingStateNumbers(),c={},l=function(T){var S=!0,k=!1,j=void 0;try{for(var R=o[Symbol.iterator](),M;!(S=(M=R.next()).done);S=!0){var W=M.value;if(T.indexOf(W)!==-1){t._acceptingStateNumbers.add(T.join(","));break}}}catch(ee){k=!0,j=ee}finally{try{!S&&R.return&&R.return()}finally{if(k)throw j}}};d.length>0;){var f=d.shift(),v=f.join(",");c[v]={};var m=!0,h=!1,b=void 0;try{for(var p=i[Symbol.iterator](),_;!(m=(_=p.next()).done);m=!0){var x=_.value,y=[];l(f);var O=!0,$=!1,G=void 0;try{for(var U=f[Symbol.iterator](),I;!(O=(I=U.next()).done);O=!0){var Q=I.value,Y=n[Q][x];if(Y){var ne=!0,se=!1,ue=void 0;try{for(var ae=Y[Symbol.iterator](),de;!(ne=(de=ae.next()).done);ne=!0){var he=de.value;n[he]&&y.push.apply(y,qa(n[he][Ha]))}}catch(V){se=!0,ue=V}finally{try{!ne&&ae.return&&ae.return()}finally{if(se)throw ue}}}}}catch(V){$=!0,G=V}finally{try{!O&&U.return&&U.return()}finally{if($)throw G}}var E=new Set(y),N=[].concat(qa(E));if(N.length>0){var A=N.join(",");c[v][x]=A,c.hasOwnProperty(A)||d.unshift(N)}}}catch(V){h=!0,b=V}finally{try{!m&&p.return&&p.return()}finally{if(h)throw b}}}return this._transitionTable=this._remapStateNumbers(c)}},{key:"_remapStateNumbers",value:function(t){var n={};this._originalTransitionTable=t;var a={};Object.keys(t).forEach(function(b,p){n[b]=p+1});for(var s in t){var d=t[s],i={};for(var o in d)i[o]=n[d[o]];a[n[s]]=i}this._originalAcceptingStateNumbers=this._acceptingStateNumbers,this._acceptingStateNumbers=new Set;var c=!0,l=!1,f=void 0;try{for(var v=this._originalAcceptingStateNumbers[Symbol.iterator](),m;!(c=(m=v.next()).done);c=!0){var h=m.value;this._acceptingStateNumbers.add(n[h])}}catch(b){l=!0,f=b}finally{try{!c&&v.return&&v.return()}finally{if(l)throw f}}return a}},{key:"getOriginalTransitionTable",value:function(){return this._originalTransitionTable||this.getTransitionTable(),this._originalTransitionTable}},{key:"matches",value:function(t){for(var n=1,a=0,s=this.getTransitionTable();t[a];)if(n=s[n][t[a++]],!n)return!1;return!!this.getAcceptingStateNumbers().has(n)}}]),e}(),Em=Mm,Am=function(){function e(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function Rm(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Dm=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=r.accepting,n=t===void 0?!1:t;Rm(this,e),this._transitions=new Map,this.accepting=n}return Am(e,[{key:"getTransitions",value:function(){return this._transitions}},{key:"addTransition",value:function(t,n){return this.getTransitionsOnSymbol(t).add(n),this}},{key:"getTransitionsOnSymbol",value:function(t){var n=this._transitions.get(t);return n||(n=new Set,this._transitions.set(t,n)),n}}]),e}(),Om=Dm,Tm=function(){function e(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function Lm(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Fm(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Im(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var $m=Om,Wm=jt,Ht=Wm.EPSILON,Gm=function(e){Im(r,e);function r(){return Lm(this,r),Fm(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return Tm(r,[{key:"matches",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;if(a.has(this))return!1;if(a.add(this),n.length===0){if(this.accepting)return!0;var s=!0,d=!1,i=void 0;try{for(var o=this.getTransitionsOnSymbol(Ht)[Symbol.iterator](),c;!(s=(c=o.next()).done);s=!0){var l=c.value;if(l.matches("",a))return!0}}catch(Y){d=!0,i=Y}finally{try{!s&&o.return&&o.return()}finally{if(d)throw i}}return!1}var f=n[0],v=n.slice(1),m=this.getTransitionsOnSymbol(f),h=!0,b=!1,p=void 0;try{for(var _=m[Symbol.iterator](),x;!(h=(x=_.next()).done);h=!0){var y=x.value;if(y.matches(v))return!0}}catch(Y){b=!0,p=Y}finally{try{!h&&_.return&&_.return()}finally{if(b)throw p}}var O=!0,$=!1,G=void 0;try{for(var U=this.getTransitionsOnSymbol(Ht)[Symbol.iterator](),I;!(O=(I=U.next()).done);O=!0){var Q=I.value;if(Q.matches(n,a))return!0}}catch(Y){$=!0,G=Y}finally{try{!O&&U.return&&U.return()}finally{if($)throw G}}return!1}},{key:"getEpsilonClosure",value:function(){var n=this;return this._epsilonClosure||function(){var a=n.getTransitionsOnSymbol(Ht),s=n._epsilonClosure=new Set;s.add(n);var d=!0,i=!1,o=void 0;try{for(var c=a[Symbol.iterator](),l;!(d=(l=c.next()).done);d=!0){var f=l.value;if(!s.has(f)){s.add(f);var v=f.getEpsilonClosure();v.forEach(function(m){return s.add(m)})}}}catch(m){i=!0,o=m}finally{try{!d&&c.return&&c.return()}finally{if(i)throw o}}}(),this._epsilonClosure}}]),r}($m),Bm=Gm,St=od,yr=Bm,Um=jt,ve=Um.EPSILON;function cd(e){var r=new yr,t=new yr({accepting:!0});return new St(r.addTransition(e,t),t)}function Vm(){return cd(ve)}function qm(e,r){return e.out.accepting=!1,r.out.accepting=!0,e.out.addTransition(ve,r.in),new St(e.in,r.out)}function Hm(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];var a=!0,s=!1,d=void 0;try{for(var i=t[Symbol.iterator](),o;!(a=(o=i.next()).done);a=!0){var c=o.value;e=qm(e,c)}}catch(l){s=!0,d=l}finally{try{!a&&i.return&&i.return()}finally{if(s)throw d}}return e}function Ym(e,r){var t=new yr,n=new yr;return t.addTransition(ve,e.in),t.addTransition(ve,r.in),n.accepting=!0,e.out.accepting=!1,r.out.accepting=!1,e.out.addTransition(ve,n),r.out.addTransition(ve,n),new St(t,n)}function zm(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];var a=!0,s=!1,d=void 0;try{for(var i=t[Symbol.iterator](),o;!(a=(o=i.next()).done);a=!0){var c=o.value;e=Ym(e,c)}}catch(l){s=!0,d=l}finally{try{!a&&i.return&&i.return()}finally{if(s)throw d}}return e}function Km(e){var r=new yr,t=new yr({accepting:!0});return r.addTransition(ve,e.in),r.addTransition(ve,t),e.out.accepting=!1,e.out.addTransition(ve,t),t.addTransition(ve,e.in),new St(r,t)}function Qm(e){return e.in.addTransition(ve,e.out),e.out.addTransition(ve,e.in),e}function Xm(e){return e.out.addTransition(ve,e.in),e}function Zm(e){return e.in.addTransition(ve,e.out),e}var ld={alt:Hm,char:cd,e:Vm,or:zm,rep:Qm,repExplicit:Km,plusRep:Xm,questionRep:Zm};function Jm(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}var eh=Nt,_r=ld,rh=_r.alt,th=_r.char,nh=_r.or,ah=_r.rep,uh=_r.plusRep,sh=_r.questionRep;function We(e){if(e&&!Ya[e.type])throw new Error(e.type+" is not supported in NFA/DFA interpreter.");return e?Ya[e.type](e):""}var Ya={RegExp:function(r){if(r.flags!=="")throw new Error("NFA/DFA: Flags are not supported yet.");return We(r.body)},Alternative:function(r){var t=(r.expressions||[]).map(We);return rh.apply(void 0,Jm(t))},Disjunction:function(r){return nh(We(r.left),We(r.right))},Repetition:function(r){switch(r.quantifier.kind){case"*":return ah(We(r.expression));case"+":return uh(We(r.expression));case"?":return sh(We(r.expression));default:throw new Error("Unknown repeatition: "+r.quantifier.kind+".")}},Char:function(r){if(r.kind!=="simple")throw new Error("NFA/DFA: Only simple chars are supported yet.");return th(r.value)},Group:function(r){return We(r.expression)}},dh={build:function(r){var t=r;return r instanceof RegExp&&(r=""+r),typeof r=="string"&&(t=eh.parse(r,{captureLocations:!0})),We(t)}},ih=od,za=Em,oh=dh,ch=ld,lh={NFA:ih,DFA:za,builders:ch,toNFA:function(r){return oh.build(r)},toDFA:function(r){return new za(this.toNFA(r))},test:function(r,t){return this.toDFA(r).matches(t)}},fh=function(){function e(r,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function mh(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var hh=function(){function e(r,t){var n=t.flags,a=t.groups,s=t.source;mh(this,e),this._re=r,this._groups=a,this.flags=n,this.source=s||r.source,this.dotAll=n.includes("s"),this.global=r.global,this.ignoreCase=r.ignoreCase,this.multiline=r.multiline,this.sticky=r.sticky,this.unicode=r.unicode}return fh(e,[{key:"test",value:function(t){return this._re.test(t)}},{key:"compile",value:function(t){return this._re.compile(t)}},{key:"toString",value:function(){return this._toStringResult||(this._toStringResult="/"+this.source+"/"+this.flags),this._toStringResult}},{key:"exec",value:function(t){var n=this._re.exec(t);if(!this._groups||!n)return n;n.groups={};for(var a in this._groups){var s=this._groups[a];n.groups[a]=n[s]}return n}}]),e}(),ph={RegExpTree:hh},vh=e1,gh=zs,bh=cm,Ka=Nt,Qa=Bn,yh=td,xh=lh,wh=ph,_h=wh.RegExpTree,Ch={parser:Ka,fa:xh,TransformResult:Qa.TransformResult,parse:function(r,t){return Ka.parse(""+r,t)},traverse:function(r,t,n){return yh.traverse(r,t,n)},transform:function(r,t){return Qa.transform(r,t)},generate:function(r){return gh.generate(r)},toRegExp:function(r){var t=this.compatTranspile(r);return new RegExp(t.getSource(),t.getFlags())},optimize:function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.blacklist;return bh.optimize(r,{whitelist:t,blacklist:a})},compatTranspile:function(r,t){return vh.transform(r,t)},exec:function(r,t){if(typeof r=="string"){var n=this.compatTranspile(r),a=n.getExtra();a.namedCapturingGroups?r=new _h(n.toRegExp(),{flags:n.getFlags(),source:n.getSource(),groups:a.namedCapturingGroups}):r=n.toRegExp()}return r.exec(t)}},Nh=Ch,jh=Nh;const Zr=jh,Sh=Ys;class Wh extends Sh.Analyzer{constructor(r){super(r)}isVulnerable(r){return this._measureStarHeight(r)>1||this._measureRepetitions(r)>this.options.heuristic_replimit}genAttackString(r){return null}_measureStarHeight(r){let t=0,n=0;const a=Zr.parse(r);return Zr.traverse(a,{Repetition:{pre({node:s}){t++,n<t&&(n=t)},post({node:s}){t--}}}),n}_measureRepetitions(r){let t=0;const n=Zr.parse(r);return Zr.traverse(n,{Repetition:{pre({node:a}){t++}}}),t}}function fd(e){const r=[];let t=0;for(;t<e.length;){const n=e[t];if(/\s/.test(n)){t++;continue}if(/\d/.test(n)){let a="";for(;t<e.length&&/[\d.]/.test(e[t]);)a+=e[t],t++;r.push({type:"number",value:parseFloat(a)});continue}if(n==='"'||n==="'"){const a=n;let s="";for(t++;t<e.length&&e[t]!==a;)e[t]==="\\"&&t+1<e.length&&t++,s+=e[t],t++;t++,r.push({type:"string",value:s});continue}if("+-*/^%=<>!".includes(n)){let a=n;t++,t<e.length&&"=<>".includes(e[t])&&(a+=e[t],t++),r.push({type:"operator",value:a});continue}if("()".includes(n)){r.push({type:"paren",value:n}),t++;continue}if(n===","){t++;continue}if(/[a-zA-Z_]/.test(n)){let a="";for(;t<e.length&&/[a-zA-Z0-9_]/.test(e[t]);)a+=e[t],t++;t<e.length&&e[t]==="("?r.push({type:"function",value:a}):a==="true"||a==="false"?r.push({type:"boolean",value:a==="true"}):r.push({type:"identifier",value:a});continue}t++}return r}function kh(e){const r=[];(!e.expression||e.expression.trim()==="")&&r.push("Выражение формулы не может быть пустым");try{fd(e.expression)}catch(t){r.push(`Ошибка парсинга: ${t instanceof Error?t.message:"Неизвестная ошибка"}`)}if(e.dependencies&&e.dependencies.length>0){const t=Ph(e.expression),n=e.dependencies.filter(s=>!t.includes(s));n.length>0&&r.push(`Неиспользуемые зависимости: ${n.join(", ")}`);const a=t.filter(s=>!e.dependencies.includes(s));a.length>0&&r.push(`Отсутствующие зависимости: ${a.join(", ")}`)}return{isValid:r.length===0,errors:r}}function Ph(e){const r=fd(e),t=new Set;for(const n of r)n.type==="identifier"&&t.add(n.value);return Array.from(t)}const Yt=[{name:"abs",category:"math",description:"Возвращает абсолютное значение числа",params:[{name:"number",type:"number",optional:!1}],examples:["abs(-5) => 5","abs({price}) => абсолютное значение цены"]},{name:"round",category:"math",description:"Округляет число до ближайшего целого",params:[{name:"number",type:"number",optional:!1}],examples:["round(3.7) => 4","round({price}) => округленная цена"]},{name:"ceil",category:"math",description:"Округляет число вверх",params:[{name:"number",type:"number",optional:!1}],examples:["ceil(3.2) => 4"]},{name:"floor",category:"math",description:"Округляет число вниз",params:[{name:"number",type:"number",optional:!1}],examples:["floor(3.9) => 3"]},{name:"sum",category:"math",description:"Суммирует все аргументы",params:[{name:"numbers",type:"number",optional:!1}],examples:["sum(1, 2, 3) => 6","sum({price}, {tax}) => сумма"]},{name:"avg",category:"math",description:"Вычисляет среднее значение",params:[{name:"numbers",type:"number",optional:!1}],examples:["avg(1, 2, 3) => 2"]},{name:"min",category:"math",description:"Возвращает минимальное значение",params:[{name:"numbers",type:"number",optional:!1}],examples:["min(1, 2, 3) => 1"]},{name:"max",category:"math",description:"Возвращает максимальное значение",params:[{name:"numbers",type:"number",optional:!1}],examples:["max(1, 2, 3) => 3"]},{name:"pow",category:"math",description:"Возводит число в степень",params:[{name:"base",type:"number",optional:!1},{name:"exponent",type:"number",optional:!1}],examples:["pow(2, 3) => 8"]},{name:"sqrt",category:"math",description:"Извлекает квадратный корень",params:[{name:"number",type:"number",optional:!1}],examples:["sqrt(9) => 3"]},{name:"upper",category:"string",description:"Преобразует строку в верхний регистр",params:[{name:"string",type:"string",optional:!1}],examples:['upper("hello") => "HELLO"',"upper({name}) => ИМЯ БОЛЬШИМИ БУКВАМИ"]},{name:"lower",category:"string",description:"Преобразует строку в нижний регистр",params:[{name:"string",type:"string",optional:!1}],examples:['lower("HELLO") => "hello"']},{name:"concat",category:"string",description:"Объединяет строки",params:[{name:"strings",type:"string",optional:!1}],examples:['concat("Hello", " ", "World") => "Hello World"','concat({first_name}, " ", {last_name})']},{name:"trim",category:"string",description:"Удаляет пробелы в начале и конце строки",params:[{name:"string",type:"string",optional:!1}],examples:['trim("  hello  ") => "hello"']},{name:"substring",category:"string",description:"Извлекает подстроку",params:[{name:"string",type:"string",optional:!1},{name:"start",type:"number",optional:!1},{name:"end",type:"number",optional:!0}],examples:['substring("hello", 0, 3) => "hel"']},{name:"replace",category:"string",description:"Заменяет текст в строке",params:[{name:"string",type:"string",optional:!1},{name:"search",type:"string",optional:!1},{name:"replace",type:"string",optional:!1}],examples:['replace("hello world", "world", "there") => "hello there"']},{name:"length",category:"string",description:"Возвращает длину строки",params:[{name:"string",type:"string",optional:!1}],examples:['length("hello") => "5"']},{name:"now",category:"date",description:"Возвращает текущую дату и время",params:[],examples:["now() => 2024-01-01 12:00:00"]},{name:"today",category:"date",description:"Возвращает сегодняшнюю дату (без времени)",params:[],examples:["today() => 2024-01-01"]},{name:"year",category:"date",description:"Извлекает год из даты",params:[{name:"date",type:"date",optional:!1}],examples:["year({created_date}) => 2024"]},{name:"month",category:"date",description:"Извлекает месяц из даты",params:[{name:"date",type:"date",optional:!1}],examples:["month({created_date}) => 1"]},{name:"day",category:"date",description:"Извлекает день из даты",params:[{name:"date",type:"date",optional:!1}],examples:["day({created_date}) => 15"]},{name:"dateDiff",category:"date",description:"Вычисляет разницу между датами в днях",params:[{name:"date1",type:"date",optional:!1},{name:"date2",type:"date",optional:!1}],examples:["dateDiff({due_date}, today()) => 7"]},{name:"dateAdd",category:"date",description:"Добавляет дни к дате",params:[{name:"date",type:"date",optional:!1},{name:"days",type:"number",optional:!1}],examples:["dateAdd(today(), 7) => дата через 7 дней"]},{name:"formatDate",category:"date",description:"Форматирует дату",params:[{name:"date",type:"date",optional:!1},{name:"format",type:"string",optional:!1}],examples:['formatDate({date}, "YYYY-MM-DD") => "2024-01-01"']},{name:"if",category:"logical",description:"Условное выражение",params:[{name:"condition",type:"boolean",optional:!1},{name:"valueIfTrue",type:"any",optional:!1},{name:"valueIfFalse",type:"any",optional:!1}],examples:['if({price} > 100, "Дорого", "Дешево")']},{name:"and",category:"logical",description:"Логическое И",params:[{name:"conditions",type:"boolean",optional:!1}],examples:["and({active}, {verified}) => true если оба true"]},{name:"or",category:"logical",description:"Логическое ИЛИ",params:[{name:"conditions",type:"boolean",optional:!1}],examples:["or({active}, {verified}) => true если хотя бы один true"]},{name:"not",category:"logical",description:"Логическое НЕ",params:[{name:"condition",type:"boolean",optional:!1}],examples:["not({active}) => инвертирует значение"]},{name:"isNull",category:"logical",description:"Проверяет на null",params:[{name:"value",type:"any",optional:!1}],examples:["isNull({optional_field}) => true если null"]},{name:"isEmpty",category:"logical",description:"Проверяет на пустоту",params:[{name:"value",type:"any",optional:!1}],examples:["isEmpty({name}) => true если пусто"]}],Mh=({open:e,onOpenChange:r,formula:t,onSave:n,columns:a})=>{const[s,d]=g.useState(t),[i,o]=g.useState(null),c=g.useMemo(()=>{if(!s.trim())return{isValid:!0,errors:[]};try{const h=a.map(_=>_.column_name);return kh({expression:s,return_type:"text",dependencies:h})}catch(h){return{isValid:!1,errors:[h instanceof Error?h.message:"Неизвестная ошибка"]}}},[s,a]),l=()=>{c.isValid&&(n(s),r(!1))},f=h=>{const b=Yt.find(_=>_.name===h);if(!b)return;const p=`${h}(${b.params.map((_,x)=>`arg${x+1}`).join(", ")})`;d(_=>_+(_?" ":"")+p)},v=h=>{d(b=>b+(b?" ":"")+`{${h}}`)},m=g.useMemo(()=>{const h={math:[],string:[],date:[],logical:[],aggregate:[]};return Yt.forEach(b=>{h[b.category]&&h[b.category].push(b)}),h},[]);return u.jsx(fr,{open:e,onOpenChange:r,children:u.jsxs(mr,{className:"max-w-4xl max-h-[90vh]",children:[u.jsxs(hr,{children:[u.jsxs(pr,{className:"flex items-center gap-2",children:[u.jsx(Bd,{className:"h-5 w-5"}),"Редактор формул"]}),u.jsx(vr,{children:"Создайте формулу используя функции и колонки"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 h-[500px]",children:[u.jsxs("div",{className:"col-span-1 border-r pr-4",children:[u.jsx("h3",{className:"text-sm font-medium mb-3",children:"Функции"}),u.jsxs(mu,{defaultValue:"math",className:"w-full",children:[u.jsxs(hu,{className:"w-full grid grid-cols-2 h-auto",children:[u.jsx(ir,{value:"math",className:"text-xs",children:"Мат."}),u.jsx(ir,{value:"string",className:"text-xs",children:"Строки"}),u.jsx(ir,{value:"date",className:"text-xs",children:"Даты"}),u.jsx(ir,{value:"logical",className:"text-xs",children:"Логика"})]}),Object.entries(m).map(([h,b])=>u.jsx(Kt,{value:h,className:"mt-2",children:u.jsx(Zn,{className:"h-64",children:u.jsx("div",{className:"space-y-1",children:b.map(p=>u.jsxs("button",{onClick:()=>{o(p.name),f(p.name)},className:"w-full text-left px-2 py-1.5 rounded hover:bg-gray-100 text-sm transition-colors",children:[u.jsx("div",{className:"font-medium text-primary",children:p.name}),u.jsx("div",{className:"text-xs text-gray-500 truncate",children:p.description})]},p.name))})})},h))]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("h3",{className:"text-sm font-medium mb-2",children:"Колонки"}),u.jsx(Zn,{className:"h-32",children:u.jsx("div",{className:"space-y-1",children:a.map(h=>u.jsx("button",{onClick:()=>v(h.column_name),className:"w-full text-left px-2 py-1 rounded hover:bg-gray-100 text-sm transition-colors",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"font-medium",children:h.column_name}),u.jsx(Fe,{variant:"outline",className:"text-xs",children:h.column_type})]})},h.id))})})]})]}),u.jsxs("div",{className:"col-span-2 flex flex-col",children:[u.jsxs("div",{className:"mb-3",children:[u.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Формула"}),u.jsx(wd,{value:s,onChange:h=>d(h.target.value),placeholder:"Введите формулу, например: SUM({price} * {quantity})",className:"font-mono text-sm h-32 resize-none"})]}),s&&u.jsx("div",{className:"mb-3",children:c.isValid?u.jsxs(Ge,{children:[u.jsx(jr,{className:"h-4 w-4 text-green-600"}),u.jsx(Be,{className:"text-green-600",children:"Формула корректна"})]}):u.jsxs(Ge,{variant:"destructive",children:[u.jsx(Jr,{className:"h-4 w-4"}),u.jsx(Be,{children:c.errors.join(", ")})]})}),i&&u.jsx("div",{className:"flex-1 border rounded-lg p-4 bg-gray-50",children:u.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[u.jsx(zd,{className:"h-4 w-4 mt-0.5 text-blue-500"}),u.jsx("div",{className:"flex-1",children:(()=>{const h=Yt.find(b=>b.name===i);return h?u.jsxs(u.Fragment,{children:[u.jsx("h4",{className:"font-medium text-sm mb-1",children:h.name}),u.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.description}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Синтаксис:"}),u.jsxs("code",{className:"block mt-1 p-2 bg-white rounded text-sm font-mono",children:[h.name,"(",h.params.map((b,p)=>`${b.name}: ${b.type}`).join(", "),")"]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Параметры:"}),u.jsx("ul",{className:"mt-1 space-y-1",children:h.params.map((b,p)=>u.jsxs("li",{className:"text-xs",children:[u.jsx("span",{className:"font-medium",children:b.name}),u.jsxs("span",{className:"text-gray-500",children:[" (",b.type,")"]}),b.optional&&u.jsx("span",{className:"text-gray-400",children:" - необязательный"})]},p))})]}),h.examples&&h.examples.length>0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Примеры:"}),u.jsx("div",{className:"mt-1 space-y-1",children:h.examples.map((b,p)=>u.jsx("code",{className:"block p-2 bg-white rounded text-xs font-mono",children:b},p))})]})]})]}):null})()})]})}),!i&&u.jsx("div",{className:"flex-1 border rounded-lg p-4 bg-blue-50",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(Kd,{className:"h-4 w-4 mt-0.5 text-blue-600"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-sm mb-2 text-blue-900",children:"Подсказки"}),u.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[u.jsxs("li",{children:["Используйте фигурные скобки для ссылки на колонки: ","{column_name}"]}),u.jsx("li",{children:"Комбинируйте функции для создания сложных формул"}),u.jsx("li",{children:"Формулы автоматически пересчитываются при изменении данных"}),u.jsx("li",{children:"Поддерживаются математические операторы: +, -, *, /, %"}),u.jsxs("li",{children:["Поддерживаются операторы сравнения: ","<, >, <=, >=, ==, !="]})]})]})]})})]})]}),u.jsxs(fn,{children:[u.jsx(F,{variant:"outline",onClick:()=>r(!1),children:"Отмена"}),u.jsx(F,{onClick:l,disabled:!c.isValid||!s.trim(),children:"Сохранить формулу"})]})]})})};function Gh(){const{id:e}=_d(),r=Cd(),[t,n]=g.useState(null),{data:a,isLoading:s}=Nd(e),[d,i]=g.useState({}),[o,c]=g.useState({column:"created_at",direction:"desc"}),[l,f]=g.useState({page:1,pageSize:50}),[v,m]=g.useState(!1),[h,b]=g.useState(!1),[p,_]=g.useState(!1),[x,y]=g.useState(!1),[O,$]=g.useState(null),[G,U]=g.useState(""),{data:I,isLoading:Q,error:Y}=Jd(e,d,o,l),{data:ne,isLoading:se}=jd(e),ue=ei(e),ae=ri(e),de=ti(e);if(g.useEffect(()=>{(async()=>{const{data:{user:j}}=await ye.auth.getUser();j&&n(j.id)})()},[]),!t||s)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx(ta,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 animate-pulse"}),u.jsx("p",{className:"text-muted-foreground",children:"Загрузка базы данных..."})]})});if(!a)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs(Er,{children:[u.jsxs(Sd,{children:[u.jsx(kd,{children:"База данных не найдена"}),u.jsx(Pd,{children:"Возможно, она была удалена или у вас нет доступа"})]}),u.jsx(tt,{children:u.jsxs(F,{onClick:()=>r("/dashboard"),children:[u.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Вернуться к списку"]})})]})});const he=async()=>{try{await ue.mutateAsync({data:{}}),te.success("Строка добавлена")}catch(k){te.error("Ошибка добавления строки"),console.error(k)}},E=async k=>{try{await de.mutateAsync(k),te.success("Строка удалена")}catch(j){te.error("Ошибка удаления строки"),console.error(j)}},N=k=>{c(j=>({column:k,direction:j.column===k&&j.direction==="asc"?"desc":"asc"}))},A=k=>{f(j=>({...j,page:k}))},V=I!=null&&I.total?Math.ceil(I.total/l.pageSize):1,T=ne||[],S=async(k,j,R)=>{try{await ae.mutateAsync({rowId:k,updates:{[j]:R}}),$(null),te.success("Значение обновлено")}catch(M){te.error("Ошибка обновления"),console.error(M)}};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:[u.jsx("div",{className:"border-b bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm sticky top-0 z-10",children:u.jsx("div",{className:"container mx-auto px-4 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>r("/dashboard"),className:"gap-2",children:[u.jsx(Jn,{className:"h-4 w-4"}),"Назад"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",style:{backgroundColor:a.color+"20"},children:a.icon}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold",children:a.name}),a.description&&u.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>m(!0),children:[u.jsx(qd,{className:"h-4 w-4"}),"Колонки"]}),u.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>b(!0),children:[u.jsx(Qt,{className:"h-4 w-4"}),"Связи"]}),u.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>_(!0),children:[u.jsx(bu,{className:"h-4 w-4"}),"Импорт"]}),u.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",children:[u.jsx(Rd,{className:"h-4 w-4"}),"Экспорт"]}),u.jsxs(aa,{children:[u.jsx(ua,{asChild:!0,children:u.jsx(F,{variant:"outline",size:"sm",children:u.jsx(ea,{className:"h-4 w-4"})})}),u.jsxs(Zt,{align:"end",children:[u.jsxs(kr,{children:[u.jsx(gu,{className:"h-4 w-4 mr-2"}),"Настройки"]}),u.jsx(Jt,{}),u.jsxs(kr,{className:"text-destructive",children:[u.jsx(at,{className:"h-4 w-4 mr-2"}),"Удалить базу данных"]})]})]})]})]})})}),u.jsxs("div",{className:"container mx-auto px-4 py-6",children:[u.jsxs("div",{className:"space-y-4 mb-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs(Fe,{variant:"outline",children:[(I==null?void 0:I.total)||0," записей"]})}),u.jsxs(F,{onClick:he,disabled:ue.isPending,className:"gap-2",children:[u.jsx(Mr,{className:"h-4 w-4"}),"Добавить запись"]})]}),u.jsx(Zf,{columns:T,filters:d,onFiltersChange:i})]}),u.jsx(Er,{children:u.jsx(tt,{className:"p-0",children:Q?u.jsx("div",{className:"p-8 space-y-4",children:[1,2,3,4,5].map(k=>u.jsx(Md,{className:"h-12 w-full"},k))}):Y?u.jsxs("div",{className:"p-8 text-center",children:[u.jsx("p",{className:"text-destructive mb-2",children:"Ошибка загрузки данных"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:Y.message})]}):!(I!=null&&I.data)||I.data.length===0?u.jsxs("div",{className:"p-16 text-center",children:[u.jsx(ta,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Нет данных"}),u.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Добавьте первую запись для начала работы"}),u.jsxs(F,{onClick:he,className:"gap-2",children:[u.jsx(Mr,{className:"h-4 w-4"}),"Добавить запись"]})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs(Dd,{children:[u.jsx(Od,{children:u.jsxs(Xn,{children:[u.jsx(Rt,{className:"w-[50px]",children:"#"}),T.map(k=>u.jsx(Rt,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>N(k.column_name),children:u.jsxs("div",{className:"flex items-center gap-2",children:[k.column_name,u.jsx(Fe,{variant:"outline",className:"text-xs",children:k.column_type}),o.column===k.column_name&&u.jsx(Gd,{className:`h-4 w-4 ${o.direction==="desc"?"rotate-180":""}`})]})},k.id)),u.jsx(Rt,{className:"w-[80px]",children:"Действия"})]})}),u.jsx(Td,{children:I.data.map((k,j)=>u.jsxs(Xn,{children:[u.jsx(Dt,{className:"font-medium",children:(l.page-1)*l.pageSize+j+1}),T.map(R=>u.jsx(Dt,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>k.id&&$({rowId:k.id,column:R.column_name}),children:(O==null?void 0:O.rowId)===k.id&&(O==null?void 0:O.column)===R.column_name?u.jsx(Xf,{column:R,value:k[R.column_name],onSave:M=>S(k.id,R.column_name,M),onCancel:()=>$(null)}):u.jsx(u.Fragment,{children:k[R.column_name]!==null&&k[R.column_name]!==void 0?String(k[R.column_name]):"-"})},R.id)),u.jsx(Dt,{children:u.jsxs(aa,{children:[u.jsx(ua,{asChild:!0,children:u.jsx(F,{variant:"ghost",size:"sm",children:u.jsx(ea,{className:"h-4 w-4"})})}),u.jsxs(Zt,{align:"end",children:[u.jsx(kr,{children:"Редактировать"}),u.jsx(Jt,{}),u.jsxs(kr,{className:"text-destructive",onClick:()=>k.id&&E(k.id),children:[u.jsx(at,{className:"h-4 w-4 mr-2"}),"Удалить"]})]})]})})]},k.id||j))})]})})})}),(I==null?void 0:I.data)&&I.data.length>0&&u.jsxs("div",{className:"flex items-center justify-between mt-4",children:[u.jsxs("p",{className:"text-sm text-muted-foreground",children:["Страница ",l.page," из ",V]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(F,{variant:"outline",size:"sm",onClick:()=>A(l.page-1),disabled:l.page===1,children:"Предыдущая"}),u.jsx(F,{variant:"outline",size:"sm",onClick:()=>A(l.page+1),disabled:l.page>=V,children:"Следующая"})]})]})]}),u.jsx(bo,{open:v,onOpenChange:m,databaseId:e,columns:T}),u.jsx(t0,{open:h,onOpenChange:b,databaseId:e}),u.jsx(m0,{open:p,onOpenChange:_,databaseId:e,existingColumns:T,onImportComplete:()=>{_(!1),te.success("Данные импортированы")}}),u.jsx(Mh,{open:x,onOpenChange:y,formula:G,onSave:k=>{U(k),te.success("Формула сохранена")},columns:T})]})}export{Gh as default};
